{"version":3,"sources":["utilities/hooks/useLocal.ts","utilities/services/addNonTeachingLoadService.ts","utilities/hooks/importRemoteFileHook.ts","utilities/hooks/useHarmonyFormsStore.ts","utilities/interfaces/dataInterfaces/dayInterfaces.ts","utilities/interfaces/dataInterfaces/scheduleInterfaces.ts","utilities/interfaces/dataInterfaces/termInterfaces.ts","utilities/contexts/appContext.ts","utilities/contexts/scheduleContext.ts","utilities/interfaces/appInterfaces.ts","utilities/services/conflictsService.ts","utilities/services/scheduleService.ts","utilities/services/addSectionService.ts","utilities/services/facultyLoadsService.ts","utilities/services/facultyScheduleService.ts","utilities/services/harmoniouslyService.ts","utilities/services/roomsScheduleService.ts","utilities/services/timesScheduleService.ts","utilities/services/validation/popover.ts","utilities/reducers/appReducer.ts","utilities/hooks/addSectionHooks.ts","utilities/hooks/deleteMeetingHooks.ts","utilities/hooks/useAppContext.ts","utilities/hooks/useExportCSV.ts","utilities/hooks/useExportFullCSV.ts","utilities/hooks/useFieldArrayFormContext.tsx","utilities/hooks/useHarmonyAssignmentsStore.ts","utilities/hooks/useHarmonyResultStore.ts","utilities/hooks/useHarmonyStepperCallback.ts","utilities/hooks/useImportFile.ts","utilities/hooks/useRedirect.ts","assets/CalvinUniv-vert-full-color-inverse.png","utilities/index.ts","utilities/constants.ts","components/reuseables/AddNonTeachingLoadPopover/AddNonTeachingLoadPopover.tsx","components/reuseables/PopoverButton/PopoverButton.tsx","components/reuseables/AddSectionButton/AddSectionButton.tsx","components/reuseables/AddSectionPopover/AddSectionPopover.tsx","components/reuseables/animated/AnimateShowAndHide/AnimateShowAndHide.tsx","components/reuseables/animated/Spring3DHover/Spring3DHover.tsx","components/reuseables/animated/Spring3DHover/spring3DHoverService.ts","components/reuseables/AsyncComponent/AsyncComponent.tsx","components/reuseables/Calendar/Calendar.tsx","components/reuseables/FieldArrayForm/DeleteFieldButton/DeleteFieldButton.tsx","components/reuseables/FieldArrayForm/FieldArrayField/FieldArrayField.tsx","components/reuseables/FieldArrayForm/FieldArrayFields/FieldArrayFields.tsx","components/reuseables/FieldArrayForm/FieldArrayFormActionButtons/FieldArrayFormActionButtons.tsx","components/reuseables/FieldArrayForm/FieldArrayForm.tsx","components/reuseables/GridItem/GridItemAutocomplete/GridItemAutocomplete.tsx","components/reuseables/GridItem/GridItemCheckboxGroup/GridItemCheckboxGroup.tsx","components/reuseables/GridItem/GridItemRadioGroup/GridItemRadioGroup.tsx","components/reuseables/GridItem/GridItemTextField/GridItemTextField.tsx","components/reuseables/ImportInputWrapper/ImportInputWrapper.tsx","components/reuseables/ModalPagination/ModalPagination.tsx","components/reuseables/NewTabLink/NewTabLink.tsx","components/reuseables/Page/Page.tsx","components/reuseables/Schedule/Schedule.tsx","components/reuseables/Schedule/ScheduleHeader.tsx","components/reuseables/Schedule/ScheduleLeftTimeAxis.tsx","components/reuseables/Schedule/ScheduleBase.tsx","components/reuseables/ViewDemoButton/ViewDemoButton.tsx","components/pages/AboutPage/AboutPage.tsx","components/pages/AboutPage/TeamMemberProfile/TeamMemberProfile.tsx","components/pages/AboutPage/TextSection/TextSection.tsx","components/pages/HarmonyPage/Harmony/Harmony.tsx","components/pages/HarmonyPage/Harmony/HarmonyCheckbox.tsx","components/pages/HarmonyPage/Harmony/HarmonyCheckboxList.tsx","components/pages/HarmonyPage/Harmony/HarmonyCourseCheckboxes.tsx","components/pages/HarmonyPage/Harmony/HarmonyAddAssignments.tsx","components/pages/HarmonyPage/Harmony/HarmonyFieldArrayForm.tsx","components/pages/HarmonyPage/Harmony/HarmonyStepper/HarmonyStepper.tsx","components/pages/HarmonyPage/Harmony/HarmonyStepper/HarmonyStepperAssignments.tsx","components/pages/HarmonyPage/Harmony/HarmonyStepper/HarmonyStepperImportData.tsx","components/pages/HarmonyPage/Harmony/HarmonyStepper/HarmonyStepperResult.tsx","components/pages/HarmonyPage/Harmony/HarmonyStepper/HarmonyStepperUpdateData.tsx","components/pages/HarmonyPage/Harmony/HarmonyStepper/HarmonyStepperWelcome.tsx","components/pages/HarmonyPage/HarmonyPage.tsx","components/pages/HelpPage/HelpPage.tsx","components/pages/SchedulizerPage/SchedulizerPage.tsx","components/App/App.tsx","components/Footer/Footer.tsx","assets/logo.ts","components/Header/Header.tsx","components/Tabs/DepartmentSchedule/DepartmentSchedule.tsx","components/Tabs/FacultyLoads/FacultyLoads.tsx","components/Tabs/FacultyLoads/UpdateNonTeachingLoadModalPagination/UpdateNonTeachingLoadModalPagination.tsx","components/Tabs/FacultyLoads/UpdateSectionModalPagination/UpdateSectionModalPagination.tsx","components/Tabs/FacultySchedule/FacultySchedule.tsx","components/Tabs/RoomsSchedule/RoomsSchedule.tsx","components/Tabs/tabComponents/CSVActions/CSVActions.tsx","components/Tabs/tabComponents/CSVActions/ImportButton/ImportButton.tsx","components/Tabs/tabComponents/NoCoursesHeader/NoCoursesHeader.tsx","components/Tabs/tabComponents/TabPanel/TabPanel.tsx","components/Tabs/Tabs.tsx","components/Toolbar/ColorSelector/ColorSelector.tsx","components/Toolbar/ScheduleToolbar/ScheduleToolbar.tsx","components/Toolbar/Searchbar/Searchbar.tsx","components/Toolbar/SemesterSelector/SemesterSelector.tsx","serviceWorker.ts","index.tsx","utilities/interfaces/index.ts","utilities/helpers/caseFunctions.ts","utilities/helpers/immer.ts","utilities/helpers/makeFC.tsx","utilities/helpers/readCSV.ts","utilities/helpers/teamMembers.ts","utilities/helpers/utils.ts","utilities/helpers/writeFullCSV.ts","utilities/helpers/writeLoadsCSV.ts"],"names":["loadLocal","key","item","localStorage","getItem","JSON","parse","undefined","useLocal","load","remove","removeItem","removeLocal","save","setItem","stringify","saveLocal","mapNonTeachingLoadValuesToInput","data","terms","addFalseToTermsCheckboxList","section","term","activity","instructionalMethod","facultyHours","instructor","instructors","mapNonTeachingLoadInput","newSection","cloneDeep","emptySection","newCourse","emptyCourse","isNonTeaching","termValues","Object","values","Term","map","t","includes","Array","length","fill","getCSVStr","useImportRemoteFile","appContext","useContext","AppContext","appState","schedule","fileUrl","appDispatch","setIsCSVLoading","importRemoteFile","url","location","href","csvIndex","indexOf","xlsxIndex","loadRemoteCSV","xlsxUrl","slice","fetch","then","response","status","arrayBuffer","result","a","payload","type","newSchedule","csvStringToSchedule","getCSVFromXLSXData","updateScheduleInContext","clearSearchParams","csvUrl","text","useHarmonyFormsStore","create","set","get","courses","professors","rooms","times","update","Day","Weekday","Monday","Tuesday","Wednesday","Thursday","Friday","SemesterLength","Half","Intensive","SemesterLengthOption","updateNonIdentifyingCourseInfo","oldCourse","department","updateIdentifyingCourseInfo","prefixes","number","updateNonIdentifyingSectionInfo","oldSection","anticipatedSize","comments","day10Used","endDate","globalMax","localMax","name","semesterLength","startDate","studentHours","termStart","used","year","updateIdentifyingSectionInfo","letter","HalfFirst","HalfSecond","IntensiveA","IntensiveB","IntensiveC","IntensiveD","createContext","voidFn","initialAppState","isCSVLoading","displayName","ScheduleContext","isScheduleLoading","setIsScheduleLoading","ColorBy","SchedulizerTab","classes","colorBy","departments","schedulizerTab","selectedTerm","Fall","slotMaxTime","slotMinTime","range","extendMoment","AllMoment","findConflicts","dataToCheck","forEach","course","courseIndex","sections","sectionIndex","meetings","meeting","meetingIndex","isConflict","startTimeMoment","moment","startTime","push","days","endTime","add","duration","indexes","room","getLocationString","sectionName","getSectionName","meeting1","i","meeting2","j","range1","range2","overlaps","some","day","ci1","si1","mi1","ci2","si2","mi2","getHoursArr","min","max","minHour","parseInt","split","maxHour","getEvents","groups","events","enumArray","scheduleWithConflicts","dept","prof","className","createEventClassName","group","endTimeMoment","format","event","dayOfWeek","INITIAL_DATE","newEvent","classNames","description","end","extendedProps","start","title","e","replace","getMinAndMaxTimes","flatten","startTimes","endTimes","filter","minTime","minBy","startOf","maxTime","maxBy","filterEventsByTerm","groupedEvents","tempGroupedEvents","forOwn","_","filterHeadersWithNoEvents","filteredEvents","headers","header","groupEvents","colorConflictBorders","borderColor","colorEventsByFeature","Room","building","roomNum","roomNumber","roomStr","color","randomColor","luminosity","seed","hash","textColor","Instructor","instructorStr","Prefix","prefixStr","prefix","levelStr","String","getPrefixes","sort","getNumbers","numbers","getCourseNames","names","getSectionLetters","letters","getInstructionalMethods","instructionalMethods","getDepts","deptStr","getCalendarClassName","scheduleType","convertFromSemesterLength","sl","Full","HalfSemester","IntensiveSemester","FullSemester","getCourse","courseNumber","isEqual","getSection","mapInputToInternalTypes","createNewSectionFromInput","createNewCourseFromInput","mapInternalTypesToInput","locationValue","trim","defaultTerm","isArray","addFalseToDaysCheckboxList","halfSemester","intensiveSemester","roomCapacity","toString","locationCase","semesterType","First","Second","A","B","C","D","convertToSemesterLength","Number","startTimeCase","yearCase","weekdays","wd","handleOldMeeting","oldData","removeOldMeeting","oldMeeting","removeMeetingFromSchedule","hardDelete","oldSectionHadMeetings","removeMeeting","splice","loadHoursRegEx","updateRow","newRow","prevRow","termName","termCourseSectionProp","termHoursProp","sectionNameWithHours","createTable","newTableData","newFacultyRow","faculty","prevAddedFacultyRow","updateArgs","Spring","Summer","Interim","console","log","sortedTableData","row","totalHours","fallHours","springHours","summerHours","otherHours","b","sumBy","findSection","c","s","emptyMeeting","getCourseSectionMeetingFromCell","cellValue","cellHeader","sectionStrList","join","courseSectionMeeting","csm","iterable","findNonTeachingLoad","nonTeachingActivity","nonTeachingLoadsArray","nonTeachingLoads","nonTeachingLoadArray","nonTeachingLoad","getNonTeachingLoadsFromCell","nonTeachingLoadStrList","getProfs","professorsSet","Set","getClasses","coursesSet","stringSet","firstPrefix","obj","has","getRooms","roomsSet","getTimes","timesSet","time24","emptyStringToNull","value","originalValue","removeUncheckedValues","valueArr","decimalRegex","Boolean","match","addSectionSchema","object","shape","typeError","integer","transform","nullable","array","string","required","test","of","uppercase","positive","addNonTeachingLoadSchema","reducer","actionCallback","state","action","newState","Level","Faculty","useAddSectionToSchedule","addSectionToSchedule","addToSchedule","switchToCorrectTerm","scrollToUpdatedSection","Loads","scrollToUpdatedFacultyRow","timestamp","insertSectionCourse","addNonTeachingLoadToSchedule","currentTerm","newTerm","newElement","newSectionName","newElements","document","getElementsByClassName","parentElement","scrollIntoView","id","getIdFromFaculty","getElementById","behavior","block","useInput","label","errors","camelCase","errorMessage","message","useDeleteMeetingFromSchedule","deleteMeetingFromSchedule","useAppContext","useExportCSV","download","scheduleToCSVString","nonTeachingCSV","scheduleToNonTeachingCSVString","useExportFullCSV","scheduleToFullCSVString","FieldArrayFormContext","React","useFieldArrayFormContext","FieldArrayFormProvider","children","props","Provider","useHarmonyAssignmentsStore","immer","assignments","setAssignments","newAssignments","setClass","attributes","useHarmonyResultStore","setResult","res","convertToSchedule","keys","courseObject","professor","time","useHarmonyStepperCallback","callbacks","clearCallbacks","pushCallbacks","callback","useImportFile","isAdditiveImport","scheduleJSON","file","target","files","fileNameTokens","fileType","reader","FileReader","readAsArrayBuffer","readAsBinaryString","Error","onloadend","scheduleString","currentSchedule","newScheduleData","combineSchedules","xlsxData","Uint8Array","workBook","read","firstSheet","Sheets","SheetNames","utils","sheet_to_csv","useRedirect","history","useHistory","path","module","exports","AddNonTeachingLoadPopover","removeOldActivity","methods","useForm","criteriaMode","resolver","yupResolver","reset","getValues","useEffect","inputValues","formValues","Box","Typography","variant","Grid","container","spacing","defaultValue","multiple","options","initialValue","Button","onClick","handleSubmit","defaultProps","PopoverButton","isIcon","popupId","buttonTitle","minWidth","buttonProps","popupState","usePopupState","IconButton","bindTrigger","Add","Popover","bindPopover","anchorOrigin","horizontal","vertical","PaperProps","style","transformOrigin","AddSectionButton","transformDataToTrueSectionInput","dataCourseSection","newMeeting","AddSectionPopover","defaultValues","useState","setSemesterLength","onSubmit","dataTransformed","omitBy","isNil","isHalfSemester","isIntensiveSemester","isCustomSemester","CustomSemester","mb","textFieldProps","autoFocus","fullWidth","InputProps","endAdornment","InputAdornment","position","xs","onChange","h","direction","disabled","multiline","rows","alignItems","justify","addTitle","buttons","AnimateShowAndHide","once","isActive","setIsActive","isVisible","setIsVisible","springProps","useSpring","config","friction","mass","tension","from","height","opacity","x","onVisibilityChange","useCallback","isElemVisible","active","div","paddingRight","Spring3DHover","member","xys","photo","website","onMouseLeave","onMouseMove","clientX","y","clientY","calc","interpolate","trans","alt","src","borderRadius","window","innerHeight","innerWidth","SubComponents","Union","Literal","AsyncComponent","isLoading","getElements","Loading","Loaded","createFC","Calendar","allDaySlot","dayHeaderFormat","weekday","droppable","editable","headerToolbar","initialDate","initialView","nowIndicator","plugins","interactionPlugin","timeGridPlugin","selectable","weekends","DeleteFieldButton","index","Tooltip","aria-label","FieldArrayField","fieldIndex","control","titleCaseName","useMemo","m","as","TextField","FieldArrayFields","fields","field","f","FieldArrayFormActionButtons","append","margin","FieldArrayForm","fieldsName","emptyValue","startCase","toLower","selector","formMethods","fieldArrayMethods","useFieldArray","onFormSubmit","formData","dataWithNoEmpty","entries","every","Card","marginBottom","CardContent","GridItemAutocomplete","useFormContext","nameFallback","render","controllerProps","cPropSet","propsCopy","Autocomplete","autoSelect","freeSolo","openOnFocus","renderInput","params","error","helperText","GridItemCheckboxGroup","register","onValueChange","onCheckboxChange","opt","valueCopy","FormControl","component","FormLabel","FormGroup","FormControlLabel","Checkbox","checked","inputRef","FormHelperText","GridItemRadioGroup","RadioGroup","Radio","GridItemTextField","ImportInputWrapper","onInputChange","htmlFor","accept","ModalPagination","forwardRef","ref","findCourseSectionMeeting","PopoverComponent","open","setOpen","modalValues","setModalValues","iterableKeyMap","setIterableKeyMap","page","setPage","handleModalOpen","useImperativeHandle","Modal","onClose","Paper","Pagination","count","NewTabLink","Link","rel","Page","Schedule","tenVH","ScheduleHeader","top","ScheduleLeftTimeAxis","ScheduleBase","readonly","calendarHeaders","calendarOptions","popupData","setPopupData","handleEventClick","arg","el","calenderHeadersNoEmptyInTerm","Stick","node","eventClick","maxHeight","maxWidth","ViewDemoButton","demoUrl","AboutPage","AboutVision","body","AboutTeam","team","AboutCode","AboutReport","AboutResources","TeamMemberProfile","bio","TextSection","mt","Harmony","resultSelector","setRes","autoRun","button","CustomButton","footer","Footer","HarmonyCheckbox","setList","setChecked","handleChange","clickedItem","isChecked","prevState","HarmonyCheckboxList","list","customLabel","assignmentsSelector","inferredAssignmentsList","itemObj","HarmonyCourseCheckboxes","stepperSelector","profList","setProfList","timeList","setTimeList","roomList","setRoomList","onSave","profObj","Last","HarmonyAddAssignments","courseObj","Course","HarmonyFieldArrayForm","onSubmitCallback","HarmonyStepper","activeStep","setActiveStep","skipped","setSkipped","steps","getSteps","redirectTo","isStepOptional","step","isStepSkipped","scrollTo","flex","prevActiveStep","display","flexDirection","getStepContent","textAlign","prevSkipped","newSkipped","delete","cb","Stepper","alternativeLabel","paddingTop","stepProps","labelProps","optional","completed","Step","StepLabel","HarmonyStepperAssignments","HarmonyStepperImportData","hasScheduleData","addSchedulizerDataToStore","r","Time","inferredAssignments","cls","HarmonyStepperResult","HarmonyStepperUpdateData","HarmonyStepperWelcome","HarmonyPage","HelpPage","SchedulizerPage","App","useReducer","basename","p","logo","CalvinLogo","Header","AppBar","elevation","Toolbar","to","RouterLink","DepartmentSchedule","FacultyLoads","updateSectionModalRef","useRef","updateNonTeachingLoadModalRef","columns","accessor","tableInstance","useTable","useSortBy","getTableProps","getTableBodyProps","headerGroups","prepareRow","TableContainer","Table","TableHead","headerGroup","TableRow","getHeaderGroupProps","column","TableCell","getHeaderProps","getSortByToggleProps","isSorted","isSortedDesc","TableBody","rowId","original","getRowProps","cells","cell","cellClass","getCellProps","isNonTeachingLoad","cellData","current","handleCellClick","UpdateNonTeachingLoadModalPagination","UpdateSectionModalPagination","FacultySchedule","RoomsSchedule","CSVActions","onFullExportClick","edge","Menu","getContentAnchorEl","bindMenu","MenuItem","ImportButton","btnProps","NoCoursesHeader","marginRight","TabPanel","other","aria-labelledby","hidden","role","Tabs","tabValue","setTabValue","scheduleHasCourses","Container","centered","indicatorColor","newValue","Tab","ColorSelector","InputLabel","Select","selectedColorBy","ScheduleToolbar","Searchbar","getOptionLabel","option","notSupported","SemesterSelector","handleOnClick","ChevronLeft","ChevronRight","hostname","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","SEPARATORS","fallReg","RegExp","summerReg","springReg","interimReg","sunReg","monReg","tuesReg","wedReg","thursReg","friReg","satReg","assignWithMeetings","arrAssign","valueParts","createMeetings","v","startTimeCallback","locationCallback","termCallback","separator","termsArr","termCase","semesterLengthCallback","semesterLengthCase","daysCallback","daysCase","instructorCallback","instructorCase","prefixCallback","prefixCase","nameCallback","numberCallback","letterCallback","globalMaxCallback","integerDefaultZeroCase","localMaxCallback","commentsCallback","yearCallback","studentHoursCallback","startsWith","substr","facultyHoursCallback","durationCallback","durationCase","roomCapacityCallback","capacity","instructionalMethodCallback","startMoment","isValid","roomParts","upperValue","toUpperCase","lowerValue","toLowerCase","Sunday","Saturday","endDateCase","startSectionDate","sectionStart","sectionLength","diff","startMonth","month","isInteger","api","fn","produce","Component","subComponent","Tag","elements","alternatives","literal","getUnionTypeIterable","it","getChildByName","pruimSpreadsheetFields","cf","half","startTimeStr","registrarSpreadsheetFields","AcademicYear","BuildingAndRoom","Comments","CourseNum","Day10Used","Department","FacultyLoad","GlobalMax","InstructionalMethod","LastEditTimestamp","LocalMax","MeetingDays","MeetingDurationMinutes","MeetingStart","MeetingTime","MinimumCredits","RoomCapacity","SectionCode","SectionEndDate","SectionStartDate","SectionStatus","ShortTitle","SubjectCode","TermStart","Used","templateSpreadsheetFields","Days","FacLoad","NonTeachingActivity","SectionName","sectionParts","StuCred","Terms","csvString","objects","papa","skipEmptyLines","meta","existingCourse","existingCourseIndex","existingSection","existingSectionIndex","newMeetings","meetingExists","concat","val","Children","child","numericReg","csvStr","endMoment","meetingTimeStr","meetingStartStr","meetingStartInternalStr","meetingEndStr","meetingEndInternalStr","meetingDurationMinutesStr","buildingStr","roomNumberStr","buildingAndRoomStr","roomCapacityStr","daysStr","monStr","tuesStr","wedStr","thursStr","friStr","clone","getMeetingTimeStr","termStr","getTermsStr","sectionNameStr","courseLevelCodeStr","termsStr","getTermStr","csvHeader","toFixed"],"mappings":"8IAAA,oEAOO,IAAMA,EAAY,SAAIC,GAC3B,IAAMC,EAAsBC,aAAaC,QAAQH,GACjD,OAAOC,EAAQG,KAAKC,MAAMJ,QAAcK,GAwB7BC,EAAW,SAAIP,GAU1B,MAAO,CAAEQ,KATI,WACX,OAAOT,EAAaC,IAQPS,OAHA,YAdU,SAACT,GAC1BE,aAAaQ,WAAWV,GActBW,CAAYX,IAESY,KANV,SAACX,IApBS,SAAID,EAAaC,QAC3BK,IAATL,EAAoBC,aAAaQ,WAAWV,GAC3CE,aAAaW,QAAQb,EAAKI,KAAKU,UAAUb,IAmB5Cc,CAAUf,EAAKC,O,iCCtCnB,gIAMae,EAAkC,SAC7CC,GAC0B,IAAD,IACnBC,EAAQC,EAA2B,OAACF,QAAD,IAACA,OAAD,EAACA,EAAMG,QAAQC,MAExD,MAAO,CACLC,SAAQ,iBAAEL,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQG,2BAAhB,QAAuC,GAC/CC,kBACiClB,KAA3B,OAAJW,QAAI,IAAJA,OAAA,EAAAA,EAAMG,QAAQI,eAA8BP,EAAKG,QAAQI,cAAgB,EACrEP,EAAKG,QAAQI,kBACblB,EACNmB,WAAU,iBAAER,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQM,mBAAhB,QAA+B,GACzCR,UAISS,EAA0B,SAACV,GAAgC,IAAD,EAC/DW,EAAsBC,oBAAUC,KAChCC,EAAoBF,oBAAUG,KAMpC,OALAJ,EAAWL,oBAAsBN,EAAKK,SACtCM,EAAWJ,aAAX,UAA0BP,EAAKO,oBAA/B,QAA+C,EAC/CI,EAAWF,YAAcT,EAAKQ,WAC9BG,EAAWK,eAAgB,EAC3BL,EAAWP,KAAOJ,EAAKC,MAChB,CAAEa,YAAWH,eAGTT,EAA8B,SAACD,GAC1C,IAAMgB,EAAaC,OAAOC,OAAOC,QACjC,OAAKnB,EAGEoB,cAAIJ,GAAY,SAACK,GACtB,QAAOrB,EAAMsB,SAASD,IAAKA,KAHpB,IAAIE,MAAMP,EAAWQ,QAAQC,MAAK,K,0LChChCC,EAAY,QAGZC,EAAsB,WACjC,IAAMC,EAAaC,qBAAWC,KADS,EAMnCF,EAHFG,SAAYC,EAHyB,EAGzBA,SAAUC,EAHe,EAGfA,QACtBC,EAEEN,EAFFM,YACAC,EACEP,EADFO,gBA4CF,MAAO,CAAEC,iBApCgB,WAEvB,IAAMC,EAAMC,SAASC,KAEfC,EAAWH,EAAII,QAAQf,GACvBgB,EAAYL,EAAII,QApBP,UAqBf,IAAkB,IAAdD,EACFG,EAAcN,EAAKG,EAAUZ,QACxB,IAAmB,IAAfc,EAAkB,CAC3B,IAAME,EAAUP,EAAIQ,MAAMH,EAxBb,SAwBoClB,QACjC,KAAZoB,GAAkBA,IAAYX,GAChCE,GAAgB,GAChBW,MAAMF,GACHG,MAAK,SAACC,GACL,OAAwB,MAApBA,EAASC,OACJ,KAEFD,EAASE,iBAEjBH,KAPH,uCAOQ,WAAOI,GAAP,eAAAC,EAAA,yDACJlB,EAAY,CAAEmB,QAAS,CAAEpB,QAASW,GAAWU,KAAM,gBAC/CH,EAFA,uBAGII,EAAcC,8BAClBC,6BAAmBN,IAJnB,SAMIO,kCAAwB1B,EAAUuB,EAAarB,GANnD,OAQJyB,IACAxB,GAAgB,GATZ,2CAPR,wDAmBAwB,QAQFA,EAAoB,WAExBrB,SAASC,KAAO,IASLI,EAAgB,SAACN,EAAaG,EAAkBZ,GAA4B,IAAD,EAKlFA,EAHFG,SAAYC,EAFwE,EAExEA,SAAUC,EAF8D,EAE9DA,QACtBC,EAEEN,EAFFM,YACAC,EACEP,EADFO,gBAGIyB,EAASvB,EAAIQ,MAAML,EAAWd,EAAUF,QAC/B,KAAXoC,GAAiBA,IAAW3B,GAC9BE,GAAgB,GAChBW,MAAMc,GACHb,MAAK,SAACC,GACL,OAAwB,MAApBA,EAASC,OACJ,KAEFD,EAASa,UAEjBd,KAPH,uCAOQ,WAAOI,GAAP,eAAAC,EAAA,yDACJlB,EAAY,CAAEmB,QAAS,CAAEpB,QAAS2B,GAAUN,KAAM,gBAC9CH,EAFA,uBAGII,EAAcC,8BAAoBL,GAHtC,SAIIO,kCAAwB1B,EAAUuB,EAAarB,GAJnD,OAMJyB,IACAxB,GAAgB,GAPZ,2CAPR,wDAiBAwB,M,uFCzFSG,EAAuBC,aAClC,SAACC,EAAkCC,GACjC,MAAO,CACLC,QAAS,GACTC,WAAY,GACZC,MAAO,GACPC,MAAO,GACPC,OAAQ,SAACxF,EAAKiB,GACZiE,EAAI,eAAGlF,EAAMiB,U,iCCdd,IAAKwE,EAUAC,E,+XAVAD,K,WAAAA,E,YAAAA,E,cAAAA,E,cAAAA,E,WAAAA,E,aAAAA,E,aAAAA,M,cAUAC,O,OACDD,EAAIE,Q,SADHD,I,QAEAD,EAAIG,S,UAFJF,I,UAGED,EAAII,W,YAHNH,I,SAICD,EAAIK,U,WAJLJ,I,OAKDD,EAAIM,Q,UALHL,M,KCyBL,ICnCKrD,EAOA2D,EAUAC,EAKAC,EAOAC,EDMCC,EAAiC,SAACC,EAAmBtE,GAEhE,OADAsE,EAAUC,WAAavE,EAAUuE,WAC1BD,GAKIE,EAA8B,SAACF,EAAmBtE,GAG7D,OAFAsE,EAAUG,SAAWzE,EAAUyE,SAC/BH,EAAUI,OAAS1E,EAAU0E,OACtBJ,GA2CIK,EAAkC,SAC7CC,EACA/E,GAkBA,OAhBA+E,EAAWC,gBAAkBhF,EAAWgF,gBACxCD,EAAWE,SAAWjF,EAAWiF,SACjCF,EAAWG,UAAYlF,EAAWkF,UAClCH,EAAWI,QAAUnF,EAAWmF,QAChCJ,EAAWnF,aAAeI,EAAWJ,aACrCmF,EAAWK,UAAYpF,EAAWoF,UAClCL,EAAW1E,cAAgBL,EAAWK,cACtC0E,EAAWM,SAAWrF,EAAWqF,SACjCN,EAAWO,KAAOtF,EAAWsF,KAC7BP,EAAWQ,eAAiBvF,EAAWuF,eACvCR,EAAWS,UAAYxF,EAAWwF,UAClCT,EAAWxC,OAASvC,EAAWuC,OAC/BwC,EAAWU,aAAezF,EAAWyF,aACrCV,EAAWW,UAAY1F,EAAW0F,UAClCX,EAAWY,KAAO3F,EAAW2F,KAC7BZ,EAAWa,KAAO5F,EAAW4F,KACtBb,GAKIc,EAA+B,SAACd,EAAqB/E,GAKhE,OAJA+E,EAAWe,OAAS9F,EAAW8F,OAC/Bf,EAAWtF,KAAOO,EAAWP,KAC7BsF,EAAWjF,YAAcE,EAAWF,YACpCiF,EAAWpF,oBAAsBK,EAAWL,oBACrCoF,I,SCtHGtE,K,UAAAA,E,aAAAA,E,YAAAA,E,aAAAA,M,cAOA2D,K,YAAAA,E,kBAAAA,E,oBAAAA,E,eAAAA,E,eAAAA,E,eAAAA,E,gBAAAA,M,cAUAC,O,MACFD,EAAe2B,W,QADb1B,I,OAEDD,EAAe4B,Y,UAFd3B,M,cAKAC,O,EACNF,EAAe6B,Y,IADT3B,I,EAENF,EAAe8B,Y,IAFT5B,I,EAGNF,EAAe+B,Y,IAHT7B,I,EAINF,EAAegC,Y,KAJT9B,M,cAOAC,K,oBAAAA,E,oBAAAA,E,8BAAAA,E,yBAAAA,M,4HCjBCnD,EAAaiF,wBAA0B,CAClD7E,YAAa8E,SACbjF,SAAUkF,kBACVC,cAAc,EACd/E,gBAAiB6E,WAEnBlF,EAAWqF,YAAc,aCTlB,IAAMC,EAAkBL,wBAA+B,CAC5DM,mBAAmB,EACnBC,qBAAsBN,Y,iCCbxB,0GAIYO,EAOAC,EAXZ,mB,SAIYD,O,iBAAAA,I,eAAAA,I,2BAAAA,I,oBAAAA,M,cAOAC,O,qBAAAA,I,eAAAA,I,iBAAAA,I,0BAAAA,M,KA0BL,IAAMP,EAA4BpI,YAAU,aAAe,CAChE4I,QAAS,GACTC,QAAS,EACTC,YAAa,GACb1F,QAAS,GACTkC,WAAY,GACZC,MAAO,GACPpC,SAAU,CAAEkC,QAAS,IACrB0D,eAAgB,EAChBC,aAAc1G,IAAK2G,KACnBC,YAAa,QACbC,YAAa,OACb3D,MAAO,IAIJ4C,EAAgBQ,UACnBR,EAAgBU,YAAc,IAE3BV,EAAgBU,cACnBV,EAAgBU,YAAc,IAE3BV,EAAgB9C,aACnB8C,EAAgBU,YAAc,IAE3BV,EAAgB7C,QACnB6C,EAAgBU,YAAc,K,8gDCxDxBM,EAAUC,uBAAaC,GAAvBF,MAaKG,EAAgB,SAACpG,GAE5B,IAAMqG,EAA8B,GAgDpC,OA/CAC,kBAAQtG,EAASkC,SAAS,SAACqE,EAAQC,GACjCF,kBAAQC,EAAOE,UAAU,SAACvI,EAASwI,GACjCJ,kBAAQpI,EAAQyI,UAAU,SAACC,EAASC,GAClCD,EAAQE,YAAa,EACrB,IAAMC,EAAkBC,IAAOJ,EAAQK,UAAW,UAClDZ,EAAYa,KAAK,CACfC,KAAMP,EAAQO,KACdC,QAASJ,IAAOD,GAAiBM,IAAIT,EAAQU,SAAU,WACvDC,QAAS,CAACf,EAAaE,EAAcG,GACrCrI,YAAaN,EAAQM,YACrBgJ,KAAMC,4BAAkBb,EAAQtG,UAChCoH,YAAaC,yBAAepB,EAAQrI,GACpC+I,UAAWF,EACX5I,KAAMD,EAAQC,gBAOtBmI,kBAAQD,GAAa,SAACuB,EAAUC,GAC9BvB,kBAAQD,GAAa,SAACyB,EAAUC,GAC9B,IAAMC,EAAS/B,EAAM2B,EAASX,UAAWW,EAASR,SAC5Ca,EAAShC,EAAM6B,EAASb,UAAWa,EAASV,SAQlD,GACES,IAAME,GACNC,EAAOE,SAASD,IAChBL,EAASzJ,OAAS2J,EAAS3J,MAC3ByJ,EAAST,KAAKgB,MAXY,SAACC,GAC3B,OAAON,EAASX,KAAK7H,SAAS8I,QAW7BR,EAASpJ,YAAY2J,MATW,SAAC5J,GAClC,OAAOuJ,EAAStJ,YAAYc,SAASf,OASnCqJ,EAASJ,OAASM,EAASN,OAC7BI,EAASF,cAAgBI,EAASJ,YAClC,CAAC,IAAD,cACwBE,EAASL,QADjC,GACOc,EADP,KACYC,EADZ,KACiBC,EADjB,mBAEwBT,EAASP,QAFjC,GAEOiB,EAFP,KAEYC,EAFZ,KAEiBC,EAFjB,KAGA1I,EAASkC,QAAQmG,GAAK5B,SAAS6B,GAAK3B,SAAS4B,GAAKzB,YAAa,EAC/D9G,EAASkC,QAAQsG,GAAK/B,SAASgC,GAAK9B,SAAS+B,GAAK5B,YAAa,SAI9D9G,GCzDI2I,EAAc,SAACC,EAAaC,GACvC,IAAMC,EAAUC,SAASH,EAAII,MAAM,KAAK,IAClCC,EAAUF,SAASF,EAAIG,MAAM,KAAK,IACxC,OAAO/C,gBAAM6C,EAASG,IAmBXC,EAAY,SACvBlJ,EACAmJ,GAEA,IAAMC,EAAwB,GACxBjC,EAAckC,oBAAU9G,OACxB+G,EAAwBlD,EAAcpG,GAqD5C,OApDAsG,kBAAQgD,EAAsBpH,SAAS,SAACqE,GACtC,IAAMgD,EAAOhD,EAAOnD,WAAamD,EAAOnD,WAAa,gBACrDkD,kBAAQC,EAAOE,UAAU,SAACvI,GACxB,IAAMwJ,EAAW,UAAMnB,EAAOjD,SAAS,GAAtB,YAA4BiD,EAAOhD,OAAnC,YAA6CrF,EAAQsG,QACtE8B,kBAAQpI,EAAQM,aAAa,SAACgL,GAC5BlD,kBAAQpI,EAAQyI,UAAU,SAACC,GACzB,IAAMY,EAAOC,EAAkBb,EAAQtG,UACjCmJ,EAAYC,EAAqBhC,EAAaF,EAAMgC,GACtDG,EAAQ,GAEVA,EADa,YAAXR,EACMK,EACY,SAAXL,EACD3B,EAEA+B,EAEV,IAAMxC,EAAkBC,IAAOJ,EAAQK,UAAW,UAC5C2C,EAAgB5C,IAAOD,GAAiBM,IAAIT,EAAQU,SAAU,WAEhEP,EAAgB8C,OAAO,gBAAkBD,EAAcC,OAAO,eAChEvD,kBAAQM,EAAQO,MAAM,SAACiB,GACrB,IAxCkB0B,EAwCZC,EAAY/C,IAAOgD,KACtB3C,IAAIF,EAAK1G,QAAQ2H,GAAO,EAAG,QAC3ByB,OAAO,cACJI,EAAuB,CAC3BC,WAAY,CAACT,GACbU,YAAa5D,EAAOvC,KACpBoG,IAAI,GAAD,OAAKL,EAAL,YAAkBH,EAAcC,OAAO,UAC1CQ,cAAe,CACb9D,SACAK,UACA1I,WAEFoM,MAAM,GAAD,OAAKP,EAAL,YAAkBhD,EAAgB8C,OAAO,UAC9C1L,KAAMD,EAAQC,KACdoM,MAAO7C,GAEL0B,EAAOO,IAxDOG,EA2DYG,EAAUb,EAAOO,GA1D1CxB,MAAK,SAACqC,GACrB,OACEA,EAAED,QAAUT,EAAMS,OAClBC,EAAEF,QAAUR,EAAMQ,OAClBE,EAAEJ,MAAQN,EAAMM,KAChBI,EAAErM,OAAS2L,EAAM3L,SAsDLiL,EAAOO,GAAOzC,KAAK+C,IAGrBb,EAAOO,GAAS,CAACM,kBAQxBb,GAGIM,EAAuB,SAAChC,EAAqBF,EAAcgC,GAEtE,MADgB,UAAM9B,EAAN,YAAqB8B,EAArB,YAA6BhC,GAC3BiD,QAAQ,KAAM,MAGrBC,EAAoB,SAAC1K,GAChCoG,EAAcpG,GACd,IAAMyG,EAAsBkE,kBAAQvL,cAAIY,EAASkC,QAAS,aACpDyE,EAAsBgE,kBAAQvL,cAAIqH,EAAU,aAC9CvC,EAAY,GACV0G,EAAaxL,cAAIuH,GAAU,SAACC,GAChC,OAAOI,IAAOJ,EAAQK,UAAW,aAE/B2D,EAAWpL,SACb0E,EAAY0G,EAAW,GAAGf,OAAO,eAEnC,IAAIgB,EAAWzL,cAAIuH,GAAU,SAACC,GAC5B,OAAOI,IAAOJ,EAAQK,UAAW,UAAUI,IAAIT,EAAQU,SAAU,cAGnEuD,EAAWA,EAASC,QAAO,SAAC1D,GAC1B,OAAOA,EAAQyC,OAAO,gBAAkB3F,KAE1C,IAAM6G,GAAWC,gBAAMJ,IAAe5D,IAAO,QAAS,UAAUiE,QAAQ,QAAQpB,OAAO,SACnFqB,GAAWC,gBAAMN,IAAa7D,IAAO,QAAS,UAC/CK,IAAI,EAAG,SACP4D,QAAQ,QACRpB,OAAO,SAEV,MAAO,CACLqB,QAFFA,EAAsB,UAAZA,EAAsB,QAAUA,EAGxCH,YAISK,EAAqB,SAACC,EAA8BlN,GAC/D,IAAMmN,EAAmC,GAMzC,OALAC,iBAAOF,GAAe,SAACG,EAAG1O,GACxBwO,EAAkBxO,GAAOgO,iBAAOO,EAAcvO,IAAM,SAAC0N,GAAO,IAAD,EACzD,OAAO,UAAAA,EAAEH,qBAAF,eAAiBnM,QAAQC,QAASA,QAGtCmN,GAGIG,EAA4B,SAACC,EAA+BC,GACvE,OAAOb,iBAAOa,GAAS,SAACC,GACtB,IAAMC,EAAcH,EAAeE,GACnC,OAAkB,OAAXC,QAAW,IAAXA,OAAA,EAAAA,EAAarM,QAAS,MAIpBsM,EAAuB,SAACT,GACnCE,iBAAOF,GAAe,SAACG,EAAG1O,GACxBwJ,kBAAQ+E,EAAcvO,IAAM,SAACgN,GAAW,IAAD,KACrC,UAAIA,EAAMO,qBAAV,iBAAI,EAAqBzD,eAAzB,aAAI,EAA8BE,cAChCgD,EAAMiC,YAAc,cAMfC,EAAuB,SAACX,EAA8B3F,GAIjE,OAAQA,GACN,KAAKH,UAAQ0G,KACXV,iBAAOF,GAAe,SAACG,EAAG1O,GACxBwJ,kBAAQ+E,EAAcvO,IAAM,SAACgN,GAAW,IAAD,YAC/BoC,EAAQ,UAAGpC,EAAMO,qBAAT,iBAAG,EAAqBzD,eAAxB,iBAAG,EAA8BtG,gBAAjC,aAAG,EAAwC4L,SACnDC,EAAO,UAAGrC,EAAMO,qBAAT,iBAAG,EAAqBzD,eAAxB,iBAAG,EAA8BtG,gBAAjC,aAAG,EAAwC8L,WAClDC,EAAO,UAAMH,EAAN,YAAkBC,GAC/BrC,EAAMwC,MAAQC,IAAY,CAAEC,WAAY,QAASC,KAAMC,IAAKL,KAC5DvC,EAAM6C,UAAY,cAGtB,MACF,KAAKpH,UAAQqH,WACXrB,iBAAOF,GAAe,SAACG,EAAG1O,GACxBwJ,kBAAQ+E,EAAcvO,IAAM,SAACgN,GAAW,IAAD,IACjC+C,EAAgB,GACpBvG,kBAAO,UAACwD,EAAMO,qBAAP,iBAAC,EAAqBnM,eAAtB,aAAC,EAA8BM,aAAa,SAACD,GAClDsO,GAAa,UAAOtO,EAAP,SAEfuL,EAAMwC,MAAQC,IAAY,CACxBC,WAAY,QACZC,KAAMC,IAAKG,KAEb/C,EAAM6C,UAAY,cAGtB,MACF,KAAKpH,UAAQuH,OACXvB,iBAAOF,GAAe,SAACG,EAAG1O,GACxBwJ,kBAAQ+E,EAAcvO,IAAM,SAACgN,GAAW,IAAD,IACjCiD,EAAY,GAChBzG,kBAAO,UAACwD,EAAMO,qBAAP,iBAAC,EAAqB9D,cAAtB,aAAC,EAA6BjD,UAAU,SAAC0J,GAC9CD,GAAS,UAAOC,EAAP,SAEXlD,EAAMwC,MAAQC,IAAY,CAAEC,WAAY,QAASC,KAAMC,IAAKK,KAC5DjD,EAAM6C,UAAY,cAGtB,MACF,QACEpB,iBAAOF,GAAe,SAACG,EAAG1O,GACxBwJ,kBAAQ+E,EAAcvO,IAAM,SAACgN,GAAW,IAAD,IAC/BmD,EAAWC,OAAM,UAACpD,EAAMO,qBAAP,iBAAC,EAAqB9D,cAAtB,aAAC,EAA6BhD,QAAQ,GAC7D,OAAQ0J,GACN,IAAK,IAEHnD,EAAMwC,MAAQ,UACd,MACF,IAAK,IAEHxC,EAAMwC,MAAQ,UACd,MACF,IAAK,IAEHxC,EAAMwC,MAAQ,UACd,MACF,QACExC,EAAMwC,MAAQC,IAAY,CACxBC,WAAY,QACZC,KAAMC,IAAI,OAACO,QAAD,IAACA,IAAY,cAG7BnD,EAAM6C,UAAY,cAI1B,OAAOtB,GAGI8B,EAAc,SAACnN,GAC1B,IAAMsD,EAAqB,GAQ3B,OAPAgD,kBAAQtG,EAASkC,SAAS,SAACqE,GACzBD,kBAAQC,EAAOjD,UAAU,SAAC0J,GACnB1J,EAAShE,SAAS0N,IACrB1J,EAAS4D,KAAK8F,SAIb1J,EAAS8J,QAGLC,EAAa,SAACrN,GACzB,IAAMsN,EAAoB,GAM1B,OALAhH,kBAAQtG,EAASkC,SAAS,SAACqE,GACpB+G,EAAQhO,SAASiH,EAAOhD,SAC3B+J,EAAQpG,KAAKX,EAAOhD,WAGjB+J,EAAQF,QAGJG,EAAiB,SAACvN,GAC7B,IAAMwN,EAAkB,GAMxB,OALAlH,kBAAQtG,EAASkC,SAAS,SAACqE,GACpBiH,EAAMlO,SAASiH,EAAOvC,OACzBwJ,EAAMtG,KAAKX,EAAOvC,SAGfwJ,EAAMJ,QAGFK,EAAoB,SAACzN,GAChC,IAAM0N,EAAoB,GAQ1B,OAPApH,kBAAQtG,EAASkC,SAAS,SAACqE,GACzBD,kBAAQC,EAAOE,UAAU,SAACvI,GACnBwP,EAAQpO,SAASpB,EAAQsG,SAC5BkJ,EAAQxG,KAAKhJ,EAAQsG,cAIpBkJ,EAAQN,QAGJO,EAA0B,SAAC3N,GACtC,IAAM4N,EAAiC,GAYvC,OAXAtH,kBAAQtG,EAASkC,SAAS,SAACqE,GACzBD,kBAAQC,EAAOE,UAAU,SAACvI,IAEtBA,EAAQG,qBACPuP,EAAqBtO,SAASpB,EAAQG,sBACtCH,EAAQa,eAET6O,EAAqB1G,KAAKhJ,EAAQG,2BAIjCuP,EAAqBR,QAGjBS,EAAW,SAAC7N,GACvB,IAAM2F,EAAwB,GAO9B,OANAW,kBAAQtG,EAASkC,SAAS,SAACqE,GACzB,IAAMuH,EAAUvH,EAAOnD,WAAamD,EAAOnD,WAAa,gBACnDuC,EAAYrG,SAASwO,IACxBnI,EAAYuB,KAAK4G,MAGdnI,EAAYyH,QAGR3F,EAAoB,SAACnH,GAChC,MAAM,GAAN,OAAUA,EAAS4L,SAAnB,YAA+B5L,EAAS8L,aAM7B2B,EAAuB,SAACC,GACnC,IAAIvE,EAAY,gCAIhB,MAHqB,eAAjBuE,IACFvE,GAAa,8BAERA,GC3PIwE,EAA4B,SAACC,GACxC,OAAIA,IAAOpL,iBAAeqL,MAASD,EAG/BA,IAAOpL,iBAAe2B,WAAayJ,IAAOpL,iBAAe4B,WACpDzB,uBAAqBmL,aAGvBnL,uBAAqBoL,kBANnBpL,uBAAqBqL,cA4BnB3G,EAAiB,SAACpB,EAAgBrI,GAC7C,MAAM,GAAN,OAAUqI,EAAOjD,SAAS,GAA1B,YAAgCiD,EAAOhD,OAAvC,YAAiDrF,EAAQsG,SAG9C+J,EAAY,SACvBvO,EACAsD,EACAkL,GAEA,IAAMtM,EAAU4I,iBAAO9K,EAASkC,SAAS,SAACqE,GACxC,OAAOkI,kBAAQlI,EAAOjD,SAAUA,IAAaiD,EAAOhD,SAAWiL,KAEjE,OAAOtM,EAAQ1C,OAAS,EAAI0C,EAAQ,QAAK9E,GAG9BsR,EAAa,SACxB1O,EACAsD,EACAkL,EACAhK,EACArG,EACAK,EACAH,GAEA,IAAMkI,EAASgI,EAAUvO,EAAUsD,EAAUkL,GACvC/H,EAAWqE,iBAAM,OAACvE,QAAD,IAACA,OAAD,EAACA,EAAQE,UAAU,SAACvI,GACzC,OACEA,EAAQsG,SAAWA,GACnBtG,EAAQC,OAASA,GACjBsQ,kBAAQvQ,EAAQM,YAAaA,IAC7BN,EAAQG,sBAAwBA,KAGpC,OAAOoI,EAASjH,OAAS,EAAIiH,EAAS,QAAKrJ,GAyBhCuR,EAA0B,SAAC5Q,GACtC,IAAMW,EAAsBkQ,EAA0B7Q,GAGtD,MAAO,CAAEc,UAFiBgQ,EAAyB9Q,GAE/BW,eAGToQ,EAA0B,SAAC/Q,GAA+C,IAAD,gCAC9EgR,GACHhR,GACCA,EAAK6I,SACL7I,EAAK6I,QAAQtG,SAAS4L,UACtBzE,EAAkB1J,EAAK6I,QAAQtG,WACjC,IACA0O,OACEC,EAAW,OAAGlR,QAAH,IAAGA,OAAH,EAAGA,EAAMG,QAAQC,KAChC,GAAIoB,MAAM2P,QAAQD,GAAc,CAAC,IAAD,EACdA,EAAfA,EAD6B,oBAIhC,IAAM9H,EAAOgI,EAA0B,OAACpR,QAAD,IAACA,GAAD,UAACA,EAAM6I,eAAP,aAAC,EAAeO,MAEvD,MAAO,CACLzD,gBAAe,OAAE3F,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQwF,gBAC/BC,SAA6C,MAA/B,OAAJ5F,QAAI,IAAJA,GAAA,UAAAA,EAAMG,QAAQyF,gBAAd,eAAwBqL,SAAxB,OAAoDjR,QAApD,IAAoDA,OAAZX,EAAYW,EAAMG,QAAQyF,SAC5EC,UAAS,OAAE7F,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQ0F,UACzBuD,OACA/D,WAAU,OAAErF,QAAF,IAAEA,OAAF,EAAEA,EAAMwI,OAAOnD,WACzBkE,SAAQ,OAAEvJ,QAAF,IAAEA,GAAF,UAAEA,EAAM6I,eAAR,aAAE,EAAeU,SACzBhJ,kBACiClB,KAA3B,OAAJW,QAAI,IAAJA,OAAA,EAAAA,EAAMG,QAAQI,eAA8BP,EAAKG,QAAQI,cAAgB,EACrEP,EAAKG,QAAQI,kBACblB,EACN0G,UAAS,OAAE/F,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQ4F,UACzBsL,cAAoB,OAAJrR,QAAI,IAAJA,OAAA,EAAAA,EAAMG,QAAQ+F,iBAC9BgK,EAAyB,OAAClQ,QAAD,IAACA,OAAD,EAACA,EAAMG,QAAQ+F,kBAAoBhB,uBAAqBmL,aADjE,OAEZrQ,QAFY,IAEZA,OAFY,EAEZA,EAAMG,QAAQ+F,eACdnB,iBAAe2B,UACnBpG,oBAAmB,iBAAEN,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQG,2BAAhB,QAAuC,MAC1DE,WAAU,iBAAER,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQM,mBAAhB,QAA+B,GACzC6Q,mBAAyB,OAAJtR,QAAI,IAAJA,OAAA,EAAAA,EAAMG,QAAQ+F,iBACnCgK,EAAyB,OAAClQ,QAAD,IAACA,OAAD,EAACA,EAAMG,QAAQ+F,kBACtChB,uBAAqBoL,kBAFF,OAGjBtQ,QAHiB,IAGjBA,OAHiB,EAGjBA,EAAMG,QAAQ+F,eACdnB,iBAAe6B,WACnBZ,SAAQ,OAAEhG,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQ6F,SACxBzD,SAAUyO,EACV/K,KAAI,2BAAEjG,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQ8F,YAAhB,eAAwBjG,QAAxB,IAAwBA,OAAxB,EAAwBA,EAAMwI,OAAOvC,YAArC,QAA6C,GACjDT,OAAM,iBAAExF,QAAF,IAAEA,OAAF,EAAEA,EAAMwI,OAAOhD,cAAf,QAAyB,GAC/ByJ,OAAM,iBAAEjP,QAAF,IAAEA,OAAF,EAAEA,EAAMwI,OAAOjD,gBAAf,QAA2B,GACjCgM,aAAY,OAAEvR,QAAF,IAAEA,GAAF,UAAEA,EAAM6I,eAAR,aAAE,EAAetG,SAASgP,aACtCpR,QAAO,iBAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQsG,cAAhB,QAA0B,GACjCP,eAAgBgK,EAAyB,OAAClQ,QAAD,IAACA,OAAD,EAACA,EAAMG,QAAQ+F,gBACxDgD,WAAe,OAAJlJ,QAAI,IAAJA,GAAA,UAAAA,EAAM6I,eAAN,eAAeK,WACtBD,IAAM,OAACjJ,QAAD,IAACA,GAAD,UAACA,EAAM6I,eAAP,aAAC,EAAeK,UAAW,UAAU4C,OAAO,SAClD,QACJ5I,OAAM,iBAAElD,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQ+C,cAAhB,QAA0B,SAChCkD,kBACiC/G,KAA3B,OAAJW,QAAI,IAAJA,OAAA,EAAAA,EAAMG,QAAQiG,eAA8BpG,EAAKG,QAAQiG,cAAgB,EACrEpG,EAAKG,QAAQiG,kBACb/G,EACNe,KAAM8Q,GAAe9P,OAAK2G,KAC1BzB,KAAI,OAAEtG,QAAF,IAAEA,OAAF,EAAEA,EAAMG,QAAQmG,KACpBC,KAAI,iBAAEvG,QAAF,IAAEA,GAAF,UAAEA,EAAMG,QAAQoG,YAAhB,aAAE,EAAoBiL,kBAAtB,QAAoC,KAItCX,EAA4B,SAAC7Q,GACjC,IAAMuC,EAAWkP,YAAazR,EAAKuC,UAC7BmP,EAlJwB,SAACvB,GAC/B,OAAQA,GACN,KAAKnL,OAAK2M,MACR,OAAO5M,iBAAe2B,UACxB,KAAK1B,OAAK4M,OACR,OAAO7M,iBAAe4B,WACxB,KAAK1B,YAAU4M,EACb,OAAO9M,iBAAe6B,WACxB,KAAK3B,YAAU6M,EACb,OAAO/M,iBAAe8B,WACxB,KAAK5B,YAAU8M,EACb,OAAOhN,iBAAe+B,WACxB,KAAK7B,YAAU+M,EACb,OAAOjN,iBAAegC,WACxB,QACE,OAAOhC,iBAAeqL,MAmIL6B,CACnBjS,EAAKsR,mBAAqBtR,EAAKqR,cAAgBrR,EAAKkG,gBAGhDiI,EAAW5L,EAAWA,EAAS,GAAK,GACpC8L,EAAa9L,EAAWA,EAAS,GAAK,GAE5C,MAAO,CACLoD,gBAAiB3F,EAAK2F,gBACtBC,SAAU5F,EAAK4F,SACfC,UAAW7F,EAAK6F,UAChBC,QAAS,GACTvF,aAAc2R,OAAOlS,EAAKO,cAC1BwF,UAAW/F,EAAK+F,UAChBzF,oBAAqBN,EAAKM,oBAC1BG,YAAaT,EAAKQ,WAClBiG,OAAQzG,EAAKG,QACb6F,SAAUhG,EAAKgG,SACf4C,SAAU,CACR,CACEQ,KAAMpJ,EAAKoJ,KACXG,SAAU2I,OAAOlS,EAAKuJ,UACtBhH,SAAU,CACR4L,WACAoD,aAAcvR,EAAKuR,aACnBlD,cAEFnF,UAAWiJ,YAAcnS,EAAKkJ,aAGlChD,eAAgBwL,EAChBvL,UAAW,GACXjD,OAAQlD,EAAKkD,OACbkD,aAAc8L,OAAOlS,EAAKoG,cAC1BhG,KAAMJ,EAAKI,KACXiG,UAAW,GACXC,KAAMtG,EAAKsG,KACXC,KAAM6L,YAASpS,EAAKuG,QAIlBuK,EAA2B,SAAC9Q,GAChC,MAAO,CACLqF,WAAYrF,EAAKqF,WACjBY,KAAMjG,EAAKiG,KACXT,OAAQxF,EAAKwF,OACbD,SAAUvF,EAAKiP,OAEfvG,SAAU,KA6CD0I,EAA6B,SAAChI,GACzC,IAAMiJ,EAAWnR,OAAOC,OAAOqD,OAAKuI,QAAO,SAAC1C,GAC1C,OAAOnJ,OAAOC,OAAOsD,WAASlD,SAAS8I,MAGzC,OAAKjB,EAIE/H,cAAIgR,GAAU,SAACC,GACpB,QAAOlJ,EAAK7H,SAAS+Q,IAAMA,KAJpB,IAAI9Q,MAAM6Q,EAAS5Q,QAAQC,MAAK,IAQ9B6Q,EAAmB,SAC9BC,EACA7R,EACAG,EACA2R,EACAxQ,GACI,IAAD,EACGyQ,EAAU,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAS3J,QACxBnD,EAAU,OAAG8M,QAAH,IAAGA,OAAH,EAAGA,EAASrS,QACtBiF,EAAS,OAAGoN,QAAH,IAAGA,OAAH,EAAGA,EAAShK,OACnBC,EAAc/F,kBAAQT,EAASkC,QAASiB,GACxCuD,EAAejG,kBAAO,UAAC0C,SAAD,aAAC,EAAWsD,SAAUhD,GAC9CA,GAGAyJ,OAAOxO,EAAW4F,QAAU4I,OAAOzJ,EAAWa,OAC9C5F,EAAWP,OAASsF,EAAWtF,MAC/BO,EAAWuF,iBAAmBR,EAAWQ,iBAGzCvF,EAAW0F,UAAYX,EAAWW,UAClC1F,EAAWwF,UAAYT,EAAWS,UAClCxF,EAAWmF,QAAUJ,EAAWI,SAIhC2M,GAAoBD,IAClBpN,IAEFA,EAAYE,sCAA4BF,EAAWtE,GACnDmB,EAASkC,QAAQsE,GAAerD,GAE9BM,IAEFA,EAAac,uCAA6Bd,EAAY/E,GACtDsB,EAASkC,QAAQsE,GAAaC,SAASC,GAAgBjD,GAErDgN,GAEFC,EACEH,EACAvQ,EACAyQ,EACAhN,EACAN,EACAzE,EAAWK,iBAMN2R,EAA4B,SACvC3S,EACAiC,EACAyQ,EACAhN,EACAN,GAEI,IADJwN,IACG,yDACGnK,EAAc/F,kBAAQT,EAASkC,QAASiB,GACxCuD,EAAejG,kBAAQT,EAASkC,QAAQsE,GAAaC,SAAUhD,GAC/DoD,EAAepG,kBACnBT,EAASkC,QAAQsE,GAAaC,SAASC,GAAcC,SACrD8J,GAEIG,KAA2BnN,IAAcA,EAAWkD,SAASnH,QACnEqR,EACE7Q,EACA6G,EACAH,EACAF,EACAmK,EACAC,IAIEC,EAAgB,SACpB7Q,EACA6G,EACAH,EACAF,EACAmK,EACAC,GAGI/J,GAAgB,GAClB7G,EAASkC,QAAQsE,GAAaC,SAASC,GAAcC,SAASmK,OAAOjK,EAAc,IAIlF8J,GAAcC,IACfpK,GAAe,GACfE,GAAgB,IACf1G,EAASkC,QAAQsE,GAAaC,SAASC,GAAcC,SAASnH,SAE/DQ,EAASkC,QAAQsE,GAAaC,SAASqK,OAAOpK,EAAc,GAEvD1G,EAASkC,QAAQsE,GAAaC,SAASjH,QAC1CQ,EAASkC,QAAQ4O,OAAOtK,EAAa,K,QCtZ9BuK,EAAiB,qBAqBxBC,EAAY,SAAC,GAA0E,IAAxEC,EAAuE,EAAvEA,OAAQC,EAA+D,EAA/DA,QAAShT,EAAsD,EAAtDA,QAASwJ,EAA6C,EAA7CA,YAAayJ,EAAgC,EAAhCA,SACpDC,EACS,UAAbD,EAAuB,cAAvB,UAA2CA,EAA3C,kBACIE,EAAa,UAAMF,EAAN,SACb7S,EAAeJ,EAAQI,aAAeJ,EAAQM,YAAYgB,OAE1D8R,EAAoB,UAAM5J,EAAN,aAAsBpJ,EAAtB,KACtB4S,GACFA,EAAQE,GAAyBF,EAAQE,GACpCF,EACCE,GADD,UAEMF,EAAQE,GAFd,aAEyCE,GACzCJ,EAAQE,GAAyBE,EAEtCJ,EAAQG,GAAiBH,EAAQG,GAC7BpB,OAAOiB,EAAQG,IAAkB/S,EACjCA,IAEJ2S,EAAOG,GAAyBE,EAChCL,EAAOI,GAAiB/S,IAIfiT,EAAc,SAACvR,GAC1B,IAAMwR,EAA6B,GACnClL,kBAAQtG,EAASkC,SAAS,SAACqE,GACzBD,kBAAQC,EAAOE,UAAU,SAACvI,GACxB,IAAMwJ,EAAcC,yBAAepB,EAAQrI,GAC3CoI,kBAAQpI,EAAQM,aAAa,SAACD,GAC5B,IAY2B,EAZrBkT,EAA4B,CAChCC,QAASnT,GAFgC,EAIbuM,iBAAO0G,GAAc,SAACzT,GAClD,OAAOA,EAAK2T,UAAYnT,KADnBoT,EAJoC,oBAOrCC,EAAa,CACjBX,OAAQQ,EACRP,QAASS,EACTzT,UACAwJ,eAEF,GAAIxJ,EAAQa,cACViS,EAAU,2BACLY,GADI,IAEPlK,YAAW,UAAExJ,EAAQG,2BAAV,QAAiC,GAC5C8S,SAAU,gBAGZ,OAAQjT,EAAQC,MACd,KAAKgB,OAAK2G,KACRkL,EAAU,2BAAKY,GAAN,IAAkBT,SAAU,UACrC,MACF,KAAKhS,OAAK0S,OACRb,EAAU,2BAAKY,GAAN,IAAkBT,SAAU,YACrC,MACF,KAAKhS,OAAK2S,OACV,KAAK3S,OAAK4S,QACRf,EAAU,2BAAKY,GAAN,IAAkBT,SAAU,YACrC,MACF,QAEEa,QAAQC,IAAR,iDAAsD/T,EAAQC,OAIhEwT,EACFH,EAAaA,EAAa/Q,QAAQkR,IAAwBA,EAE1DH,EAAatK,KAAKuK,YAK1B,IAAMS,EAAkBV,EACrBpS,KAAI,SAAC+S,GACJ,OAAO,2BACFA,GADL,IAEEC,YACGD,EAAIE,WAAa,IACjBF,EAAIG,aAAe,IACnBH,EAAII,aAAe,IACnBJ,EAAIK,YAAc,QAGxBpF,MAAK,SAAChM,EAAGqR,GACR,OAAOA,EAAEL,WAAahR,EAAEgR,cAU5B,OARAF,EAAgBhL,KAAK,CACnBwK,QAAS,QACTW,UAAWK,gBAAMR,EAAiB,aAClCM,WAAYE,gBAAMR,EAAiB,cACnCI,YAAaI,gBAAMR,EAAiB,eACpCK,YAAaG,gBAAMR,EAAiB,eACpCE,WAAYM,gBAAMR,EAAiB,gBAE9BA,GAGIS,EAAc,SACzB3S,EACA0H,EACAvJ,GAEA,IAAKuJ,EACH,OAAO,KAFuB,MAICA,EAAYsB,MAAM,KAJnB,mBAIzBgE,EAJyB,KAIjBzJ,EAJiB,KAITiB,EAJS,KAO1BtC,EAAU4I,iBAAO9K,EAASkC,SAAS,SAAC0Q,GACxC,OAAOA,EAAEtP,SAAShE,SAAS0N,IAAW4F,EAAErP,SAAWA,KAErD,IAAKrB,EAAQ1C,OACX,OAAO,KAXuB,IAczB+G,EAdyB,YAcfrE,EAde,MAiB1BuE,EAAWqE,iBAAOvE,EAAOE,UAAU,SAACoM,GACxC,OAAOA,EAAErO,SAAWA,GAAUqO,EAAE1U,OAASA,KAE3C,IAAKsI,EAASjH,OACZ,OAAO,KArBuB,IAwBzBtB,EAxByB,YAwBduI,EAxBc,MA0BhC,MAAO,CACLF,SACAK,QAAS1I,EAAQyI,SAAWzI,EAAQyI,SAAS,GAAKmM,eAClD5U,YAIS6U,EAAkC,SAC7C/S,EACAgT,EACAC,GAGA,IAAMC,EAAiBF,EAAUhK,MAAM+H,GAAgBoC,KAAK,IAAInK,MAAM,MAMtE,GAL6B,CAC3B,uBACA,yBACA,0BAEuB1J,SAAS2T,GAAa,CAC7C,IAAI9U,EAAagB,OAAK2G,KACtB,OAAQmN,GACN,IAAK,uBACH9U,EAAOgB,OAAK2G,KACZ,MACF,IAAK,yBACH3H,EAAOgB,OAAK0S,OACZ,MACF,IAAK,yBACH1T,EAAOgB,OAAK2S,OAKhB,IAAIsB,EAAuBT,EAAY3S,EAAUkT,EAAe,GAAI/U,GAKpE,OAJ6B,OAAzBiV,IACFjV,EAAOgB,OAAK4S,QACZqB,EAAuBT,EAAY3S,EAAUkT,EAAe,GAAI/T,OAAK4S,UAEhE,CACLsB,IAAKD,EACLE,SAAUJ,EACVpW,IAAKqB,GAGT,MAAO,CACLkV,IAAK,KACLC,SAAUJ,EACVpW,IAAKqC,OAAK2G,OAIDyN,EAAsB,SACjCvT,EACAwT,EACAjV,GAEA,IAAKiV,EACH,OAAO,KAGT,IAAMC,EAAwB3I,iBAAO9K,EAASkC,SAAS,SAAC0Q,GACtD,OAA6B,IAAtBA,EAAEtP,SAAS9D,QAA6B,KAAboT,EAAErP,UAEtC,IAAKkQ,EAAsBjU,OACzB,OAAO,KATuB,IAWzBkU,EAXyB,YAWLD,EAXK,MAa1BE,EAAuB7I,iBAAO4I,EAAiBjN,UAAU,SAACoM,GAC9D,OACsB,IAApBA,EAAE9T,eACF8T,EAAExU,sBAAwBmV,GAC1BX,EAAErU,YAAYc,SAASf,MAG3B,IAAKoV,EAAqBnU,OACxB,OAAO,KArBuB,IAuBzBoU,EAvByB,YAuBND,EAvBM,MAyBhC,MAAO,CACLpN,OAAQmN,EACR9M,QAASkM,eACT5U,QAAS0V,IAiBAC,GAA8B,SACzC7T,EACAgT,EACAzU,GAGA,IAAMuV,EAAyBd,EAAUhK,MAAM+H,GAAgBoC,KAAK,IAAInK,MAAM,MAG9E,MAAO,CACLqK,IAH2BE,EAAoBvT,EAAU8T,EAAuB,GAAIvV,GAIpF+U,SAAUQ,EACVhX,IAAKyB,I,6BCtRIwV,GAAW,SAAC/T,GACvB,IAAMgU,EAAgB,IAAIC,IAQ1B,OAPA3N,KAAQtG,EAASkC,SAAS,SAACqE,GACzBD,KAAQC,EAAOE,UAAU,SAACvI,GACxBoI,KAAQpI,EAAQM,aAAa,SAACgL,GAC5BwK,EAAc3M,IAAImC,YAIjB,aAAIwK,ICFAE,GAAa,SAAClU,GACzB,IAAMmU,EAAa,IAAIF,IACjBG,EAAY,IAAIH,IAoBtB,OAnBAjU,EAASkC,QAAQoE,SAAQ,SAACC,GAAY,IAElChD,EAGEgD,EAHFhD,OACW8Q,EAHsB,YAK/B9N,EAFFjD,SAHiC,MAK/BiD,EADFE,SAEOH,SAAQ,SAACpI,GAAa,IACrBsG,EAAuCtG,EAAvCsG,OAAQhG,EAA+BN,EAA/BM,YAAaO,EAAkBb,EAAlBa,cACvBiF,EAAI,UAAMqQ,EAAN,YAAqB9Q,EAArB,YAA+BiB,GAEnC8P,EAAM,CAAE9V,cAAawF,QAGtBoQ,EAAUG,IAAIvQ,IAAUjF,IAC3BqV,EAAU/M,IAAIrD,GACdmQ,EAAW9M,IAAIiN,UAId,aAAIH,IC5BAK,GAAW,SAACxU,GACvB,IAAMyU,EAAW,IAAIR,IAQrB,OAPA3N,KAAQtG,EAASkC,SAAS,SAACqE,GACzBD,KAAQC,EAAOE,UAAU,SAACvI,GACxBoI,KAAQpI,EAAQyI,UAAU,YAAmB,IAAhBrG,EAAe,EAAfA,SAC3BmU,EAASpN,IAAII,EAAkBnH,aAI9B,aAAImU,ICTAC,GAAW,SAAC1U,GACvB,IAAM2U,EAAW,IAAIV,IAWrB,OAVA3N,KAAQtG,EAASkC,SAAS,SAACqE,GACzBD,KAAQC,EAAOE,UAAU,SAACvI,GACxBoI,KAAQpI,EAAQyI,UAAU,YAAoB,IAAjBM,EAAgB,EAAhBA,UACrB2N,EAAS5N,IAAOC,EAAW,CAAC,WAAW4C,OAAO,SACpD8K,EAAStN,IAAIuN,YAMZ,CACL,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,U,SCtBEC,GAAoB,SAAIC,EAAUC,GACtC,MAA6B,kBAAlBA,GAAgD,KAAlBA,EAChC,KAEFD,GAMIE,GAAwB,SAACC,GACpC,OAAOA,EAASnK,QAAO,SAACgK,GACtB,OAAOA,MAQLI,GAAe,SAACJ,GACpB,OAAOK,QAAQ,UAAGL,GAAS,IAAKM,MAAM,kBAAmB,GAK9CC,GAAmBC,eAASC,MAAM,CAC7C7R,gBAAiBH,eACdiS,UAAU,+BACVC,UACA7M,IAAI,GACJ8M,UAAUb,IACVc,WACH/R,UAAWL,eACRiS,UAAU,gCACVC,UACA7M,IAAI,GACJ8M,UAAUb,IACVc,WACHxO,KAAMyO,eAAQF,UAAUV,IACxB5R,WAAYyS,eAASF,WACrBrO,SAAU/D,eACPiS,UAAU,6BACVC,UACA7M,IAAI,GACJ8M,UAAUb,IACVc,WACHrX,aAAciF,eACXuS,WACAN,UAAU,kCACV5M,IAAI,GACJmN,KAAK,aAAc,kBAAmBb,IACzCpR,UAAWP,eACRiS,UAAU,+BACVC,UACA7M,IAAI,GACJ8M,UAAUb,IACVc,WACHtX,oBAAqBwX,eAASF,WAC9BpX,WAAYqX,eAAQI,GAAGH,gBAAUC,WACjC/R,SAAUR,eACPiS,UAAU,+BACVC,UACA7M,IAAI,GACJ8M,UAAUb,IACVc,WACHrV,SAAUuV,eAASF,WACnB3R,KAAM6R,eAASF,WACfpS,OAAQsS,eAASC,WAAWN,UAAU,8BACtCxI,OAAQ4I,eAAQI,GAAGH,eAASI,aAAaH,WAAWN,UAAU,8BAC9DlG,aAAc/L,eACXiS,UAAU,kCACVU,WACAT,UACA7M,IAAI,GACJ8M,UAAUb,IACVc,WACHzX,QAAS2X,eAASC,WAAWG,YAAYT,UAAU,+BACnDvU,OAAQ4U,eAASF,WACjBxR,aAAcZ,eACXuS,WACAN,UAAU,kCACV5M,IAAI,GACJmN,KAAK,aAAc,kBAAmBb,IACzC7Q,KAAMd,eACHiS,UAAU,yBACVC,UACA7M,IAAI,GACJ8M,UAAUb,IACVc,WACHrR,KAAMf,eACHiS,UAAU,yBACVU,WACAT,UACA7M,IAAI,MACJ8M,UAAUb,IACVc,aAGQQ,GAA2Bb,eAASC,MAAM,CACrDnX,SAAUyX,eAASC,WACnBxX,aAAciF,eACXuS,WACAN,UAAU,kCACVU,WACAH,KAAK,aAAc,kBAAmBb,IACtCQ,UAAUb,IACVc,WACHpX,WAAYqX,eAAQI,GAAGH,gBAAUC,WACjC9X,MAAO4X,eAAQF,UAAUV,O,2HClGdoB,EAAU,WAAwD,IAAvDC,EAAsD,uDAAXrR,SACjE,OAAO,SAACsR,EAAiBC,GACvB,IAAIC,EACJ,OAAQD,EAAOjV,MACb,IAAK,kBAAoB,IACjBtB,EAAauW,EAAOlV,QAApBrB,SACNA,EAAWA,GAAY,CAAEkC,QAAS,IAClC,IAAMG,EAAQqI,YAAkB1K,GAChCwW,EAAQ,2BACHF,GADG,IAEN7Q,QAASyO,YAAWlU,GACpB2F,YAAakI,YAAS7N,GACtBmC,WAAY4R,YAAS/T,GACrBoC,MAAOoS,YAASxU,GAChBA,WACA+F,YAAa1D,EAAM6I,QACnBlF,YAAa3D,EAAM0I,QACnB1I,MAAOqS,YAAS1U,KAElB,MAEF,IAAK,kBAAoB,IACjB6F,EAAiB0Q,EAAOlV,QAAxBwE,aACNA,EAAeA,GAAgB1G,OAAK2G,KACpC0Q,EAAQ,2BAAQF,GAAR,IAAezQ,iBACvB,MAEF,IAAK,aAAe,IACZ5F,EAAYsW,EAAOlV,QAAnBpB,QACNA,EAAUA,GAAW,GACrBuW,EAAQ,2BAAQF,GAAR,IAAerW,YACvB,MAEF,IAAK,aAAe,IACZyF,EAAY6Q,EAAOlV,QAAnBqE,QACNA,EAAUA,GAAWH,UAAQkR,MAC7BD,EAAQ,2BAAQF,GAAR,IAAe5Q,YACvB,MAEF,IAAK,oBAAsB,IACnBE,EAAmB2Q,EAAOlV,QAA1BuE,eACNA,EAAiBA,GAAkBJ,iBAAekR,QAClDF,EAAQ,2BAAQF,GAAR,IAAe1Q,mBACvB,MAEF,QACE,OAAO0Q,EAGX,OADAD,EAAeG,GACRA,K,4zBC/BEG,EAA0B,WAAO,IAAD,EAKvC9W,qBAAWC,KAL4B,IAEzCC,SAAYC,EAF6B,EAE7BA,SAAU6F,EAFmB,EAEnBA,aAAcD,EAFK,EAELA,eACpC1F,EAHyC,EAGzCA,YACAC,EAJyC,EAIzCA,gBAIIyW,EAAoB,uCAAG,WAC3B7Y,EACAwS,GAF2B,iCAAAnP,EAAA,yDAG3BoP,EAH2B,gCAK3BrQ,GAAgB,GALW,EAMsBwO,YAAwB5Q,GAAjEW,EANmB,EAMnBA,WAAYG,EANO,EAMPA,UACpBgY,EAAc,CAAEhY,YAAWH,aAAY6R,UAASC,qBAG5C5K,IAAmBJ,iBAAekR,SAAW9Q,IAAmBJ,iBAAeyG,KAVxD,iCAWnB6K,EAAoBpY,EAAYmH,EAAc3F,GAX3B,OAYzBC,GAAgB,GAChB4W,EAAuBlY,EAAWH,GAbT,wBAchBkH,IAAmBJ,iBAAewR,OAC3C7W,GAAgB,GAEhB8W,EAA0BvY,EAAWF,YAAYE,EAAWF,YAAYgB,OAAS,KAEjFW,GAAgB,GAnBS,4CAAH,wDAmCpB0W,EAAgB,SAAC,GAKK,IAJ1BhY,EAIyB,EAJzBA,UACAH,EAGyB,EAHzBA,WACA6R,EAEyB,EAFzBA,QACAC,EACyB,EADzBA,iBAEA9R,EAAWwY,UAAYlQ,MAAS6C,SAChCyG,YAAiBC,EAAS7R,EAAYG,EAAW2R,EAAkBxQ,GACnEmX,8BAAoBnX,EAAUtB,EAAYG,GAC1CqB,EAAY,CAAEmB,QAAS,CAAErB,YAAYsB,KAAM,qBAG7C,MAAO,CAAE8V,6BAxB4B,SACnCrZ,EACAwS,GAEI,IADJC,EACG,wDACHrQ,GAAgB,GADb,MAE8C1B,YAAwBV,GAAjEc,EAFL,EAEKA,UAAWH,EAFhB,EAEgBA,WACnBmY,EAAc,CAAEhY,YAAWH,aAAY6R,UAASC,qBAChDrQ,GAAgB,GAChB8W,EAA0BvY,EAAWF,YAAYE,EAAWF,YAAYgB,OAAS,KAe5CoX,yBAGnCE,EAAmB,uCAAG,WAC1BpY,EACA2Y,EACAnX,GAH0B,eAAAkB,EAAA,0DAKpBkW,EAAU/X,MAAM2P,QAAQxQ,EAAWP,MAAQO,EAAWP,KAAK,GAAKO,EAAWP,QACjEkZ,EANU,gCAOlBnX,EAAY,CAChBmB,QAAS,CAAEwE,aAAcyR,GACzBhW,KAAM,oBATgB,2CAAH,0DAcnByV,EAAyB,SAAClY,EAAmBH,GAAyB,IAAD,EAErE6Y,EADA9N,EAAY,GAEV+N,EAAc,UAAM3Y,EAAUyE,SAAS,GAAzB,YAA+BzE,EAAU0E,OAAzC,YAAmD7E,EAAW8F,QAClF8B,kBAAQ5H,EAAWF,aAAa,SAACgL,GAC/BlD,kBAAQ5H,EAAWiI,UAAU,SAACC,GAC5B,IAAMY,EAAI,UAAMZ,EAAQtG,SAAS4L,SAAvB,YAAmCtF,EAAQtG,SAAS8L,YAC9D3C,EAAYC,YAAqB8N,EAAgBhQ,EAAMgC,GACvD,IACiB,EADXiO,EAAcC,SAASC,uBAAuBlO,GAChDgO,IACFF,EAAU,UAAGE,EAAY1a,KAAK0a,EAAYjY,OAAS,UAAzC,aAA+CpC,SAI3Dma,IAAU,UAAIA,EAAWK,qBAAf,aAAI,EAA0BA,gBAC1CL,EAAWM,gBAAe,IAIxBZ,EAA4B,SAAC1Y,GACjC,IAAMuZ,EAAKC,EAAiBxZ,GACtB4T,EAAMuF,SAASM,eAAeF,GACxB,OAAR3F,GACFA,EAAI0F,eAAe,CAAEI,SAAU,SAAUC,MAAO,YAKvCC,EAAW,SAAIC,EAAeC,GAAoC,IAAD,EACtErU,EAAOsU,oBAAUF,GAGvB,MAAO,CAAEG,aADS,UAAIF,EAAOrU,UAAX,aAAG,EAAkCwU,QAChCxU,SAGZ+T,EAAmB,SAACrG,GAC/B,OAAOA,EAAQjH,QAAQ,KAAM,MC1IlBgO,EAA+B,WAAO,IAAD,EAK5C5Y,qBAAWC,KAHDE,EAFkC,EAE9CD,SAAYC,SACZE,EAH8C,EAG9CA,YACAC,EAJ8C,EAI9CA,gBAcF,MAAO,CAAEuY,0BAVyB,SAAC3a,GACjC,IAAM6I,EAAO,OAAG7I,QAAH,IAAGA,OAAH,EAAGA,EAAM6I,QAChB1I,EAAO,OAAGH,QAAH,IAAGA,OAAH,EAAGA,EAAMG,QAChBqI,EAAM,OAAGxI,QAAH,IAAGA,OAAH,EAAGA,EAAMwI,OACrBpG,GAAgB,GAChBuQ,YAA0B3S,EAAMiC,EAAU4G,EAAS1I,EAASqI,GAC5DrG,EAAY,CAAEmB,QAAS,CAAErB,YAAYsB,KAAM,oBAC3CnB,GAAgB,M,SCdPwY,EAAgB,WAC3B,OAAO9Y,qBAAWC,M,iBCEP8Y,EAAe,WAAO,IAEnB5Y,EACVH,qBAAWC,KADbC,SAAYC,SAWd,OARsB,WAEpB6Y,IAASC,8BAAoB9Y,GAArB,mBAA4CgH,MAAS6C,SAArD,SACR,IAAMkP,EAAiBC,yCAA+BhZ,GAClD+Y,GACFF,IAASE,EAAD,uBAAiC/R,MAAS6C,SAA1C,WCXDoP,EAAmB,WAAO,IAEvBjZ,EACVH,qBAAWC,KADbC,SAAYC,SAWd,OAR0B,WAExB6Y,IAASK,kCAAwBlZ,GAAzB,wBAAqDgH,MAAS6C,SAA9D,SACR,IAAMkP,EAAiBC,yCAA+BhZ,GAClD+Y,GACFF,IAASE,EAAD,uBAAiC/R,MAAS6C,SAA1C,W,gBCbRsP,EAAwBC,IAAMrU,cAAqC,MACzEoU,EAAsBhU,YAAc,kBAO7B,IAAMkU,EAA2B,WAGtC,OAAOD,IAAMvZ,WAAWsZ,IAMbG,EAAyB,YAGY,IAFhDC,EAE+C,EAF/CA,SACGC,EAC4C,4BAC/C,OACE,kBAACL,EAAsBM,SAAvB,CAAgC3E,MAAK,eAAO0E,IACzCD,I,QCrBMG,EAA6B3X,YACxC4X,iBAA+B,SAAC3X,GAC9B,MAAO,CACL4X,YAAa,GACbC,eAAgB,SAACC,GACf9X,GAAI,SAACsU,GACHA,EAAMsD,YAAcE,MAGxBC,SAAU,SAACtQ,EAAmBuQ,GAC5BhY,GAAI,SAACsU,GACHA,EAAMsD,YAAYnQ,GAAauQ,W,iBCb5BC,EAAwBlY,aACnC,SAACC,EAAmCC,GAClC,MAAO,CACLd,OAAQ,GACRnB,SAAU,CAAEkC,QAAS,IACrBgY,UAAW,SAACC,GACVnY,EAAI,CAAEb,OAAQgZ,EAAKna,SAAUoa,EAAkBD,UAajDC,EAAoB,SAACjZ,GACzB,IAAMnB,EAAqB,CAAEkC,QAAS,IA2CtC,YA1Ce9E,IAAX+D,GACFlC,OAAOob,KAAKlZ,GAAQmF,SAAQ,SAACC,GAAW,MAELA,EAAOyC,MAAM,KAFR,mBAE/BgE,EAF+B,KAEvBzJ,EAFuB,KAEfiB,EAFe,KAGhC8V,EAAenZ,EAAOoF,GACpBgU,EAA0BD,EAA1BC,UAAWC,EAAeF,EAAfE,KAJmB,EAIJF,EAAT9S,KACWwB,MAAM,KALJ,mBAK/BkD,EAL+B,KAKrBE,EALqB,KAOtCpM,EAASkC,QAAQgF,KAAK,CACpB9D,WAAY,GACZY,KAAM,GACNT,SACAD,SAAU,CAAC0J,GACXvG,SAAU,CACR,CACE9C,SAAU,GACVE,QAAS,SACTvF,aAAc,EACdD,oBAAqB,GACrBG,YAAa,CAAC+b,GACd/V,SACAmC,SAAU,CACR,CACEQ,KAAM,CAAC5E,MAAIE,OAAQF,MAAII,UAAWJ,MAAIM,QACtCyE,SAAU,GACVhH,SAAU,CAAE4L,WAAUE,cACtBnF,UAAWuT,IAGfvW,eAAgBnB,iBAAeqL,KAC/BjK,UAAW,WACXjD,OAAQ,GACRkD,aAAc,EACdhG,KAAMgB,OAAK2G,KACX1B,UAAW,WACXE,KAAM,YAOTtE,G,QCxDIya,EAA4B1Y,aAAoC,SAACC,GAC5E,MAAO,CACL0Y,UAAW,GACXC,eAAgB,WACd3Y,EAAI,CAAE0Y,UAAW,MAEnBE,cAAe,SAACC,GACd7Y,GAAI,SAACsU,GACH,MAAO,CAAEoE,UAAU,GAAD,mBAAMpE,EAAMoE,WAAZ,CAAuBG,a,SCLpCC,EAAgB,SAACC,GAA+B,IAAD,EAKtDlb,qBAAWC,KAHDE,EAF4C,EAExDD,SAAYC,SACZE,EAHwD,EAGxDA,YACAC,EAJwD,EAIxDA,gBA4CF,OAtCsB,SAACqK,GACrBrK,GAAgB,GAEhB,IAII6a,EAJEC,EAAoBzQ,EAAE0Q,OAAOC,OAAS3Q,EAAE0Q,OAAOC,MAAM,GACrDC,GAAqB,OAAJH,QAAI,IAAJA,OAAA,EAAAA,EAAMjX,KAAKgF,MAAM,OAAQ,GAC1CqS,EAAWD,EAAeA,EAAe5b,OAAS,GAClD8b,EAAS,IAAIC,WAGnB,OAAQF,GACN,IAAK,OACHJ,GAAQK,EAAOE,kBAAkBP,GACjC,MAEF,IAAK,MACHA,GAAQK,EAAOG,mBAAmBR,GAClC,MAEF,QACE,MAAMS,MAAM,YAAD,OAAaL,EAAb,oBAIfC,EAAOK,UAAP,sBAAmB,4BAAAva,EAAA,6DAGfwa,EADe,SAAbP,EACe5Z,EAAmB6Z,EAAOna,QAE1B+L,OAAOoO,EAAOna,QAEjC6Z,EAAexZ,8BAAoBoa,IAElCb,GAAoB7a,EAAY,CAAEmB,QAAS,CAAEpB,QAAS,IAAMqB,KAAM,eATlD,SAUXI,EAAwB1B,EAAUgb,EAAc9a,EAAa6a,GAVlD,OAWjB5a,GAAgB,GAXC,6CA2BVuB,EAAuB,uCAAG,WACrCma,EACAta,EACArB,GAHqC,6BAAAkB,EAAA,yDAIrC2Z,EAJqC,gCAMhCtM,kBAAQoN,EAAiBta,GANO,uBASjCua,EADEf,EACgBgB,EAAiBF,EAAiBta,GAElCA,EAXe,SAa7BrB,EAAY,CAAEmB,QAAS,CAAErB,SAAU8b,GAAmBxa,KAAM,oBAb/B,2CAAH,0DAuBvBG,EAAqB,SAACua,GACjC,IAAMje,EAAO,IAAIke,WAAWD,GACtBE,EAAWC,eAAKpe,EAAM,CAAEuD,KAAM,UAC9B8a,EAAaF,EAASG,OAAOH,EAASI,WAAW,IACvD,OAAOC,QAAMC,aAAaJ,IAStBL,EAAmB,SAACF,EAA2Bta,GAMnD,OALAA,EAAYW,QAAQoE,SAAQ,SAACzH,GAC3BA,EAAU4H,SAASH,SAAQ,SAAC5H,GAC1Bmd,EAAkB1E,8BAAoB0E,EAAiBnd,EAAYG,SAGhEgd,G,iBC/GIY,EAAc,WACzB,IAAMC,EAAUC,cAEhB,OAAO,SAACC,GACNF,EAAQxV,KAAK0V,M,oBCVjBC,EAAOC,QAAU,IAA0B,gE,ubCA3C,64L,0WCAA,mJAEa9S,EAAe,aAEflL,EAAsB,CACjCkF,KAAM,GACNT,OAAQ,GACRD,SAAU,GACVmD,SAAU,IAGCqM,EAAwB,CACnC3L,KAAM,GACNG,SAAU,EACVR,YAAY,EACZxG,SAAU,CAAE4L,SAAU,GAAIE,WAAY,IACtCnF,UAAW,IAGArI,EAAwB,CACnCN,cAAe,EACfE,YAAa,GACbgG,OAAQ,GACRmC,SAAU,GACVxC,cAAe,EACfhG,KAAMgB,OAAK2G,O,oNCFAiX,G,OAA4B,SAAC,GAAmC,IAMzDC,EANwB9d,EAAgC,EAAhCA,OAClCkY,EAAiCT,oCAAjCS,6BAEMjV,EACVtC,qBAAWC,KADbC,SAAYoC,WASR8a,EAAUC,kBAA8B,CAC5CC,aAAc,MACdC,SAAUC,sBAAYlH,8BAGhBuC,EAA8BD,yCAA9BC,0BAQA4E,EAAqBL,EAArBK,MAAOC,EAAcN,EAAdM,UAaf,OAXAC,qBAAU,WACR,IAAMC,EAAc3f,0CAAgCoB,GAC9Cwe,EAAaH,IACnBE,EAAYzf,MAAQgX,gCAAsByI,EAAYzf,OAGjDyQ,kBAAQgP,EAAaC,IACxBJ,EAAMG,KAEP,CAACH,EAAOC,EAAWre,IAGpB,kBAAC,eAAiB+d,EAChB,0BAAMxT,UAAU,qBACd,kBAACkU,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAYnU,UAAU,gBAAgBoU,QAAQ,MAC3C3e,EAAS,+BAAiC,8BAG/C,kBAAC4e,EAAA,EAAD,CAAMC,WAAS,EAACC,QAhDR,GAiDN,kBAAC,GAAD,CAAmB5F,MAAM,cAE3B,kBAAC0F,EAAA,EAAD,CAAMC,WAAS,EAACC,QAnDR,GAoDN,kBAAC,GAAD,CACEC,aAAY,OAAE/e,QAAF,IAAEA,OAAF,EAAEA,EAAQhB,QAAQM,YAC9B4Z,MAAM,aACN8F,UAAQ,EACRC,QAAS,YAAIhc,GAAYiL,UAG7B,kBAAC0Q,EAAA,EAAD,CAAMC,WAAS,EAACC,QA3DR,GA4DN,kBAAC,GAAD,CAAmB5F,MAAM,mBAE3B,kBAAC0F,EAAA,EAAD,CAAMC,WAAS,EAACC,QA9DR,GA+DN,kBAAC,GAAD,CACEI,aAAcngB,sCAA2B,OAACiB,QAAD,IAACA,OAAD,EAACA,EAAQhB,QAAQC,MAC1Dia,MAAM,QACN+F,QAASlf,OAAOC,OAAOC,WAG3B,kBAAC2e,EAAA,EAAD,CAAMrU,UAAU,kBAAkB1M,MAAI,GACpC,kBAACshB,EAAA,EAAD,CACE/R,MAAM,UACNgS,QAASrB,EAAQsB,cAhETvB,OAgE0C5f,IAAX8B,EA/DxC,SAACnB,GACNqZ,EAA6BrZ,EAAMmB,EAAQ8d,MA+DrCa,QAAQ,aAEP3e,EAAS,kBAAoB,gBAE/BA,GACC,kBAACmf,EAAA,EAAD,CACE/R,MAAM,YACNgS,QAASrB,EAAQsB,cA1DpB,WACL7F,EAA0BxZ,MA0DlB2e,QAAQ,aAHV,oBAQK,OAAN3e,QAAM,IAANA,OAAA,EAAAA,EAAQhB,QAAQgZ,YACf,kBAAC0G,EAAA,EAAD,CAAYC,QAAQ,WAApB,gBACgB7W,IAAM,OAAC9H,QAAD,IAACA,OAAD,EAACA,EAAQhB,QAAQgZ,WAAWrN,OAAO,iCASrEkT,EAA0ByB,aAAe,CACvCtf,YAAQ9B,G,+CC1GGqhB,G,OAAgB,SAACjF,GAA0B,IAC9CkF,EAAqElF,EAArEkF,OAAQC,EAA6DnF,EAA7DmF,QAASC,EAAoDpF,EAApDoF,YAAaC,EAAuCrF,EAAvCqF,SAAUtF,EAA6BC,EAA7BD,SAAauF,EADR,YACwBtF,EADxB,0DAE/CuF,EAAaC,wBAAc,CAC/BL,UACAd,QAAS,YAGX,OACE,oCACGa,EACC,kBAACO,EAAA,EAAeC,sBAAYH,GAC1B,kBAACI,EAAA,EAAD,OAGF,kBAACd,EAAA,EAAD,eAAQ/R,MAAM,YAAYuR,QAAQ,aAAgBiB,EAAiBI,sBAAYH,IAC5EH,GAGL,kBAACQ,EAAA,EAAD,iBACMC,sBAAYN,GADlB,CAEEO,aAAc,CACZC,WAAY,OACZC,SAAU,UAEZC,WAAY,CAAEC,MAAO,CAAEb,aACvBc,gBAAiB,CACfJ,WAAY,QACZC,SAAU,SAGXjG,MAMTkF,EAAcD,aAAe,CAC3BI,YAAa,cACbF,QAAQ,EACRG,SAAU,QACVF,QAAS,c,WC3CEiB,EAAmB,SAACpG,GAA6B,IACpDkF,EAAWlF,EAAXkF,OAER,OACE,kBAAC,EAAD,CAAeA,OAAQA,GACrB,kBAAC,EAAD,QAKNkB,EAAiBpB,aAAe,CAC9BE,QAAQ,G,6CCsBJmB,G,OAAkC,SAAC9hB,GACvC,IAAM+hB,EAAoBnR,kCAAwB5Q,GAC9CgiB,EAAajN,eACbgN,EAAkBphB,WAAWiI,SAASnH,SACvCugB,EAD+C,YACjCD,EAAkBphB,WAAWiI,SADI,OAGlD,OAAOmI,kCAAwB,CAC7BvI,OAAQuZ,EAAkBjhB,UAC1B+H,QAASmZ,EACT7hB,QAAS4hB,EAAkBphB,eAKlBshB,EAAoB,SAAC,GAAmC,IAAD,EAAhC9gB,EAAgC,EAAhCA,OAAgC,EAI9DW,qBAAWC,KAJmD,IAEhEC,SAAYC,EAFoD,EAEpDA,SAAUoC,EAF0C,EAE1CA,MAAOD,EAFmC,EAEnCA,WAC7BhC,EAHgE,EAGhEA,gBAGI8c,EAAUC,kBAAsB,CACpCC,aAAc,MACd8C,cAAenR,kCAAwB5P,GACvCke,SAAUC,sBAAYhI,sBAEhBiI,EAAUL,EAAVK,MAX0D,EAYtB4C,mBAC1CjS,oCAAyB,OAAC/O,QAAD,IAACA,OAAD,EAACA,EAAQhB,QAAQ+F,iBAbsB,mBAY3DA,EAZ2D,KAY3Ckc,EAZ2C,KAe1DvJ,EAAyBD,oCAAzBC,qBACA8B,EAA8BD,yCAA9BC,0BAEF0H,EAAW,SAAC5P,GAChB,8CAAO,WAAOzS,GAAP,eAAAqD,EAAA,yDACCif,EAAkBR,EAAgC9hB,GAGrD0Q,kBAAQ6R,iBAAOD,EAAiBE,SAAQD,iBAAOxR,kCAAwB5P,GAASqhB,UAJ9E,gCAMG3J,EAAqB7Y,EAAMmB,EAAQsR,GANtC,6BASHrQ,GAAgB,GAChBA,GAAgB,GAVb,2CAAP,uDAyBFqd,qBAAU,WACR2C,EAAkBlS,oCAAyB,OAAC/O,QAAD,IAACA,OAAD,EAACA,EAAQhB,QAAQ+F,iBAC5D,IAAMwZ,EAAc3O,kCAAwB5P,GAC5Coe,EAAMG,KACL,CAACH,EAAOpe,IAEX,IAAMshB,EAAiBvc,IAAmBhB,uBAAqBmL,aACzDqS,EAAsBxc,IAAmBhB,uBAAqBoL,kBAC9DqS,EAAmBzc,IAAmBhB,uBAAqB0d,eAC3DpW,EAAQrL,EAAS,iBAAmB,cAEtC+P,EAAW,OAAG/P,QAAH,IAAGA,OAAH,EAAGA,EAAQhB,QAAQC,KAClC,GAAIoB,MAAM2P,QAAQD,GAAc,CAAC,IAAD,EACdA,EAAfA,EAD6B,oBA2ChC,OACE,kBAAC,eAAiBgO,EAChB,0BAAMxT,UAAU,qBACd,kBAACkU,EAAA,EAAD,CAAKiD,GAtHG,GAuHN,kBAAChD,EAAA,EAAD,CAAYnU,UAAU,gBAAgBoU,QAAQ,MAC3CtT,IAGL,kBAACuT,EAAA,EAAD,CAAMC,WAAS,EAACC,QA3HR,GA4HN,kBAAC,GAAD,CAAmB5F,MAAM,aAAayI,eAAgB,CAAEC,WAAW,MAErE,kBAAChD,EAAA,EAAD,CAAMC,WAAS,EAACC,QA9HR,GA+HN,kBAAC,GAAD,CAAsB5F,MAAM,SAAS8F,UAAQ,EAACC,QAAShR,sBAAYnN,KACnE,kBAAC,GAAD,CAAsBoY,MAAM,SAAS+F,QAAS9Q,qBAAWrN,KACzD,kBAAC,GAAD,CAAsBoY,MAAM,UAAU+F,QAAS1Q,4BAAkBzN,KACjE,kBAAC,GAAD,CAAsBoY,MAAM,OAAO+F,QAAS5Q,yBAAevN,KAC3D,kBAAC,GAAD,CACEoY,MAAM,uBACN+F,QAASxQ,kCAAwB3N,MAGrC,kBAAC8d,EAAA,EAAD,CAAMC,WAAS,EAACC,QAxIR,GAyIN,kBAAC,GAAD,CAAsB5F,MAAM,aAAa8F,UAAQ,EAACC,QAAS,YAAIhc,GAAYiL,SAC3E,kBAAC,GAAD,CAAsBgL,MAAM,WAAW+F,QAAS,YAAI/b,GAAOgL,SAC3D,kBAAC,GAAD,CAAmBgL,MAAM,kBACzB,kBAAC,GAAD,CAAmBA,MAAM,kBACzB,kBAAC,GAAD,CAAmBA,MAAM,mBAE3B,kBAAC0F,EAAA,EAAD,CAAMC,WAAS,EAACC,QA/IR,GAgJN,kBAAC,GAAD,CAAmB5F,MAAM,qBACzB,kBAAC,GAAD,CAAmBA,MAAM,SACzB,kBAAC,GAAD,CAAmBA,MAAM,gBACzB,kBAAC,GAAD,CAAmBA,MAAM,cACzB,kBAAC,GAAD,CAAmBA,MAAM,gBAE3B,kBAAC0F,EAAA,EAAD,CAAMC,WAAS,EAACC,QAtJR,GAuJN,kBAAC,GAAD,CACE5F,MAAM,aACNyI,eAAgB,CAAEE,WAAW,EAAMzf,KAAM,UAE3C,kBAAC,GAAD,CACE8W,MAAM,WACNyI,eAAgB,CACdG,WAAY,CACVC,aAAc,kBAACC,EAAA,EAAD,CAAgBC,SAAS,OAAzB,WAIpB,kBAAC,GAAD,CAAmB/I,MAAM,SACzB,kBAAC,GAAD,CAAmBA,MAAM,WAEzB,kBAAC0F,EAAA,EAAD,CAAM/gB,MAAI,EAACqkB,IAAE,KAEf,kBAACtD,EAAA,EAAD,CAAMC,WAAS,EAACC,QAxKR,GAyKN,kBAAC,GAAD,CACEI,aAAcjP,qCAA0B,OAACjQ,QAAD,IAACA,GAAD,UAACA,EAAQ0H,eAAT,aAAC,EAAiBO,MAC1DiR,MAAM,OACN+F,QAASlf,OAAOC,OAAOqD,OAAKuI,QAAO,SAAC1C,GAClC,OAAOnJ,OAAOC,OAAOsD,WAASlD,SAAS8I,QAG3C,kBAAC,GAAD,CAAoBgQ,MAAM,OAAO+F,QAASlf,OAAOC,OAAOC,UACxD,kBAAC,GAAD,CACEiZ,MAAM,kBACNiJ,SA3HqB,SAAC7W,GAC9B2V,EAAkB3V,EAAE0Q,OAAOpG,QA2HnBqJ,QAASlf,OAAOC,OAAO+D,0BAEzB,kBAAC6a,EAAA,EAAD,CAAM/gB,MAAI,EAACqkB,IAAE,GACVZ,GACC,kBAAC,GAAD,CACEpI,MAAM,gBACN+F,QAASlf,OAAOC,OAAO4D,kBAAgBgI,QAAO,SAACwW,GAC7C,OAAOriB,OAAOC,OAAO6D,QAAMzD,SAASgiB,QAIzCb,GACC,kBAAC,GAAD,CACErI,MAAM,qBACN+F,QAASlf,OAAOC,OAAO4D,kBAAgBgI,QAAO,SAACjD,GAC7C,OAAO5I,OAAOC,OAAO8D,aAAW1D,SAASuI,QAI9C6Y,GACC,kBAAC5C,EAAA,EAAD,CAAMC,WAAS,EAACwD,UAAU,SAASvD,QAxMjC,GA0MA,kBAAC,GAAD,CACE5F,MAAM,aACNyI,eAAgB,CACd5C,aAAc,aACduD,UAAU,EACVT,WAAW,KAIf,kBAACnD,EAAA,EAAD,CAAYC,QAAQ,WAApB,oDAMN,kBAAC,GAAD,CACEzF,MAAM,QACNyI,eAAgB,CAAEY,WAAW,EAAMzd,KAAM,WAAY0d,KAAM,GAC3D5M,MAAK,OAAE5V,QAAF,IAAEA,OAAF,EAAEA,EAAQhB,QAAQyF,YAG3B,kBAACma,EAAA,EAAD,CAAM6D,WAAW,WAAW5D,WAAS,EAAC6D,QAAQ,iBAC5C,kBAAC9D,EAAA,EAAD,CAAM/gB,MAAI,GACR,kBAAC6gB,EAAA,EAAD,CAAYC,QAAQ,WAApB,YACW,kCADX,QAC0B,0CAD1B,iBAC0D,wCAD1D,oBAEQ,yCAFR,mCAEyD,qCAFzD,gBAKF,kBAACC,EAAA,EAAD,CAAMrU,UAAU,kBAAkB1M,MAAI,GA1J9B,WACd,IAAM8kB,EAAW3iB,EAAS,kBAAoB,cAC9C,OACE,oCACGA,GACC,kBAACmf,EAAA,EAAD,CACE5U,UAAU,gBACV6C,MAAM,UACNgS,QAASrB,EAAQsB,aAAa6B,GAAS,IACvC9e,KAAK,SACLuc,QAAQ,aALV,kBAUF,kBAACQ,EAAA,EAAD,CACE5U,UAAU,aACV6C,MAAM,UACNgS,QAASrB,EAAQsB,aAAa6B,GAAS,IACvC9e,KAAK,SACLuc,QAAQ,aAEPgE,GAEF3iB,GACC,kBAACmf,EAAA,EAAD,CACE5U,UAAU,gBACV6C,MAAM,YACNgS,QAASrB,EAAQsB,cArDlB,WACL7F,EAA0BxZ,MAqDpB2e,QAAQ,aAJV,mBAkIGiE,IACM,OAAN5iB,QAAM,IAANA,OAAA,EAAAA,EAAQhB,QAAQgZ,YACf,kBAAC0G,EAAA,EAAD,CAAYC,QAAQ,WAApB,gBACgB7W,IAAM,OAAC9H,QAAD,IAACA,OAAD,EAACA,EAAQhB,QAAQgZ,WAAWrN,OAAO,iCAUvEmW,EAAkBxB,aAAe,CAC/Btf,YAAQ9B,G,8BC/QG2kB,G,OAAqB,SAAC,GAA+D,IAA7DxI,EAA4D,EAA5DA,SAAUyI,EAAkD,EAAlDA,KAAkD,EAC/D9B,oBAAS,GADsD,mBACxF+B,EADwF,KAC9EC,EAD8E,OAE7DhC,oBAAS,GAFoD,mBAExFiC,EAFwF,KAE7EC,EAF6E,KAIzFC,EAAcC,YAAU,CAC5BC,OAAQ,CAAEC,SAAU,IAAKC,KAAM,EAAGC,QAAS,KAC3CC,KAAM,CAAEC,OAAQ,EAAGC,QAAS,EAAGC,EAAG,IAClCF,OAAQT,EAAY,IAAM,EAC1BU,QAASV,EAAY,EAAI,EACzBW,EAAGX,EAAY,EAAI,KAGfY,EAAqBC,uBACzB,SAACC,GAEKjB,GAAQiB,GACVb,GAAa,GACbF,GAAY,IAGZE,EAAaa,KAGjB,CAACjB,IAGKY,EAAWP,EAAXO,OAER,OACE,kBAAC,IAAD,CAAuBM,OAAQjB,EAAUZ,SAAU0B,GACjD,yBAAKtZ,UAAU,sBACb,kBAAC,IAAS0Z,IAAV,CAAc1Z,UAAU,qBAAqBiW,MAAO2C,GAClD,kBAAC,IAASc,IAAV,CAAczD,MAAO,CAAEkD,SAAQQ,aAAc,KAAO7J,QAO9DwI,EAAmBvD,aAAe,CAChCwD,MAAM,G,sBCxCKqB,G,OAAgB,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,OAA2B,EAC9BhB,aAAU,WACnC,MAAO,CAAEC,OAAQ,CAAEC,SAAU,GAAIC,KAAM,EAAGC,QAAS,KAAOa,IAAK,CAAC,EAAG,EAAG,OAFf,mBAClDlB,EADkD,KACrCrgB,EADqC,KAKjDuhB,EAAQlB,EAARkB,IACAC,EAAyBF,EAAzBE,MAAOC,EAAkBH,EAAlBG,QAASzf,EAASsf,EAATtf,KAExB,OACE,yBAAKyF,UAAU,qBACb,kBAAC,GAAD,CAAYlJ,KAAMkjB,GAChB,kBAAC,IAASN,IAAV,CACE1Z,UAAU,oBACVia,aAAc,WACZ,OAAO1hB,EAAI,CAAEuhB,IAAK,CAAC,EAAG,EAAG,MAE3BI,YAAa,YAAiC,IAArBb,EAAoB,EAA7Bc,QAAqBC,EAAQ,EAAjBC,QAC1B,OAAO9hB,EAAI,CAAEuhB,IAAKQ,EAAKjB,EAAGe,MAE5BnE,MAAO,CAAEhK,UAAW6N,EAAIS,YAAYC,KAEpC,kBAAC,IAAD,CACEC,IAAG,mBAAclgB,GACjByF,UAAU,kBACV0a,IAAKX,EACL9D,MAAO,CAAE0E,aAAc,eCrCtBL,EAAO,SAACjB,EAAWe,GAI9B,MAAO,GAAGA,EAAIQ,OAAOC,YAAc,GAAK,IAAKxB,EAAIuB,OAAOE,WAAa,GAAK,GAAI,MAInEN,EAAQ,SAACnB,EAAWe,EAAWhR,GAC1C,MAAM,8BAAN,OAAqCiQ,EAArC,wBAAsDe,EAAtD,sBAAqEhR,EAArE,M,SCHI2R,EAAgBC,gBAAMC,kBAAQ,WAAYA,kBAAQ,WAuB3CC,EAA0D,SAAC,GAG9B,IAFxCpL,EAEuC,EAFvCA,SACAqL,EACuC,EADvCA,UACuC,EACXC,sBAAYtL,EAAUiL,GAA1CM,EAD+B,EAC/BA,QAASC,EADsB,EACtBA,OAEjB,OAAO,oCAAGH,EAAY,oCAAGE,GAAc,oCAAGC,KAI5CJ,EAAeG,QAAUE,mBAAS,WAClCL,EAAeI,OAASC,mBAAS,U,uCClCpBC,G,OAAW,SAACzL,GACvB,OACE,oCACE,kBAAC,IAAiBA,MAKxByL,EAASzG,aAAe,CACtB0G,YAAY,EACZC,gBAAiB,CAAEC,QAAS,SAC5BC,WAAW,EACXC,UAAU,EACVC,eAAe,EACf3C,OAAQ,OACR4C,YAAaxb,IACbyb,YAAa,eACbC,cAAc,EACdC,QAAS,CAACC,IAAmBC,KAC7BC,YAAY,EACZ/f,YAAa,WACbC,YAAa,UACb+f,UAAU,G,+BClBCC,G,OAAoB,SAAC,GAAuC,IAArCC,EAAoC,EAApCA,MAC1B1oB,EAAW8b,qCAAX9b,OAER,OACE,yBAAKkM,UAAU,uBACb,kBAACyc,EAAA,EAAD,CAAS3b,MAAM,UACb,kBAAC0U,EAAA,EAAD,CACEkH,aAAW,SACX7H,QAAS,WACP/gB,EAAO0oB,KAGT,kBAAC,IAAD,W,UCXGG,GAAkB,SAAC,GAAiD,IAA/CH,EAA8C,EAA9CA,MAAOI,EAAuC,EAAvCA,WAAuC,EAM1EhN,qCAJFiN,EAF4E,EAE5EA,QACetiB,EAH6D,EAG5EuiB,cACAtG,EAJ4E,EAI5EA,cACAY,EAL4E,EAK5EA,eAGI5C,EAAeuI,mBAAQ,WAC3B,OAAOvG,GAAiBA,EAAcgG,GAAShG,EAAcgG,GAAOI,GAAc,KACjF,CAACpG,EAAeoG,EAAYJ,IAE/B,OACE,kBAACtI,EAAA,EAAD,CAAK8I,EAAG,GACN,kBAAC,aAAD,CACEC,GAAI,kBAACC,GAAA,EAAD,iBAAe9F,EAAf,CAA+BzI,MAAOiO,EAAYxI,QAAQ,cAC9DyI,QAASA,EACTrI,aAAcA,EACdja,KAAI,UAAKA,EAAL,YAAaiiB,EAAb,aAAuBI,EAAvB,SCtBCO,GAAmB,WAAO,IAC7BC,EAAWxN,qCAAXwN,OAER,OACE,oCACGA,EAAOznB,KAAI,SAAC0nB,EAAOb,GAClB,OACE,kBAACnI,EAAA,EAAD,CAAMhhB,IAAKgqB,EAAMhP,GAAIiG,WAAS,GAC5B,kBAAC,EAAD,CAAmBkI,MAAOA,IACzBhnB,OAAOob,KAAKyM,GACVhc,QAAO,SAACic,GACP,MAAa,OAANA,KAER3nB,KAAI,SAACtC,GACJ,OAAO,kBAAC,GAAD,CAAiBA,IAAKA,EAAKupB,WAAYvpB,EAAKmpB,MAAOA,a,gFCjB7De,GAA8B,WAAO,IAAD,EACC3N,qCAAxC4N,EADuC,EACvCA,OAAQhJ,EAD+B,EAC/BA,aAAcsI,EADiB,EACjBA,cAE9B,OACE,oCACE,kBAAClI,EAAA,EAAD,CACE/R,MAAM,YACNgS,QAAS,WACP2I,EAAOhJ,GAAgB,KAEzByB,MAAO,CAAEwH,OAAQ,OACjB5lB,KAAK,SACLuc,QAAQ,YAPV,cASO0I,QATP,IASOA,OATP,EASOA,EAAe1lB,MAAM,GAAI,IAGhC,kBAACwd,EAAA,EAAD,CAAQ/R,MAAM,UAAUoT,MAAO,CAAEwH,OAAQ,OAAS5lB,KAAK,SAASuc,QAAQ,YAAxE,YCDOsJ,GAAiB,SAAC,GAMH,IAL1BC,EAKyB,EALzBA,WACAC,EAIyB,EAJzBA,WAIyB,IAHzBpH,qBAGyB,MAHT,GAGS,EAFzBG,EAEyB,EAFzBA,SACAS,EACyB,EADzBA,eAEM0F,EAAgBe,KAAUC,KAAQH,IAGlCxM,EAAgBH,aAA0B+M,IAC1CC,EAAcvK,kBAAQ,CAC1B+C,cAAc,gBACXsG,EADU,sBACUtG,GADV,CACyBoH,OAGhCf,EAA0BmB,EAA1BnB,QAAS/H,EAAiBkJ,EAAjBlJ,aACXmJ,EAAoBC,wBAAc,CACtCrB,UACAtiB,KAAMuiB,IAGFqB,EAAe5E,sBAEnBzE,GAAa,SAACsJ,GACZ,IAAMC,EAAmBD,EAAyCtB,GAAezb,QAC/E,SAACwJ,GACC,OAAOrV,OAAO8oB,QAAQzT,GAAK0T,OAAM,YAC/B,MAAiB,KAD6B,0BAKpD5H,GAAYA,EAAS0H,MAEvB,CAACvJ,EAAc6B,EAAUmG,IAO3B,OAJA/I,qBAAU,WACR5C,EAAcgN,KACb,CAACA,EAAchN,IAGhB,kBAAC,yBAAD,iBACM6M,EACAC,EAFN,CAGEzJ,aAAcoJ,EACdpH,cAAeA,EACfY,eAAgBA,EAChB0F,cAAeA,IAEf,kBAAC0B,GAAA,EAAD,CAAMvI,MAAO,CAAEwI,aAAc,OAASrK,QAAQ,YAC5C,kBAACsK,GAAA,EAAD,KACE,0BAAM/H,SAAUwH,GACd,4BAAKrB,EAAL,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,WAQZY,GAAe3I,aAAe,CAC5B4B,cAAUhjB,GAGZ,IAAMoqB,GAAW,SAAClR,GAChB,OAAOA,EAAMsE,e,mBC7EFwN,I,OAAuB,SAClC5O,GAEI,IACIyE,EAA8BzE,EAA9ByE,aAAc7F,EAAgBoB,EAAhBpB,MAAOpU,EAASwV,EAATxV,KAD1B,EAEyBqkB,2BAApB/B,EAFL,EAEKA,QAASjO,EAFd,EAEcA,OAFd,EAG0CF,mBAASC,EAAOC,GAA/CiQ,EAHX,EAGKtkB,KAAoBuU,EAHzB,EAGyBA,aAE5B,OACE,kBAACuF,EAAA,EAAD,CAAMC,WAAS,EAACwD,UAAU,SAASxkB,MAAI,EAACqkB,IAAE,GACxC,kBAACtD,EAAA,EAAD,CAAM/gB,MAAI,EAACqkB,IAAE,GACX,kBAAC,aAAD,CACEkF,QAASA,EACTrI,aAAcA,EACdja,KAAI,OAAEA,QAAF,IAAEA,IAAQskB,EACdjH,SAAU,YACR,OAD0C,qBAG5CkH,OAAQ,YAAuC,IAApClH,EAAmC,EAAnCA,SAAamH,EAAsB,4BACtCC,EAAW,IAAIxU,IACnB1U,MAAM2P,QAAQsZ,EAAgB1T,OAC1B0T,EAAgB1T,MAChB,CAAC0T,EAAgB1T,QAEjB4T,EAAS,gBAAQlP,GAUvB,OAPAkP,EAAUvK,QAAV,YACK,IAAIlK,IACLuF,EAAM2E,QAAQrT,QAAO,SAACgY,GACpB,OAAOA,IAAM2F,EAASlU,IAAIuO,QAK9B,kBAAC6F,GAAA,EAAD,eACEC,YAAU,EACVC,UAAQ,EACRxH,SAAU,SAAC7W,EAAGzM,GACZ,OAAOsjB,EAAStjB,IAElB+qB,aAAW,EACXC,YAAa,SAACC,GACZ,OACE,kBAACrC,GAAA,EAAD,eACEvO,MAAOA,GACH4Q,EAFN,CAGEC,QAAS1Q,EACT2Q,WAAY3Q,EACZsF,QAAQ,gBAIV6K,EACAF,WAUpBJ,GAAqB5J,aAAe,CAClCP,kBAAc7gB,EACd4G,UAAM5G,G,gEC3DK+rB,I,OAAwB,SAAC,GAKR,IAJ5B/Q,EAI2B,EAJ3BA,MACApU,EAG2B,EAH3BA,KACAma,EAE2B,EAF3BA,QACAC,EAC2B,EAD3BA,aAC2B,EACEiK,2BAArBe,EADmB,EACnBA,SAAU/Q,EADS,EACTA,OADS,EAEkBF,mBAASC,EAAOC,GAA/CiQ,EAFa,EAEnBtkB,KAAoBuU,EAFD,EAECA,aAFD,EAGI2H,mBAAS9B,GAHb,mBAGpBtJ,EAHoB,KAGbuU,EAHa,KAK3B7L,qBAAU,WACR6L,EAAcjL,KACb,CAACA,IAQJ,IAAMkL,EAAmB,SAAC9e,GACxB,IAAM+e,EAAM/e,EAAE0Q,OAAOpG,MACrB,GAAIA,EAAO,CACT,IAAM0U,EAAS,YAAO1U,IACtB,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAOxV,SAASiqB,KAClBC,EAAU1Y,OAAOqN,EAAQ1d,QAAQ8oB,GAAM,EAAG,SAC1CF,EAAcG,KAEdA,EAAU1Y,OAAOqN,EAAQ1d,QAAQ8oB,GAAM,EAAGA,GAC1CF,EAAcG,SAGhBH,EAAc,CAACE,KAInB,OACE,kBAACzL,EAAA,EAAD,CAAM/gB,MAAI,EAACqkB,IAAE,GACX,kBAACqI,GAAA,EAAD,CAAaC,UAAU,WAAWT,QAAS1Q,GACzC,kBAACoR,GAAA,EAAD,CAAWD,UAAU,UAAUtR,GAC/B,kBAACwR,GAAA,EAAD,KACE,kBAAC9L,EAAA,EAAD,CAAMC,WAAS,EAACwD,UAAU,UACvBpD,EAAQ/e,KAAI,SAACmqB,EAAK1hB,GAAO,IAAD,EACvB,OACE,kBAACiW,EAAA,EAAD,CAAMhhB,IAAKysB,EAAKxsB,MAAI,GAClB,kBAAC8sB,GAAA,EAAD,CACEvD,QACE,kBAACwD,GAAA,EAAD,CACEC,QAAO,iBAAEjV,QAAF,IAAEA,OAAF,EAAEA,EAAOxV,SAASiqB,UAAlB,SACPlI,SAAUiI,IAGdU,SAAUZ,EACVhR,MAAOmR,EACPvlB,KAAI,iBAAKA,QAAL,IAAKA,IAAQskB,EAAb,YAA6BzgB,EAA7B,KACJiN,MAAOyU,UAOnB,kBAACU,GAAA,EAAD,KAAiB1R,OAMzB4Q,GAAsB3K,aAAe,CACnCxa,UAAM5G,G,wBCnEK8sB,I,OAAqB,SAAC,GAMR,IALzBjM,EAKwB,EALxBA,aACA7F,EAIwB,EAJxBA,MACApU,EAGwB,EAHxBA,KACAqd,EAEwB,EAFxBA,SACAlD,EACwB,EADxBA,QAEQmI,EAAY+B,2BAAZ/B,QAER,OACE,kBAACxI,EAAA,EAAD,CAAM/gB,MAAI,EAACqkB,IAAE,GACX,kBAACqI,GAAA,EAAD,CAAaC,UAAU,YACrB,kBAACC,GAAA,EAAD,CAAWD,UAAU,UAAUtR,GAC/B,kBAAC,aAAD,CACEsO,GACE,kBAACyD,GAAA,EAAD,KACGhM,EAAQ/e,KAAI,SAACmqB,GACZ,OACE,kBAACM,GAAA,EAAD,CACE/sB,IAAKysB,EACLjD,QAAS,kBAAC8D,GAAA,EAAD,CAAO/I,SAAUA,IAC1BjJ,MAAOmR,EACPzU,MAAOyU,QAMjBjD,QAASA,EACTrI,aAAcA,EACdja,KAAI,OAAEA,QAAF,IAAEA,IAAQsU,oBAAUF,SAOlC8R,GAAmB1L,aAAe,CAChCP,kBAAc7gB,EACd4G,UAAM5G,EACNikB,cAAUjkB,G,WCjDCitB,GAAoB,SAAC,GAA+D,IAA7DjS,EAA4D,EAA5DA,MAAOyI,EAAqD,EAArDA,eAAgB/L,EAAqC,EAArCA,MAAO9Q,EAA8B,EAA9BA,KAA8B,EACjEqkB,2BAArBe,EADsF,EACtFA,SAAU/Q,EAD4E,EAC5EA,OAD4E,EAEjDF,mBAASC,EAAOC,GAA/CiQ,EAFgF,EAEtFtkB,KAAoBuU,EAFkE,EAElEA,aAE5B,OACE,kBAACuF,EAAA,EAAD,CAAMC,WAAS,EAACwD,UAAU,SAASxkB,MAAI,EAACqkB,IAAE,GACxC,kBAACtD,EAAA,EAAD,CAAM/gB,MAAI,EAACqkB,IAAE,GACX,kBAACuF,GAAA,EAAD,eACE1I,aAAcnJ,EACdiM,WAAS,EACTiJ,SAAUZ,EACVhR,MAAOA,EACPpU,KAAI,OAAEA,QAAF,IAAEA,IAAQskB,GACVzH,EANN,CAOEoI,QAAS1Q,EACT2Q,WAAY3Q,EACZsF,QAAQ,iBAOlBwM,GAAkB7L,aAAe,CAC/Bxa,UAAM5G,EACNyjB,oBAAgBzjB,EAChB0X,MAAO,ICrBF,IAAMwV,GAAqB,SAAC,GAGgB,IAFjD/Q,EAEgD,EAFhDA,SAEgD,IADhDwB,wBACgD,SAC1CwP,EAAgBzP,wBAAcC,GAE9BjD,EAAE,UAAMiD,EAAmB,YAAc,GAAvC,iBAER,OACE,2BAAOyP,QAAS1S,GACd,2BAAO2S,OAAO,cAAchhB,UAAU,SAASqO,GAAIA,EAAIuJ,SAAUkJ,EAAejpB,KAAK,SACpFiY,I,8BCeMmR,I,OAAkBC,sBAC7B,SAACnR,EAA6BoR,GAAwC,IAC5DC,EAA+CrR,EAA/CqR,yBAA0BC,EAAqBtR,EAArBsR,iBAGpB9qB,EACVH,qBAAWC,KADbC,SAAYC,SAJqD,EAO3CkgB,oBAAS,GAPkC,mBAO5D6K,EAP4D,KAOtDC,EAPsD,OAQ7B9K,qBAR6B,mBAQ5D+K,EAR4D,KAQ/CC,EAR+C,OASvBhL,mBAAyB,CACnE5M,SAAU,GACVxW,IAAK,KAX4D,mBAS5DquB,EAT4D,KAS5CC,EAT4C,OAa3ClL,mBAAS,GAbkC,mBAa5DmL,EAb4D,KAatDC,EAbsD,KAkC7DC,EAAkB,SAAC,GAA+C,IAA7ClY,EAA4C,EAA5CA,IAAKC,EAAuC,EAAvCA,SAAUxW,EAA6B,EAA7BA,IACpCuW,IACF6X,EAAe7X,GACf+X,EAAkB,CAChB9X,WACAxW,SAGJkuB,GAAQ,IAUV,OANAQ,8BAAoBZ,GAAK,WACvB,MAAO,CACLW,sBAKF,kBAACE,GAAA,EAAD,CAAOhiB,UAAU,mBAAmBiiB,QAxBb,WACvBJ,EAAQ,GACRN,GAAQ,IAsBuDD,KAAMA,GACnE,kBAACY,GAAA,EAAD,CAAOliB,UAAU,0BACf,kBAACmiB,GAAA,EAAD,CACEC,MAAOV,EAAe7X,SAAS9T,OAC/B6hB,SA1CiB,SAACvX,EAA6BgL,GACrDwW,EAAQxW,GACR,IAAM1B,EAAuByX,EAC3B7qB,EACAmrB,EAAe7X,SAASwB,EAAQ,GAChCqW,EAAeruB,KAEY,OAAzBsW,IACF4X,GAAQ,GACRE,EAAe9X,GACf4X,GAAQ,KAiCJK,KAAMA,IAER,kBAACP,EAAD,CAAkB5rB,OAAQ+rB,U,UCpGvBa,GAAa,SAAC,GAAuD,IAArDvS,EAAoD,EAApDA,SAAUhZ,EAA0C,EAA1CA,KACrC,OACE,kBAACwrB,GAAA,EAAD,CAAMxrB,KAAMA,EAAMyrB,IAAI,sBAAsB9Q,OAAO,UAChD3B,ICNM0S,I,OAAO,SAAC,GAAyC,IAAvC1S,EAAsC,EAAtCA,SACrB,OACE,yBAAK9P,UAAU,QACb,yBAAKA,UAAU,WAAW8P,MCEnB2S,I,OAAW,SAAC1S,GAA8B,IAAD,EACF0G,oBAAS,GADP,mBAC7C7a,EAD6C,KAC1BC,EAD0B,KAGpD,OACE,kBAAC,IAAgBmU,SAAjB,CAA0B3E,MAAO,CAAEzP,oBAAmBC,yBACpD,kBAAC,EAAD,CAAgBsf,UAAWvf,GACzB,kBAAC,EAAeyf,QAAhB,6BACA,kBAAC,EAAeC,OAAhB,KACE,kBAAC,GAAiBvL,Q,wCCNtB2S,GAAQ9H,OAAOC,YAAc,GAMtB8H,GAAiB,SAAC,GAAoD,IAAlDzgB,EAAiD,EAAjDA,QAASqC,EAAwC,EAAxCA,aACxC,OACE,kBAAC,KAAD,CAAYqe,IAAKF,IACf,yBAAK1iB,UAAU,gCACZkC,EAAQvM,KAAI,SAACwM,GACZ,IAAMnC,EAAS,yBAAqBsE,+BAAqBC,IACzD,OACE,yBAAKlR,IAAK8O,EAAQnC,UAAWA,GAC1BmC,SCfF0gB,GAAuB,SAAC,GAGH,IAFnB1jB,EAEkB,EAF/B5C,YACa6C,EACkB,EAD/B9C,YAEA,OACE,yBAAK0D,UAAU,kBACZd,aAAYC,EAAKC,GAAKzJ,KAAI,SAACob,GAC1B,OACE,yBAAK1d,IAAK0d,EAAM/Q,UAAU,aACxB,wCAAU+Q,EAAV,cCWC+R,GAAe,SAAC,GAMJ,EALvBC,SAKwB,IAJxBC,EAIuB,EAJvBA,gBACAphB,EAGuB,EAHvBA,cACA2C,EAEuB,EAFvBA,aACG0e,EACoB,+EAGnB/T,0BADF5Y,SAAY2F,EAFS,EAETA,QAASG,EAFA,EAEAA,aAAcE,EAFd,EAEcA,YAAaC,EAF3B,EAE2BA,YAF3B,EAIWka,qBAJX,mBAIhByM,EAJgB,KAILC,EAJK,KAMjB7N,EAAaC,wBAAc,CAC/BL,QAAS,aACTd,QAAS,YAGLgP,EAAmB7J,uBACvB,SAAC8J,GACCF,EAAaE,EAAIhjB,MAAMO,eACvB0U,EAAWgM,KAAK+B,EAAIC,MAEtB,CAAChO,IAGG1c,EAAQ,CACZ0D,cACAC,eAIF0mB,EAAe,6BACVA,GACArqB,GAIL,IAAMqJ,EAAiB8a,mBAAQ,WAC7B,OAAOpb,aAAmBC,EAAexF,KACxC,CAACwF,EAAexF,IAGbmnB,EAA+BxG,mBAAQ,WAC3C,OAAO/a,aAA0BC,EAAgB+gB,KAChD,CAAC/gB,EAAgB+gB,IAMpB,OAHAzgB,aAAqBN,EAAgBhG,GACrCoG,aAAqBT,GAGnB,oCACE,kBAAC,GAAD,MACA,yBAAK5B,UAAU,8BACb,kBAAC,GAAyBpH,GAC1B,yBAAKoH,UAAU,oBACb,kBAACwjB,GAAA,EAAD,CACEC,KACE,kBAAC,GAAD,CAAgBvhB,QAASqhB,EAA8Bhf,aAAcA,IAEvEmT,SAAS,YAET,yBAAK1X,UAAU,YACZujB,EAA6B5tB,KAAI,SAACwM,GACjC,IAAMnC,EAAS,oBAAgBsE,aAAqBC,IACpD,OACE,yBAAKlR,IAAK8O,EAAQnC,UAAWA,GAC3B,kBAAC,EAAD,iBACMijB,EADN,CAEE5vB,IAAK8O,EACLuhB,WAAYN,EACZzjB,OAAQsC,EAAeE,cASvC,kBAACwT,EAAA,EAAD,iBACMC,sBAAYN,GADlB,CAEEO,aAAc,CACZC,WAAY,OACZC,SAAU,UAEZC,WAAY,CAAEC,MAAO,CAAE0N,UAAW,MAAOC,SAAU,MAAOxO,SAAU,UACpEc,gBAAiB,CACfJ,WAAY,QACZC,SAAU,SAGZ,kBAAC,EAAD,CAAmBtgB,OAAQytB,OClHtBW,GAAiB,WAC5B,IAAM1tB,EAAa+Y,eAEb4U,EACJ,8EACI/sB,EAAW+sB,EAAQ9sB,QAAQf,MAE3B4e,EAAU0E,uBAAY,WAC1BriB,aAAc4sB,EAAS/sB,EAAUZ,KAChC,CAACA,EAAYY,IAEhB,OACE,kBAAC6d,EAAA,EAAD,CAAQC,QAASA,EAAST,QAAQ,aAAlC,cCVS2P,I,OAAY,WACvB,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,SAKAC,GAAc,WAClB,OACE,kBAAC,GAAD,CACEC,KACE,sWAKE,4BACE,2EACA,gFACA,+JAIA,yFACA,6FACA,+GACA,iHACA,6GAhBJ,kTAsBE,4BACE,6FACA,wGACA,wGACA,mGACA,gGACA,oFACA,2GACA,iGACA,wGA/BJ,+NAoCE,6BACA,6BArCF,kZA6CFnjB,MAAM,YAKNojB,GAAY,WAChB,OACE,kBAAC,GAAD,CACED,KACE,kBAAC5P,EAAA,EAAD,CAAMC,WAAS,EAACwD,UAAU,SAASK,QAAQ,aAAa5D,QAAS,GAC9D4P,OAAKxuB,KAAI,SAACkkB,GACT,OAAO,kBAAC,GAAD,CAAmBxmB,IAAKwmB,EAAOtf,KAAMsf,OAAQA,QAI1D/Y,MAAM,UAKNsjB,GAAY,WAChB,OACE,kBAAC,GAAD,CACEH,KACE,kJAEqB,IACnB,kBAAC,GAAD,CAAYntB,KAAK,wDAAjB,oBAHF,sCAMqC,4CANrC,QAMiE,yCANjE,IAMuF,IACrF,4CAPF,2DAOkF,IAChF,yCARF,yOAU2E,IACzE,kBAAC,GAAD,CAAYA,KAAK,oCAAjB,oBAXF,0CAYoC,IAClC,kBAAC,GAAD,CAAYA,KAAK,4CAAjB,oBAbF,2FAiBFgK,MAAM,UAKNujB,GAAc,WAClB,OACE,kBAAC,GAAD,CACEJ,KACE,4BACE,4BACE,kBAAC,GAAD,CAAYntB,KAAK,qHAAjB,gBAEc,IAHhB,eAMA,4BACE,kBAAC,GAAD,CAAYA,KAAK,qHAAjB,yBAEc,IAHhB,gBAMA,4BACE,kBAAC,GAAD,CAAYA,KAAK,qHAAjB,qBAEc,IAHhB,iBAQJgK,MAAM,YAKNwjB,GAAiB,WACrB,OACE,kBAAC,GAAD,CACEL,KACE,4BACE,4BACE,kBAAC,GAAD,CAAYntB,KAAK,iCAAjB,wCAIF,4BACE,kBAAC,GAAD,CAAYA,KAAK,gCAAjB,4BADF,gBAIA,4BACE,kBAAC,GAAD,CAAYA,KAAK,2KAAjB,6BAEc,IAHhB,eAMA,4BACE,kBAAC,GAAD,CAAYA,KAAK,sFAAjB,uBAEc,IAHhB,gBAMA,4BACE,kBAAC,GAAD,CAAYA,KAAK,mIAAjB,wBAEc,IAHhB,gBAMA,4BACE,kBAAC,GAAD,CAAYA,KAAK,2KAAjB,wBAEc,IAHhB,iBAQJgK,MAAM,eChLCyjB,GAAoB,SAAC,GAAmC,IAAjC1K,EAAgC,EAAhCA,OAC1Btf,EAAcsf,EAAdtf,KAAMiqB,EAAQ3K,EAAR2K,IAEd,OACE,kBAACnQ,EAAA,EAAD,CAAM6D,WAAW,SAAS5D,WAAS,EAAChhB,MAAI,GACtC,kBAAC+gB,EAAA,EAAD,CAAM6D,WAAW,SAAS5D,WAAS,EAACwD,UAAU,SAASxkB,MAAI,EAACqkB,GAAI,GAC9D,kBAAC,EAAD,CAAekC,OAAQA,IACvB,4BAAKtf,IAEP,kBAAC8Z,EAAA,EAAD,CAAMC,WAAS,EAAChhB,MAAI,EAACqkB,GAAI,GACtB6M,KCVIC,GAAc,SAAC,GAAkC,IAAhC3jB,EAA+B,EAA/BA,MAAOmjB,EAAwB,EAAxBA,KACnC,OACE,kBAAC/P,EAAA,EAAD,CAAKiD,GAAI,EAAGuN,GAAI,GACd,kBAAC,EAAD,KAAqB5jB,GACrB,oCAAGmjB,KAKTQ,GAAY1P,aAAe,CACzBkP,UAAMtwB,EACNmN,WAAOnN,G,cCVIgxB,GAAU,WACrB,IAAMxU,EAAcF,qCAA2B8N,IACzCtN,EAAYD,gCAAsBoU,IAFb,EAGLnO,qBAHK,mBAGpB/F,EAHoB,KAGfmU,EAHe,KAU3B,OAJA9Q,qBAAU,WACRtD,EAAUC,KACT,CAACA,EAAKD,IAGP,oCACE,kBAAC,WAAD,CACEN,YAAaA,EACb2U,SAAO,EACPC,OAAQC,GACRC,OAAQ,kBAAC,GAAD,MACR9iB,OAAQ,qCACRsO,UAAWoU,MAMb9G,GAAW,SAAC,GAChB,OAD6D,EAA3C5N,aAIdyU,GAAiB,SAAC,GACtB,OAD4D,EAApCnU,WAIpBuU,GAAe,SAACjV,GACpB,OACE,kBAAC6E,EAAA,EAAD,eAAQR,QAAQ,YAAerE,GAA/B,0BAKEmV,GAAmB,WACvB,OACE,4CACa,IACX,uBAAGpuB,KAAK,4CACN,iDC7CKquB,GAAkB,SAAC,GAA2D,IAAzDC,EAAwD,EAAxDA,QAAS9xB,EAA+C,EAA/CA,KAAMkhB,EAAyC,EAAzCA,aAAyC,EAC1DiC,mBAASjC,GADiD,mBACjF8L,EADiF,KACxE+E,EADwE,KAGlFC,EAAe/L,uBACnB,SAACgM,GACC,OAAO,SAACllB,GACN,IAAMmlB,EAAYnlB,EAAMoR,OAAO6O,QAC/B+E,EAAWG,GAETJ,EADEI,EACM,SAACC,GACP,MAAM,GAAN,mBAAWA,GAAX,CAAsBF,KAGhB,SAACE,GACP,OAAOA,EAAUpkB,QAAO,SAACjD,GACvB,OAAOA,IAAMmnB,UAMvB,CAACH,IAGH,OACE,kBAAC/Q,EAAA,EAAD,CAAM6D,WAAW,SAAS5D,WAAS,GACjC,kBAAC+L,GAAA,EAAD,CAAUC,QAASA,EAAS1I,SAAU0N,EAAahyB,KADrD,IACgEA,ICrBvDoyB,GAAsB,YAMC,IALlCC,EAKiC,EALjCA,KACA7oB,EAIiC,EAJjCA,OACAuR,EAGiC,EAHjCA,GACAuX,EAEiC,EAFjCA,YACAR,EACiC,EADjCA,QAEMjV,EAAcF,aAA2B4V,IAEzCC,EAA0B/I,mBAAQ,WAEtC,OAD4B5M,EAAYrT,GAAQuR,KAE/C,CAAC8B,EAAarT,EAAQuR,IAMzB,OAJA0F,qBAAU,WACRqR,EAAQU,MAIR,6BACE,4BAAKzX,GAEJsX,EAAKhwB,KAAI,SAACowB,GACT,IAAMzyB,EACHsyB,GAAeA,EAAYG,IAAaA,EAAQvwB,OAAOob,KAAKmV,GAAS,IAClEvR,EAAesR,EAAwBjwB,SAASvC,GACtD,OACE,kBAAC,GAAD,CACED,IAAG,UAAKC,EAAL,YAAawJ,GAChB0X,aAAcA,EACdlhB,KAAMA,EACN8xB,QAASA,SAQrBM,GAAoB3Q,aAAe,CACjC6Q,iBAAajyB,GAGf,IAAMkyB,GAAsB,SAAC,GAC3B,OADwE,EAA3C1V,aCvClB6V,GAA0B,SAAC,GAA8C,IAA5ClpB,EAA2C,EAA3CA,OAA2C,EAChDzE,aAAqB0lB,IAD2B,mBAC5ErlB,EAD4E,KAChEE,EADgE,KACzDD,EADyD,KAE7E2X,EAAWL,aAA2B4V,IACtC1U,EAAgBH,aAA0BiV,IAHmC,EAKnDxP,mBAAmB,IALgC,mBAK5EyP,EAL4E,KAKlEC,EALkE,OAMnD1P,mBAAmB,IANgC,mBAM5E2P,EAN4E,KAMlEC,EANkE,OAOnD5P,mBAAmB,IAPgC,mBAO5E6P,EAP4E,KAOlEC,EAPkE,KAS7EC,EAASjN,uBAAY,WACzBjJ,EAASxT,EAAQ,CAAEpE,WAAYwtB,EAAUvtB,MAAO2tB,EAAU1tB,MAAOwtB,MAChE,CAACtpB,EAAQopB,EAAUI,EAAUhW,EAAU8V,IAQ1C,OANArS,qBAAU,WAGR5C,EAAcqV,KACb,CAACA,EAAQrV,IAGV,kBAAC+C,EAAA,EAAD,CAAKiD,GAAI,GACP,kBAACqH,GAAA,EAAD,CAAMpK,QAAQ,YACZ,kBAACsK,GAAA,EAAD,KACE,4BAAK5hB,GACL,kBAACuX,EAAA,EAAD,CAAMC,WAAS,EAAC6D,QAAQ,gBACtB,kBAAC,GAAD,CACErb,OAAQA,EACR8oB,YAAa,SAACa,GACZ,MAAM,GAAN,OAAUA,EAAQxgB,MAAlB,YAA2BwgB,EAAQC,OAErCrY,GAAG,aACHsX,KAAMjtB,EACN0sB,QAASe,IAEX,kBAAC,GAAD,CACErpB,OAAQA,EACRuR,GAAG,QACHsX,KAAM/sB,EACNwsB,QAASiB,IAEX,kBAAC,GAAD,CACEvpB,OAAQA,EACRuR,GAAG,QACHsX,KAAMhtB,EACNysB,QAASmB,KAGb,kBAAC3R,EAAA,EAAD,CAAQC,QAAS2R,EAAQ3uB,KAAK,UAA9B,YAUJkmB,GAAW,SAAC,GAChB,MAAO,CAD6D,EAAlDrlB,WAAkD,EAAtCE,MAAsC,EAA/BD,QAIjCktB,GAAsB,SAAC,GAC3B,OADqE,EAAxCvV,UAIzB2V,GAAkB,SAACpZ,GACvB,OAAOA,EAAMsE,eC7EFwV,GAAwB,WACnC,IAAMluB,EAAUJ,aAAqB0lB,IACrC,OACE,oCACItlB,EAA6C9C,KAAI,SAACixB,GAClD,OAAO,kBAAC,GAAD,CAAyBvzB,IAAKuzB,EAAUC,OAAQ/pB,OAAQ8pB,EAAUC,cAO3E9I,GAAW,SAAC,GAChB,OADmD,EAAjCtlB,S,UCTPquB,GAAwB,SAAC/W,GAAuC,IACnE4G,EAAyB5G,EAAzB4G,SAAUgH,EAAe5N,EAAf4N,WACZ9kB,EAASR,aAAqB0lB,IAE9BgJ,EAAmBpX,IAAM4J,aAC7B,SAACjlB,GACCuE,EAAO8kB,EAAYrpB,GACnBqiB,GAAYA,MAEd,CAAC9d,EAAQ8d,EAAUgH,IAGrB,OAAO,kBAAC,GAAD,iBAAoB5N,EAApB,CAA2B4G,SAAUoQ,MAG9CD,GAAsB/R,aAAe,CACnC4B,cAAUhjB,GAGZ,IAAMoqB,GAAW,SAAClR,GAChB,OAAOA,EAAMhU,Q,8BCNFmuB,GAAiB,WAAO,IAAD,EACErX,IAAM8G,SAAS,GADjB,mBAC3BwQ,EAD2B,KACfC,EADe,OAEJvX,IAAM8G,SAAS,IAAIjM,KAFf,mBAE3B2c,EAF2B,KAElBC,EAFkB,KAG5BC,EAAQC,KACN7wB,EAAgByY,eAAhBzY,YACF8wB,EAAavU,eACbzc,EAAWia,aAAsBuN,IANL,EAOI/M,aAA0BiV,IAAxDhV,EAP0B,EAO1BA,UAAWC,EAPe,EAOfA,eAEbsW,EAAiB,SAACC,GACtB,OAAgB,IAATA,GAGHC,EAAgB,SAACD,GACrB,OAAON,EAAQrc,IAAI2c,IAoDrB1T,qBAAU,WACR6G,OAAO+M,SAAS,EAAG,KAClB,CAACV,IAEJ,IAAMpS,EAAU0E,uBAAY,WAC1B9iB,EAAY,CAAEmB,QAAS,CAAErB,YAAYsB,KAAM,oBAC3C0vB,EAAW,OACV,CAAC9wB,EAAa8wB,EAAYhxB,IAE7B,OACE,yBAAKyJ,UAAU,wBACb,yBAAKiW,MAAO,CAAE2R,KAAM,aACjBX,IAAeI,EAAMtxB,OACpB,6BACE,kBAACoe,EAAA,EAAD,CAAYnU,UAAU,2BAAtB,yCAGA,kBAAC4U,EAAA,EAAD,CAAQ5U,UAAU,yBAAyB6U,QAtBjC,WAClBqS,EAAc,KAqBN,SAGA,kBAACtS,EAAA,EAAD,CACE5U,UAAU,yBACV+X,SAAyB,IAAfkP,EACVpS,QAnDO,WACjBqS,GAAc,SAACW,GACb,OAAOA,EAAiB,OA8ClB,QAOA,kBAACjT,EAAA,EAAD,CAAQC,QAASA,EAAShd,KAAK,UAA/B,wBAKF,yBAAKoe,MAAO,CAAE6R,QAAS,OAAQC,cAAe,SAAU5O,OAAQ,SAC9D,yBAAKnZ,UAAU,0BAA0BiW,MAAO,CAAE2R,KAAM,aACrDI,GAAef,IAElB,yBAAKhR,MAAO,CAAE2R,KAAM,WAAYK,UAAW,QASxCT,EAAeP,IACd,kBAACrS,EAAA,EAAD,CACE5U,UAAU,yBACV6C,MAAM,YACNgS,QAvEG,WACjB,IAAK2S,EAAeP,GAGlB,MAAM,IAAIhV,MAAM,8CAGlBiV,GAAc,SAACW,GACb,OAAOA,EAAiB,KAE1BT,GAAW,SAACc,GACV,IAAMC,EAAa,IAAI3d,IAAI0d,EAAYzyB,UAEvC,OADA0yB,EAAWvqB,IAAIqpB,GACRkB,MA2DK/T,QAAQ,aAJV,QASF,kBAACQ,EAAA,EAAD,CAAQ/R,MAAM,UAAUgS,QAxGjB,WACjB,IAAIsT,EAAahB,EACbO,EAAcT,KAChBkB,EAAa,IAAI3d,IAAI2d,EAAW1yB,WACrB2yB,OAAOnB,GAGpBC,GAAc,SAACW,GACb,OAAOA,EAAiB,KAE1BT,EAAWe,GAGXlX,EAAUpU,SAAQ,SAACwrB,GACjBA,OAIFnX,KAsFuDkD,QAAQ,aAClD6S,IAAeI,EAAMtxB,OAAS,EAAI,SAAW,WAMxD,kBAACuyB,GAAA,EAAD,CACErB,WAAYA,EACZsB,kBAAgB,EAChBtS,MAAO,CAAE2R,KAAM,WAAYY,WAAY,MAAOP,UAAW,WAExDZ,EAAM1xB,KAAI,SAACgZ,EAAO6N,GACjB,IAAMiM,EAAqC,GACrCC,EAA6C,GAOnD,OANIlB,EAAehL,KACjBkM,EAAWC,SAAW,kBAACxU,EAAA,EAAD,CAAYC,QAAQ,WAApB,aAEpBsT,EAAclL,KAChBiM,EAAUG,WAAY,GAGtB,kBAACC,GAAA,EAAD,eAAMx1B,IAAKsb,GAAW8Z,GACpB,kBAACK,GAAA,EAAcJ,EAAa/Z,UASpC2Y,GAAW,WACf,MAAO,CAAC,UAAW,cAAe,cAAe,qBAAsB,kBAInEU,GAAiB,SAACP,GACtB,OAAQA,GACN,KAAK,EACH,OAAO,kBAAC,GAAD,MACT,KAAK,EACH,OAAO,kBAAC,GAAD,MACT,KAAK,EACH,OAAO,kBAAC,GAAD,MACT,KAAK,EACH,OAAO,kBAAC,GAAD,MACT,KAAK,EACH,OAAO,kBAAC,GAAD,MACT,QACE,OAAO,sDAIP1J,GAAW,SAAC,GAChB,OADqD,EAAnCxnB,UAId0vB,GAAkB,SAAC,GACvB,MAAO,CAAEhV,UAD6E,EAA7DA,UACLC,eADkE,EAAlDA,iBCrMzB6X,GAA4B,WACvC,OACE,oCACE,kBAAC,EAAD,oBACA,kBAAC,GAAD,Q,UCIOC,GAA2B,WAAO,IAAD,EAGxC9Z,0BADF5Y,SAAYC,EAF8B,EAE9BA,SAAUoC,EAFoB,EAEpBA,MAAOD,EAFa,EAEbA,WAAYsD,EAFC,EAEDA,QAASpD,EAFR,EAEQA,MAE9CC,EAASR,+BAAqB0lB,IAC9B3N,EAAiBH,qCAA2B4V,IAE5CoD,EAAkB1yB,EAASkC,QAAQ1C,OAAS,EAE5CmzB,EAA4B3P,uBAAY,WAC5C1gB,EACE,aACAH,EAAW/C,KAAI,SAACoK,GAAU,IAAD,EACEA,EAAKR,MAAM,KADb,kBAEvB,MAAO,CAAE0G,MAFc,KAEAygB,KAFA,WAEWhd,KAAK,UAG3C7Q,EACE,UACAmD,EAAQrG,KAAI,SAACwT,GACX,MAAO,CAAE0d,OAAQ1d,EAAE5O,UAGvB1B,EACE,QACAF,EAAMhD,KAAI,SAACwzB,GACT,MAAO,CAAE3mB,KAAM2mB,OAGnBtwB,EACE,QACAD,EAAMjD,KAAI,SAACob,GACT,MAAO,CAAEqY,KAAMrY,OAMnB,IAAMsY,EAAmC,GACzCrtB,EAAQa,SAAQ,SAACysB,GAAQ,IAEf/uB,EAAsB+uB,EAAtB/uB,KAAMxF,EAAgBu0B,EAAhBv0B,YAEds0B,EAAoB9uB,GAAQ,CAC1B7B,WAAY3D,EACZ4D,QACAC,YAGJwX,EAAeiZ,KACd,CAACrtB,EAAStD,EAAYC,EAAOyX,EAAgBxX,EAAOC,IAEvD,OACE,oCACE,kBAAC,EAAD,oBACA,6FACCowB,GACC,sDAC2BtwB,EAAM5C,OADjC,aACmD2C,EAAW3C,OAD9D,iBACoF,IACjFiG,EAAQjG,OAFX,mBAEmC6C,EAAM7C,OAFzC,6CAKF,kBAAC6e,EAAA,EAAD,CAAQC,QAASqU,EAA2B9U,QAAQ,YAApD,YASA2J,GAAW,SAAClR,GAChB,OAAOA,EAAMhU,QAGTgtB,GAAsB,SAAChZ,GAC3B,OAAOA,EAAMuD,gBCrFFmZ,GAAuB,WAClC,OACE,oCACE,kBAAC,EAAD,gBACA,kBAAC,GAAD,QCFOC,GAA2B,WAAO,IAAD,EACEnxB,aAAqB0lB,IAA3DplB,EADoC,EACpCA,MAAOF,EAD6B,EAC7BA,QAASC,EADoB,EACpBA,WAAYE,EADQ,EACRA,MAEpC,OACE,oCACE,kBAAC,EAAD,oBACA,kBAAC,GAAD,CACE4d,cAAe9d,EACfklB,WAAY,CAAE3X,MAAO,GAAIygB,KAAM,IAC/B/I,WAAW,eAEb,kBAAC,GAAD,CACEnH,cAAe/d,EACfmlB,WAAY,CAAEiJ,OAAQ,IACtBlJ,WAAW,YAEb,kBAAC,GAAD,CAAuBnH,cAAe7d,EAAOilB,WAAY,CAAEpb,KAAM,IAAMmb,WAAW,UAClF,kBAAC,GAAD,CACEnH,cAAe5d,EACfglB,WAAY,CAAEwL,KAAM,IACpBzL,WAAW,QACXvG,eAAgB,CAAEvf,KAAM,YAM1BkmB,GAAW,SAAC,GAA8D,IAA5DplB,EAA2D,EAA3DA,MAClB,MAAO,CAAEF,QADoE,EAApDA,QACPC,WAD2D,EAA3CA,WACJC,QAAOC,MADwC,EAA/BA,QC/BnC6wB,GAAwB,WACnC,OACE,oCACE,kBAAC,EAAD,gBACA,uDAC0B,wCAD1B,0CCGOC,I,OAAc,WACzB,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,SCZOC,GAAW,WACtB,OAAO,6C,UCCIC,GAAkB,WAAM,IAE3BjzB,EAAqBT,eAArBS,iBAGR,OAFAod,oBAAUpd,GAGR,oCACE,kBAAC,GAAD,Q,kBCCOkzB,I,OAAM,WAAO,IAAD,EACiBpT,oBAAS,GAD1B,mBAChBhb,EADgB,KACF/E,EADE,KAEfzC,EAASL,mBAAS,YAAlBK,KAFe,EAGS61B,qBAAWnd,kBAAQ1Y,GAAOuH,mBAHnC,mBAGhBlF,EAHgB,KAGNG,EAHM,KAKvB,OACE,yBAAKuJ,UAAU,OACb,kBAAC,KAAD,CAAY+pB,SAAS,KACnB,kBAAC,GAAD,MACA,kBAAC,IAAW/Z,SAAZ,CAAqB3E,MAAO,CAAE5U,cAAaH,WAAUmF,eAAc/E,oBACjE,yBAAKsJ,UAAU,qBACb,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOmT,KAAK,UACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,SACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,YACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,KACV,kBAAC,GAAD,UAKR,kBAAC,GAAD,UC7BK+R,I,OAAS,WACpB,OACE,4BAAQllB,UAAU,cAChB,kBAACqU,EAAA,EAAD,CAAMC,WAAS,EAAC6D,QAAQ,cACtB,kBAACjE,EAAA,EAAD,CAAK8V,EAAG,GAAR,QAAczsB,MAAS1C,OAAvB,uB,8BCZKovB,G,QAAOC,ECMPC,I,OAAS,WACpB,OACE,kBAACC,GAAA,EAAD,CAAQC,UAAW,EAAG3S,SAAS,UAC7B,kBAAC4S,GAAA,EAAD,CAAStqB,UAAU,WACjB,kBAAC,KAAD,CAAYA,UAAU,sBAAsBuqB,GAAG,KAC7C,yBAAK9P,IAAI,WAAWza,UAAU,WAAW0a,IAAKuP,KAC9C,kBAAC9V,EAAA,EAAD,CAAYC,QAAQ,MAApB,uBAEF,kBAACD,EAAA,EAAD,CAAYnU,UAAU,uBACpB,kBAACsiB,GAAA,EAAD,CAAMrC,UAAWuK,KAAYD,GAAG,KAAhC,eAGA,kBAACjI,GAAA,EAAD,CAAMrC,UAAWuK,KAAYD,GAAG,YAAhC,WAGA,kBAACjI,GAAA,EAAD,CAAMrC,UAAWuK,KAAYD,GAAG,UAAhC,SAGA,kBAACjI,GAAA,EAAD,CAAMrC,UAAWuK,KAAYD,GAAG,SAAhC,aClBGE,I,OAAqB,WAAO,IAAD,EAGlCr0B,qBAAWC,KADbC,SAAY4F,EAFwB,EAExBA,YAAa3F,EAFW,EAEXA,SAG3B,OACE,oCACE,kBAAC,GAAD,CACEysB,gBAAiB9mB,EAAYyH,OAC7B/B,cAAenC,oBAAUlJ,EAAU,cACnCgO,aAAa,kB,sECORmmB,I,OAAe,WAAO,IAEnBn0B,EACVH,qBAAWC,KADbC,SAAYC,SAGRjC,EAAOyoB,mBAAsB,WACjC,OAAOjV,sBAAYvR,KAClB,CAACA,IAEEo0B,EAAwBC,iBAAiC,MACzDC,EAAgCD,iBAAiC,MAmBjEE,EAAU/N,mBAA8B,WAC5C,MAAO,CACL,CAAEoN,OAAQ,UAAWY,SAAU,WAC/B,CAAEZ,OAAQ,cAAeY,SAAU,cACnC,CAAEZ,OAAQ,uBAAwBY,SAAU,sBAC5C,CAAEZ,OAAQ,aAAcY,SAAU,aAClC,CAAEZ,OAAQ,yBAA0BY,SAAU,wBAC9C,CAAEZ,OAAQ,eAAgBY,SAAU,eACpC,CAAEZ,OAAQ,yBAA0BY,SAAU,wBAC9C,CAAEZ,OAAQ,eAAgBY,SAAU,eACpC,CAAEZ,OAAQ,eAAgBY,SAAU,eACpC,CAAEZ,OAAQ,cAAeY,SAAU,iBAEpC,IAGHz2B,EAAKqP,MAAK,SAAChM,EAAGqR,GACZ,OAAIrR,EAAEsQ,QAAUe,EAAEf,SACR,EAEH,KAGT,IAAM+iB,EAAgBC,oBAAS,CAAEH,UAASx2B,QAAQ42B,cAE1CC,EAAqEH,EAArEG,cAAeC,EAAsDJ,EAAtDI,kBAAmBC,EAAmCL,EAAnCK,aAAcpT,EAAqB+S,EAArB/S,KAAMqT,EAAeN,EAAfM,WAG9D,OACE,oCACE,kBAAC,GAAD,CAA8BnK,IAAKwJ,IACnC,kBAAC,GAAD,CAAsCxJ,IAAK0J,IAC3C,kBAACU,GAAA,EAAD,CAAgBtL,UAAWiC,MACzB,yBAAKliB,UAAU,oCACb,kBAAC,EAAD,CACEmV,YAAY,4BACZF,QAAQ,EACRC,QAAQ,0BAER,kBAAC,EAAD,QAGJ,kBAACsW,GAAA,EAAUL,IACT,kBAACM,GAAA,EAAD,KAGIJ,EAAa11B,KAAI,SAAC+1B,GAChB,OAEE,kBAACC,GAAA,EAAaD,EAAYE,sBAGtBF,EAAYxpB,QAAQvM,KAAI,SAACk2B,GACvB,OAGE,kBAACC,GAAA,EAAcD,EAAOE,eAAeF,EAAOG,wBAGxCH,EAAO/M,OAAO,UAEhB,8BACG+M,EAAOI,SAAYJ,EAAOK,aAAe,gBAAQ,gBAAS,aAY/E,kBAACC,GAAA,EAAcf,IAGXnT,EAAKtiB,KAAI,SAAC+S,GAER4iB,EAAW5iB,GACX,IAAM0jB,EAAQ9d,2BAAiB5F,EAAI2jB,SAASpkB,SAC5C,OAEE,kBAAC0jB,GAAA,EAAD,iBAAcjjB,EAAI4jB,cAAlB,CAAiCje,GAAI+d,IAGjC1jB,EAAI6jB,MAAM52B,KAAI,SAAC62B,GAEb,IAAMC,EACJD,EAAKnhB,OACLmhB,EACGE,eACAr5B,IAAIyS,WACJ6F,MAAM,mCACL,gBACA,GACN,OACE,kBAACmgB,GAAA,EAAD,eACE9rB,UAAWysB,GACPD,EAAKE,eAFX,CAGE7X,QAAS,YArHX,SAAC2X,GACvB,GAA0B,kBAAfA,EAAKnhB,MAAoB,CAClC,IAAM7B,EAAagjB,EAAKX,OAAO1B,OACzBwC,EAAmC,iBAAfnjB,EACpBojB,EAAWD,EACbviB,sCAA4B7T,EAAUi2B,EAAKnhB,MAAOmhB,EAAK9jB,IAAIjT,OAAOwS,SAClEqB,0CAAgC/S,EAAUi2B,EAAKnhB,MAAO7B,GACtDojB,EAAShjB,MACP+iB,GAAqB9B,EAA8BgC,QACrDhC,EAA8BgC,QAAQ/K,gBAAgB8K,IAC5CD,GAAqBhC,EAAsBkC,SACrDlC,EAAsBkC,QAAQ/K,gBAAgB8K,KA2G1BE,CAAgBN,MAKhBA,EAAK1N,OAAO,sBCrJ7BiO,I,OAAuC7L,sBAClD,SAACnR,EAAOoR,GACN,OACE,kBAAC,GAAD,CACEA,IAAKA,EACLC,yBAA0BtX,sBAC1BuX,iBAAkB/N,QAM1ByZ,GAAqCrxB,YAAc,uC,WCbtCsxB,GAA+B9L,sBAC1C,SAACnR,EAAOoR,GACN,OACE,kBAAC,GAAD,CACEA,IAAKA,EACLC,yBAA0BlY,cAC1BmY,iBAAkB9K,OAM1ByW,GAA6BtxB,YAAc,+B,WCd9BuxB,GAAkB,WAAO,IAAD,EAG/B72B,qBAAWC,KADbC,SAAYoC,EAFqB,EAErBA,WAAYnC,EAFS,EAETA,SAG1B,OACE,oCACE,kBAAC,GAAD,CACEysB,gBAAiBtqB,EAAWiL,OAC5B/B,cAAenC,oBAAUlJ,EAAU,WACnCgO,aAAa,cCbR2oB,GAAgB,WAAO,IAAD,EAG7B92B,qBAAWC,KADbC,SAAYC,EAFmB,EAEnBA,SAAUoC,EAFS,EAETA,MAGxB,OACE,oCACE,kBAAC,GAAD,CACEqqB,gBAAiBrqB,EAAMgL,OACvB/B,cAAenC,oBAAUlJ,EAAU,QACnCgO,aAAa,W,8BCNR4oB,I,OAAa,WACxB,IAAM7X,EAAaC,wBAAc,CAAEL,QAAS,OAAQd,QAAS,YACvDgZ,EAAoB5d,6BAE1B,OACE,oCACE,kBAACgG,EAAA,EAAD,eAAY3S,MAAM,UAAUwqB,KAAK,SAAY5X,sBAAYH,IACvD,kBAAC,KAAD,OAEF,kBAACgY,GAAA,EAAD,eACEzX,aAAc,CACZC,WAAY,QACZC,SAAU,OAEZwX,mBAAoB,KACpBrX,gBAAiB,CACfJ,WAAY,OACZC,SAAU,QAERyX,mBAASlY,IAEb,kBAAC,GAAD,CAAoBhE,kBAAkB,GACpC,kBAACmc,GAAA,EAAD,CAAU1I,QAAM,GAAhB,wBAEF,kBAAC,GAAD,CAAoBzT,kBAAgB,GAClC,kBAACmc,GAAA,EAAD,CAAU1I,QAAM,GAAhB,iBAEF,kBAAC0I,GAAA,EAAD,CAAU1I,QAAM,EAAClQ,QAASuY,GAA1B,kBC9BKM,GAAe,SAACC,GAC3B,OACE,kBAAC,GAAD,KACE,kBAAC/Y,EAAA,EAAD,eAAQ/R,MAAM,UAAUod,UAAU,QAAW0N,GAA7C,qBCHOC,I,OAAkB,WAC7B,OACE,oCACE,iDACA,oJAIA,kBAAC1Z,EAAA,EAAD,CAAK+L,UAAU,OAAO4N,YAAa,GACjC,kBAAC,GAAD,CAAczZ,QAAQ,eAExB,kBAACF,EAAA,EAAD,CAAK+L,UAAU,OAAO4N,YAAa,GACjC,kBAAC,EAAD,CAAkB5Y,QAAQ,KAE5B,kBAAC,GAAD,SCXO6Y,GAAW,SAAC/d,GAA6C,IAC5DD,EAAqCC,EAArCD,SAAUzE,EAA2B0E,EAA3B1E,MAAOmR,EAAoBzM,EAApByM,MAAUuR,EADgC,YACtBhe,EADsB,8BAGnE,OACE,uCACEie,kBAAA,qBAA+BxR,GAC/ByR,OAAQ5iB,IAAUmR,EAClBnO,GAAE,0BAAqBmO,GACvB0R,KAAK,YACDH,GAEH1iB,IAAUmR,GACT,kBAACtI,EAAA,EAAD,CAAK8V,EAAG,GACN,kBAAC7V,EAAA,EAAD,CAAY8L,UAAU,OAAOnQ,M,8BCZ1Bqe,I,OAAO,WAAO,IAAD,EAKpB/3B,qBAAWC,KALS,IAEtBC,SAAYC,EAFU,EAEVA,SAAU4F,EAFA,EAEAA,eACtBV,EAHsB,EAGtBA,aACAhF,EAJsB,EAItBA,YAJsB,EAMQggB,mBAASta,GAAkB,GANnC,mBAMjBiyB,EANiB,KAMPC,EANO,KAalBC,EAAqB/3B,EAASkC,QAAQ1C,OAAS,EAErD,OACE,kBAAC,EAAD,CAAgBolB,UAAW1f,GACzB,kBAAC,EAAe4f,QAAhB,uBACA,kBAAC,EAAeC,OAAhB,KACGgT,EACC,oCACE,kBAACC,GAAA,EAAD,CAAWvuB,UAAU,qBAAqB4jB,UAAU,GAClD,kBAAC,GAAD,MAEA,kBAAC,KAAD,CACE4K,UAAQ,EACRC,eAAe,UACf7W,SAnBU,SAACvX,EAAwBquB,GAC/CL,EAAYK,GACZj4B,EAAY,CAAEmB,QAAS,CAAEuE,eAAgBuyB,GAAY72B,KAAM,uBAkB/CqL,UAAU,UACVmI,MAAO+iB,GAEP,kBAACO,GAAA,EAAD,CAAKhgB,MAAM,qBACX,kBAACggB,GAAA,EAAD,CAAKhgB,MAAM,kBACX,kBAACggB,GAAA,EAAD,CAAKhgB,MAAM,kBACX,kBAACggB,GAAA,EAAD,CAAKhgB,MAAM,mBACX,kBAACggB,GAAA,EAAD,CAAKhgB,MAAM,eAEb,gCAEF,kBAAC,GAAD,CAAU6N,MAAO,EAAGnR,MAAO+iB,GACzB,kBAAC,GAAD,OAEF,kBAAC,GAAD,CAAU5R,MAAO,EAAGnR,MAAO+iB,GACzB,kBAAC,GAAD,OAEF,kBAAC,GAAD,CAAU5R,MAAO,EAAGnR,MAAO+iB,GACzB,kBAAC,GAAD,OAEF,kBAAC,GAAD,CAAU5R,MAAO,EAAGnR,MAAO+iB,GACzB,kBAAC,GAAD,OAEF,kBAAC,GAAD,CAAU5R,MAAO,EAAGnR,MAAO+iB,GACzB,kBAACja,EAAA,EAAD,kDAIJ,kBAAC,GAAD,U,oBC5DGya,I,OAAgB,WAAO,IAAD,EAK7Bx4B,qBAAWC,KAHD4F,EAFmB,EAE/B3F,SAAY2F,QACZxF,EAH+B,EAG/BA,YACAC,EAJ+B,EAI/BA,gBAUF,OACE,6BACE,kBAACm4B,GAAA,EAAD,CAAYxgB,GAAG,SAAf,YACA,kBAACygB,GAAA,EAAD,CAAQzgB,GAAG,eAAeuJ,SAVJ,SAACvX,GACzB3J,GAAgB,GAChB,IAAMq4B,EAAkB1uB,EAAMoR,OAAOpG,MACrC5U,EAAY,CAAEmB,QAAS,CAAEqE,QAAS8yB,GAAmBl3B,KAAM,eAC3DnB,GAAgB,IAMyC2U,MAAOpP,GAC5D,kBAACwxB,GAAA,EAAD,CAAUpiB,MAAOvP,UAAQkR,OAAzB,SACA,kBAACygB,GAAA,EAAD,CAAUpiB,MAAOvP,UAAQ0G,MAAzB,QACA,kBAACirB,GAAA,EAAD,CAAUpiB,MAAOvP,UAAQqH,YAAzB,cACA,kBAACsqB,GAAA,EAAD,CAAUpiB,MAAOvP,UAAQuH,QAAzB,cCtBK2rB,I,OAAkB,WAAO,IAEtBx4B,EACVJ,qBAAWC,KADbC,SAAYE,QAGd,OACE,yBAAKwJ,UAAU,oBACb,yBAAKA,UAAU,gBACb,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEF,6BAAMxJ,EAAO,wBAAoBA,GAAY,IAC7C,yBAAKwJ,UAAU,iBACb,kBAAC,GAAD,MACA,kBAAC,EAAD,UCdKivB,I,OAAY,WACvB,OACE,kBAAC/P,GAAA,EAAD,CACElf,UAAU,YACVkvB,eAAgB,SAACC,GACf,OAAOA,EAAOxgB,OAEhBN,GAAG,iBACHqG,QAAS0a,GACT9P,YAAa,SAACC,GACZ,OAAO,kBAACrC,GAAA,EAAD,iBAAeqC,EAAf,CAAuB5Q,MAAM,SAASyF,QAAQ,mBAMvDgb,GAAe,CAAC,CAAEzgB,MAAO,wC,oBCdlB0gB,I,OAAmB,WAC9B,IAAM96B,EAAgBqL,oBAAUlK,QADI,EAKhCU,qBAAWC,KAFD+F,EAHsB,EAGlC9F,SAAY8F,aACZ3F,EAJkC,EAIlCA,YAEMoF,EAAyBzF,qBAAWuF,KAApCE,qBAEFyzB,EAAgB,SAAC9S,GACrB,6BAAO,4BAAA7kB,EAAA,6DACLkE,GAAqB,GACfgS,EAAUtZ,EAAMioB,GAFjB,SAKC/lB,EAAY,CAChBmB,QAAS,CAAEwE,aAAcyR,GACzBhW,KAAM,oBAPH,OASLgE,GAAqB,GAThB,4CAaT,OACE,yBAAKmE,UAAU,qBACb,kBAACwV,EAAA,EAAD,CACEuC,SAAU3b,IAAiB7H,EAAM,GACjCsgB,QAASya,EAAc/6B,EAAMyC,QAAQoF,GAAgB,IAErD,kBAACmzB,GAAA,EAAD,OAEF,kBAACpb,EAAA,EAAD,CAAYC,QAAQ,MAAMhY,GAC1B,kBAACoZ,EAAA,EAAD,CACEuC,SAAU3b,IAAiB7H,EAAMA,EAAMwB,OAAS,GAChD8e,QAASya,EAAc/6B,EAAMyC,QAAQoF,GAAgB,IAErD,kBAACozB,GAAA,EAAD,U,oBC9BY9jB,QACW,cAA7BkP,OAAO/jB,SAAS44B,UAEe,UAA7B7U,OAAO/jB,SAAS44B,UAEhB7U,OAAO/jB,SAAS44B,SAAS9jB,MAAM,2D,OCXnC+jB,KAAS5Q,OACP,kBAAC,IAAM6Q,WAAP,KACE,kBAAC,GAAD,OAEF1hB,SAASM,eAAe,SD0HpB,kBAAmBqhB,WACrBA,UAAUC,cAAcC,MACrBx4B,MAAK,SAACy4B,GACLA,EAAaC,gBAEdC,OAAM,SAACzQ,GACNjX,QAAQiX,MAAMA,EAAMzQ,a,+BE1I5B,oqL,kqBCaMmhB,EAAa,CAAC,IAAK,IAAK,MAMxBC,EAAUC,OAAO,QACjBC,EAAYD,OAAO,qBACnBE,EAAYF,OAAO,gBAEnBG,EAAaH,OAAO,aACpBI,EAASJ,OAAO,iBAChBK,EAASL,OAAO,QAChBM,EAAUN,OAAO,gBACjBO,EAASP,OAAO,QAChBQ,EAAWR,OAAO,iBAClBS,EAAST,OAAO,QAChBU,EAASV,OAAO,gBAahBW,EAAqB,SACzB1lB,EACAkU,EACAyR,GAEA,IAAMC,EAhBe,SAAC5lB,EAAD,GAAgE,IAA9CnO,EAA6C,EAA7CA,SACjC+zB,EAAa5lB,EAAM9L,MAAM,MAO/B,OANA0xB,EAAWp0B,SAAQ,SAACkF,EAAG3D,GACjBlB,EAASnH,QAAUqI,GAErBlB,EAASO,KAAKvI,oBAAUmU,SAGrB4nB,EAQYC,CAAe7lB,EAAOkU,GACjCriB,EAAaqiB,EAAbriB,SACR+zB,EAAWp0B,SAAQ,SAACs0B,EAAG/yB,GACrB4yB,EAAUG,EAAG/yB,EAAGlB,OAIPk0B,EAAoB,SAAC/lB,EAAekU,GAC/CwR,EAAmB1lB,EAAOkU,GAAQ,SAAC/hB,EAAWY,EAAGlB,GAC/CA,EAASkB,GAAGZ,UAAYiJ,EAAcjJ,OAI7B6zB,EAAmB,SAAChmB,EAAekU,GAC9CwR,EAAmB1lB,EAAOkU,GAAQ,SAAC1oB,EAAUuH,EAAGlB,GAAc,IAAD,EACQ6I,EAAalP,GADrB,mBAC1DqG,EAASkB,GAAGvH,SAAS4L,SADqC,KAC3BvF,EAASkB,GAAGvH,SAAS8L,WADM,SAKlD2uB,EAAe,SAACjmB,EAAD,GAAqD,IAAnC5W,EAAkC,EAAlCA,QACxC88B,EAAY,IAChB,GACErB,EAAWxxB,MAAK,SAAC0K,GAEf,OADAmoB,EAAYnoB,EACLiC,EAAMxV,SAASuT,MAExB,CACA,IAAM7U,EAAQ8W,EAAM9L,MAAMgyB,GACpBC,EAAmB,GACzB30B,kBAAQtI,GAAO,SAACG,GACd88B,EAAS/zB,KAAKg0B,EAAS/8B,OAEzBD,EAAQC,KAAO88B,OAEf/8B,EAAQC,KAAiB,KAAV2W,EAAe,GAAKomB,EAASpmB,IAInCqmB,EAAyB,SAACrmB,EAAD,GAAoD,EAAlC5W,QAC9C+F,eAAiBm3B,EAAmBtmB,IAGjCumB,EAAe,SAACvmB,EAAekU,GAC1CwR,EAAmB1lB,EAAOkU,GAAQ,SAAC7hB,EAAMU,EAAGlB,GAC1CA,EAASkB,GAAGV,KAAOm0B,EAASn0B,OAInBo0B,EAAqB,SAACzmB,EAAD,GAAoD,EAAlC5W,QAC1CM,YAAcg9B,EAAe1mB,IAG1B2mB,EAAiB,SAAC3mB,EAAD,GAAmD,EAAjCvO,OACvCjD,SAAqB,KAAVwR,EAAe,GAAK4mB,EAAW5mB,IAGtC6mB,EAAe,SAAC7mB,EAAD,GAAmD,EAAjCvO,OACrCvC,KAAO8Q,GAGH8mB,EAAiB,SAAC9mB,EAAD,GAAmD,EAAjCvO,OACvChD,OAASuR,GAGL+mB,EAAiB,SAAC/mB,EAAD,GAAoD,EAAlC5W,QACtCsG,OAASsQ,GAGNgnB,EAAoB,SAAChnB,EAAD,GAAoD,EAAlC5W,QACzC4F,UAAYi4B,EAAuBjnB,IAGhCknB,EAAmB,SAAClnB,EAAD,GAAoD,EAAlC5W,QACxC6F,SAAWg4B,EAAuBjnB,IAO/BmnB,EAAmB,SAACnnB,EAAD,GAAqD,IAAnC5W,EAAkC,EAAlCA,QAC3B,KAAjB4W,EAAM9F,SACR9Q,EAAQyF,SAAWmR,IAIVonB,EAAe,SAACpnB,EAAD,GAAoD,EAAlC5W,QACpCoG,KAAO6L,EAAS2E,IAGbqnB,EAAuB,SAACrnB,EAAD,GAAoD,EAAlC5W,QAE5CiG,aAAe2Q,EAAMsnB,WAAW,KAAOnsB,OAAO6E,EAAMunB,OAAO,IAAMpsB,OAAO6E,IAGrEwnB,EAAuB,SAACxnB,EAAD,GAAoD,EAAlC5W,QAC5CI,aAAewW,EAAMsnB,WAAW,KAAOnsB,OAAO6E,EAAMunB,OAAO,IAAMpsB,OAAO6E,IAGrEynB,EAAmB,SAACznB,EAAekU,GAC9CwR,EAAmB1lB,EAAOkU,GAAQ,SAAC1hB,EAAUO,EAAGlB,GAC9CA,EAASkB,GAAGP,SAAWk1B,EAAal1B,OAI3Bm1B,EAAuB,SAAC3nB,EAAekU,GAClDwR,EAAmB1lB,EAAOkU,GAAQ,SAAC0T,EAAU70B,EAAGlB,GAC9CA,EAASkB,GAAGvH,SAASgP,aACF,KAAjBwF,EAAM9F,YAAgB5R,EAAY2+B,EAAuBW,OAyClDC,EAA8B,SAAC7nB,EAAD,GAAoD,EAAlC5W,QACnDG,oBAAsByW,GAyBnB5E,EAAgB,SAAC4E,GAC5B,IAAM8nB,EAAc51B,IAAO8N,EAAO,UAClC,OAAO8nB,EAAYC,UAAYD,EAAY/yB,OAAO,UAAY,IAGnD2F,EAAe,SAACsF,GAC3B,GAAIA,EAAO,CACT,IAAMgoB,EAAYhoB,EAAM9F,OAAOhG,MAAM,KACrC,OAAyB,IAArB8zB,EAAUt9B,OAEL,CAACs9B,EAAU,GAAI,IAEC,IAArBA,EAAUt9B,OAELs9B,EAGF,CAACA,EAAUj8B,MAAM,GAAI,GAAGsS,KAAK,KAAM2pB,EAAUj8B,OAAO,GAAG,IAEhE,MAAO,IAGIq6B,EAAW,SAACpmB,GACvB,OAAI8kB,EAAQ7jB,KAAKjB,GACR3V,OAAK2G,KAEVg0B,EAAU/jB,KAAKjB,GACV3V,OAAK2S,OAEVioB,EAAUhkB,KAAKjB,GACV3V,OAAK0S,OAEVmoB,EAAWjkB,KAAKjB,GACX3V,OAAK4S,SAGdC,QAAQC,IAAR,mBAAwB6C,EAAxB,wCACO3V,OAAK2G,OAGDs1B,EAAqB,SAACtmB,GACjC,IAAMioB,EAAajoB,EAAMkoB,cACnBC,EAAanoB,EAAMooB,cACzB,MAAmB,UAAfD,EACKn6B,iBAAe2B,UAEL,WAAfw4B,EACKn6B,iBAAe4B,WAEL,SAAfu4B,EACKn6B,iBAAeqL,KAEL,MAAf4uB,EACKj6B,iBAAe6B,WAEL,MAAfo4B,EACKj6B,iBAAe8B,WAEL,MAAfm4B,EACKj6B,iBAAe+B,WAEL,MAAfk4B,EACKj6B,iBAAegC,YAGxBkN,QAAQC,IAAR,mBAAwB6C,EAAxB,wCACOhS,iBAAeqL,OAGXmtB,EAAW,SAACxmB,GACvB,IAAM3N,EAAc,GAsBpB,OArBI8yB,EAAOlkB,KAAKjB,IACd3N,EAAKD,KAAK3E,MAAI46B,QAEZjD,EAAOnkB,KAAKjB,IACd3N,EAAKD,KAAK3E,MAAIE,QAEZ03B,EAAQpkB,KAAKjB,IACf3N,EAAKD,KAAK3E,MAAIG,SAEZ03B,EAAOrkB,KAAKjB,IACd3N,EAAKD,KAAK3E,MAAII,WAEZ03B,EAAStkB,KAAKjB,IAChB3N,EAAKD,KAAK3E,MAAIK,UAEZ03B,EAAOvkB,KAAKjB,IACd3N,EAAKD,KAAK3E,MAAIM,QAEZ03B,EAAOxkB,KAAKjB,IACd3N,EAAKD,KAAK3E,MAAI66B,UAETj2B,GAGIq0B,EAAiB,SAAC1mB,GAE7B,OADoBA,EAAM9L,MAAM,UACb5J,KAAI,SAACb,GACtB,OAAOA,EAAWyQ,WAITquB,EAAc,SACzBvoB,EACAwoB,GAEA,IAAMC,EAAev2B,IAAOs2B,EAAkB,KAExCE,EADax2B,IAAO8N,EAAO,KACA2oB,KAAKF,EAAc,QAC9CG,EAAaH,EAAaI,QAEhC,OAAIH,EAlUyB,IAkU2B,KAAjB1oB,EAAM9F,OACpClM,iBAAeqL,KAEpBqvB,EAtUyB,IAsUUA,GArUV,GAiUJ,CAAC,EAAG,EAAG,EAAG,GAKTl+B,SAASo+B,GAC7B56B,iBAAe2B,UACf3B,iBAAe4B,WAGd5B,iBAAe6B,YAGX+2B,EAAa,SAAC5mB,GACzB,OAAOA,EAAMrK,QAAQ,IAAK,IAAIzB,MAAM,WAGzB+yB,EAAyB,SAACjnB,GACrC,MAAwB,KAAjBA,EAAM9F,YAAgB5R,EAAY6S,OAAO2tB,UAAU3tB,OAAO6E,IAAU7E,OAAO6E,GAAS,GAGhF0nB,EAAe,SAAC1nB,GAC3B,GAAI7E,OAAO2tB,UAAU3tB,OAAO6E,IAC1B,OAAO7E,OAAO6E,GAFqC,MAIxBA,EAAM9L,MAAM,KAAKmK,KAAK,IAAInK,MAAM,KAJR,mBAI9C/B,EAJ8C,KAInCG,EAJmC,KAK/CL,EAAkBC,IAAOC,EAAW,SAE1C,OADsBD,IAAOI,EAAS,SACjBq2B,KAAK12B,EAAiB,YAGhCoJ,EAAW,SAAC2E,GACvB,OAAOA,GAAS7E,OAAO2tB,UAAU3tB,OAAO6E,IAAU7E,OAAO6E,GAASA,G,SC/VvD6E,EAAQ,SACnB4I,GAEA,OAAO,SAACvgB,EAAKC,EAAK47B,GAChB,OAAOtb,GACL,SAACub,GACC,OAAO97B,EAAI+7B,YAAWD,MAExB77B,EACA47B,K,oCCLO7Y,GAAW,SACtBhY,GAEY,IAAD,yDAD8D,GAC9D,IADT7H,mBACS,MADK6H,EACL,EADagxB,EACb,EADaA,UAAWxf,EACxB,EADwBA,aAE7Byf,EAAetT,uBAEnB,WAA6DC,GAAS,IAAnEnhB,EAAkE,EAAlEA,UAAkE,IAAvDid,GAAIwX,OAAmD,MAA7CF,GAAa,MAAgC,EAAtBxkB,EAAsB,mCACnE,OAAO,mBAAC0kB,EAAD,eAAKtT,IAAKA,EAAKnhB,UAAS,UAAKA,IAAiB+P,OAKzD,OAFAykB,EAAazf,aAAeA,EAC5Byf,EAAa94B,YAAcA,EACpB84B,GAwBIpZ,GAAc,SAAmBtL,EAAqBjY,GACjE,IAAM68B,EAAwB,GAK9B,OAlB2B,SAAyB78B,GACpD,OAAOA,EAAK88B,aAAah/B,KAAI,SAACi/B,GAC5B,OAAOA,EAAQvpB,SAYjBwpB,CAAuCh9B,GAAMgF,SAAQ,SAACi4B,GAEpDJ,EAAUI,GAAuBC,0BAAejlB,EAAUglB,GAAI,MAEzDJ,G,uCCzCHM,GAAsC,CAC1C/6B,gBHwGqC,SAACoR,EAAD,GAAoD,EAAlC5W,QAC/CwF,gBAAkBq4B,EAAuBjnB,IGxGjDnR,SAAU+6B,EACVv3B,KAAMu3B,EACNp3B,SAAUo3B,EACVpgC,aAAcogC,EACd56B,UAAW46B,EACXC,KAAMD,EACNngC,WAAYmgC,EACZlgC,YAAakgC,EACb36B,SAAU26B,EACVp+B,SAAUo+B,EACV16B,KAAM06B,EACNn7B,OAAQm7B,EACR1xB,OAAQ0xB,EACRp7B,SAAUo7B,EACVpvB,aAAcovB,EACdxgC,QAASwgC,EACTz6B,eAAgBy6B,EAChBz3B,UAAWy3B,EACXE,aAAcF,EACdv6B,aAAcu6B,EACdvgC,KAAMugC,EACNp6B,KAAMo6B,GAGFG,GAA0C,CAC9CC,aAAcJ,EACdK,gBAAiBL,EACjBM,SAAUN,EACVO,UAAWP,EACXQ,UH0H+B,SAACpqB,EAAD,GAAoD,EAAlC5W,QACzC0F,UAAYm4B,EAAuBjnB,IG1H3CqqB,WH6GgC,SAACrqB,EAAD,GAAmD,EAAjCvO,OAC3CnD,WAAa0R,GG7GpB4B,QAASgoB,EACTU,YAAaV,EACbW,UAAWX,EACXY,oBAAqBZ,EACrBa,kBHuI+B,SAACzqB,EAAD,GAAqD,IAAnC5W,EAAkC,EAAlCA,QAC5B,KAAjB4W,EAAM9F,SACR9Q,EAAQgZ,UAAYpC,IGxItB0qB,SAAUd,EACVe,YAAaf,EACbgB,uBAAwBhB,EACxBiB,aAAcjB,EACdkB,YHuJ0B,SAAC9qB,EAAekU,GAAgC,IAAD,EACrDlU,EAAM9L,MAAM,KAAKmK,KAAK,IAAInK,MAAM,KAA7C/B,EADkE,oBAEzE4zB,EAAkB5zB,EAAW+hB,GAC7BuT,EAAiBznB,EAAOkU,IGzJxB6W,eAAgBnB,EAChBoB,aAAcpB,EACdqB,YAAarB,EACbsB,eHqH6B,SAAClrB,EAAD,GAAqD,IAAnC5W,EAAkC,EAAlCA,QAC/CA,EAAQ2F,QAAUiR,EAClB5W,EAAQ+F,eAAiBo5B,EAAYvoB,EAAO5W,EAAQgG,YGtHpD+7B,iBH8G+B,SAACnrB,EAAD,GAAqD,IAAnC5W,EAAkC,EAAlCA,QAC5B,KAAjB4W,EAAM9F,SACR9Q,EAAQgG,UAAY4Q,IG/GtBorB,cHwH4B,SAACprB,EAAD,GAAoD,EAAlC5W,QACtC+C,OAAS6T,GGxHjBhS,eAAgB47B,EAChByB,WAAYzB,EACZ0B,YAAa1B,EACbv/B,KAAMu/B,EACN2B,UH4F+B,SAACvrB,EAAD,GAAoD,EAAlC5W,QACzCkG,UAAY0Q,GG5FpBwrB,KH+F0B,SAACxrB,EAAD,GAAoD,EAAlC5W,QACpCmG,KAAO03B,EAAuBjnB,KG7FlCyrB,GAAyC,CAC7CC,KAAM9B,EACN+B,QAAS/B,EACTgC,oBH2IyC,SAAC5rB,EAAekU,GACzDA,EAAO9qB,QAAQa,eAAgB,EAC/B49B,EAA4B7nB,EAAOkU,IG5InC/c,KAAMyyB,EACNiC,YHwH6B,SAAC7rB,EAAekU,GAC7C,GAAc,OAAVlU,GAAmC,KAAjBA,EAAM9F,OAC1Bga,EAAO9qB,QAAQa,eAAgB,MAC1B,CACL,IAAM6hC,EAAe9rB,EAAM9L,MAAM,KACjCyyB,EAAemF,EAAa,GAAI5X,GAChC4S,EAAegF,EAAa,GAAI5X,GAChC6S,EAAe+E,EAAa,GAAI5X,KG9HlC6X,QAASnC,EACToC,MAAOpC,GAGHhkB,GAAsB,0CACvB+jB,IACAI,IACA0B,IAGQ/+B,GAAsB,SAACu/B,IAElCA,EAAYA,EAAUt2B,QAAQ,eAAO,KAGvB2xB,WAAW,OACvB2E,EAAYA,EAAU/3B,MAAM,MAAMnI,MAAM,GAAGsS,KAAK,OAGlD,IAAM6tB,EAAmCC,KAAK9jC,MAAM4jC,EAAW,CAC7Dn1B,QAAQ,EACRs1B,eAAgB,WAIZlhC,EAAqB,CACzBkC,QAAS,IAIHnE,EAAeijC,EAAfjjC,KACA8oB,EADema,EAATG,KACNta,OAyBR,OAtBA9oB,EAAKuI,SAAQ,SAACgP,GAEZ,IAAMpX,EAAUS,oBAAUC,iBACpB+H,EAAsB,GACtBJ,EAAiB5H,oBAAUG,gBAI7B+nB,IACFA,EAAOvgB,SAAQ,SAACwgB,GACd,IAAMhS,EAAQ5H,OAAOoI,EAAOwR,KAC5BA,EAAQA,EAAMrc,QAAQ,MAAO,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,IAAK,OACnEiQ,IACXA,GAAUoM,GAA4BhS,EAAO,CAAEvO,SAAQI,WAAUzI,eAKrEA,EAAQyI,SAAWA,EACnBwQ,GAAoBnX,EAAU9B,EAASqI,OAGpCvG,GAIImX,GAAsB,SAACnX,EAAoB9B,EAAkBqI,GAAoB,IACpFI,EAAazI,EAAbyI,SAKRzI,EAAQyI,SAAWA,EAASmE,QAAO,SAAClE,GAAa,IAAD,EAC9C,OAAO,UAAAA,EAAQO,YAAR,eAAc3H,QAAS,GAAKoH,EAAQU,SAAW,KAIxD,IAAM85B,EAAiB7yB,aAAUvO,EAAUuG,EAAOjD,SAAUiD,EAAOhD,QAGnE,GAAI69B,EAAgB,CAClB,IAAMC,EAAsBrhC,EAASkC,QAAQzB,QAAQ2gC,GAC/CE,EAAkB5yB,aACtB1O,EACAuG,EAAOjD,SACPiD,EAAOhD,OACPrF,EAAQsG,OACRtG,EAAQC,KACRD,EAAQM,YACRN,EAAQG,qBAeV,GAXA2B,EAASkC,QAAQm/B,GAAuBn+B,0CAA+Bk+B,EAAgB76B,GACnFA,EAAOvC,OAAShE,EAASkC,QAAQm/B,GAAqBr9B,OACxD9F,EAAQ8F,KAAOuC,EAAOvC,MAIpBuC,EAAOvC,OAAShE,EAASkC,QAAQm/B,GAAqBr9B,OACxD9F,EAAQ8F,KAAOuC,EAAOvC,MAIpBs9B,EAAiB,CACnB,IAAMC,EAAuBvhC,EAASkC,QAAQm/B,GAAqB56B,SAAShG,QAC1E6gC,GAEIE,EAActjC,EAAQyI,SAG5B3G,EAASkC,QAAQm/B,GAAqB56B,SACpC86B,GACE/9B,2CAAgC89B,EAAiBpjC,GAGrDsjC,EAAYl7B,SAAQ,SAACyZ,GACnB,IAAI0hB,GAAgB,EACpBzhC,EAASkC,QAAQm/B,GAAqB56B,SAAS86B,GAAsB56B,SAASL,SAC5E,SAACmK,IAEMgxB,GAAiBhzB,kBAAQsR,EAAYtP,KACxCgxB,GAAgB,MAIjBA,IACHzhC,EAASkC,QAAQm/B,GAAqB56B,SACpC86B,GACA56B,SAAW3G,EAASkC,QAAQm/B,GAAqB56B,SACjD86B,GACA56B,SAAS+6B,OAAO3hB,YAMtB/f,EAASkC,QAAQm/B,GAAqB56B,SAASS,KAAKhJ,QAKtDqI,EAAOE,SAASS,KAAKhJ,GACrB8B,EAASkC,QAAQgF,KAAKX,GAExB,OAAOvG,GCrNI4tB,GAAqB,CAChC,CACEK,IACE,0IACFjqB,KAAM,iBACNwf,MACE,yGACFC,QAAS,6BAEX,CACEwK,IACE,iKACFjqB,KAAM,gBACNwf,MACE,yGACFC,QAAS,mCAEX,CACEwK,IACE,mJACFjqB,KAAM,oBACNwf,MACE,yGACFC,QAAS,+BAEX,CACEwK,IACE,8KACFjqB,KAAM,+BACNwf,MACE,wGACFC,QAAS,2DAEX,CACEwK,IACE,8LACFjqB,KAAM,0BACNwf,MAAO,6EACPC,QAAS,sDC3CApa,GAAY,SAAImB,GAC3B,OAAOvL,OAAOob,KAAK7P,GAAGpL,KAAI,SAACuiC,GACzB,OAAOn3B,EAAEm3B,OAMA38B,GAAS,aAKTw5B,GAAiB,SAACjlB,EAAqBpU,GAClD,OAAOy8B,YAASxiC,IAAIma,GAA2B,SAACsoB,GAC9C,OAAY,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOvgC,KAAK6D,eAAgBA,EAAc08B,EAAQ,SCbhD3oB,GAA0B,SAAClZ,GACtC,IAAM8hC,EAAajI,OAAO,SACtBkI,EACF,8eAkGF,OAjGA/hC,EAASkC,QAAQoE,SAAQ,SAACC,GACxBA,EAAOE,SAASH,SAAQ,SAACpI,GAAa,IAAD,gCAE/B0+B,EACAoF,EACAC,EAAiB,GACjBC,EAAkB,GAClBC,EAA0B,GAC1BC,EAAgB,GAChBC,EAAwB,GACxBC,EAA4B,GAC5BC,EAAc,GACdC,EAAgB,GAChBC,EAAqB,GACrBC,EAAkB,GAClBC,EAAU,GACVC,EAAS,GACTC,EAAU,GACVC,EAAS,GACTC,EAAW,GACXC,EAAS,GACb9kC,EAAQyI,SAASL,SAAQ,SAACM,GAAa,IAAD,EACpCg2B,EAAc51B,IAAOJ,EAAQK,UAAW,UACxC+6B,EAAYpF,EAAYqG,QAAQ57B,IAAIT,EAAQU,SAAU,WAClDs1B,EAAYC,WACdoF,GAAkBiB,GAAkBtG,EAAaoF,GACjDE,GAAe,UAAOtF,EAAY/yB,OAAO,UAA1B,MACfs4B,GAAuB,UAAOvF,EAAY/yB,OAAO,WAA1B,MACvBu4B,GAAa,UAAOJ,EAAUn4B,OAAO,UAAxB,MACbw4B,GAAqB,UAAOL,EAAUn4B,OAAO,WAAxB,QAErBo4B,GAAkB,KAClBC,GAAmB,KACnBC,GAA2B,KAC3BC,GAAiB,KACjBC,GAAyB,MAE3BC,GAAyB,UAAO17B,EAAQU,SAAf,MACrBV,EAAQtG,UAAYsG,EAAQtG,SAAS4L,WACvCq2B,GAAW,UAAO37B,EAAQtG,SAAS4L,SAAxB,MACXs2B,GAAa,UAAO57B,EAAQtG,SAAS8L,WAAxB,MACbq2B,GAAsB77B,EAAQtG,SAAS8L,WAAjB,UACf3E,aAAkBb,EAAQtG,UADX,gBAEfsG,EAAQtG,SAAS4L,SAFF,OAIxBw2B,GAAe,oBAAO97B,EAAQtG,SAASgP,oBAAxB,QAAwC,GAAxC,MACfqzB,GAAO,UAAO/7B,EAAQO,KAAKgM,KAAK,IAAzB,MACPyvB,GAAM,UAAOh8B,EAAQO,KAAK7H,SAASiD,MAAIE,QAAU,IAAM,GAAjD,MACNogC,GAAO,UAAOj8B,EAAQO,KAAK7H,SAASiD,MAAIG,SAAW,IAAM,GAAlD,MACPogC,GAAM,UAAOl8B,EAAQO,KAAK7H,SAASiD,MAAII,WAAa,IAAM,GAApD,MACNogC,GAAQ,UAAOn8B,EAAQO,KAAK7H,SAASiD,MAAIK,UAAY,KAAO,GAApD,MACRogC,GAAM,UAAOp8B,EAAQO,KAAK7H,SAASiD,MAAIM,QAAU,IAAM,GAAjD,SAGRo/B,EAAiBA,EAAephC,MAAM,GAAI,GAC1CqhC,EAAkBA,EAAgBrhC,MAAM,GAAI,GAC5CshC,EAA0BA,EAAwBthC,MAAM,GAAI,GAC5DuhC,EAAgBA,EAAcvhC,MAAM,GAAI,GACxCwhC,EAAwBA,EAAsBxhC,MAAM,GAAI,GACxDyhC,EAA4BA,EAA0BzhC,MAAM,GAAI,GAChE0hC,EAAcA,EAAY1hC,MAAM,GAAI,GACpC2hC,EAAgBA,EAAc3hC,MAAM,GAAI,GACxC4hC,EAAqBA,EAAmB5hC,MAAM,GAAI,GAClD6hC,EAAkBA,EAAgB7hC,MAAM,GAAI,GAC5C8hC,EAAUA,EAAQ9hC,MAAM,GAAI,GAC5B+hC,EAASA,EAAO/hC,MAAM,GAAI,GAC1BgiC,EAAUA,EAAQhiC,MAAM,GAAI,GAC5BiiC,EAASA,EAAOjiC,MAAM,GAAI,GAC1BkiC,EAAWA,EAASliC,MAAM,GAAI,GAC9BmiC,EAASA,EAAOniC,MAAM,GAAI,GAE1B,IAAMsiC,EAAUC,GAAYllC,GACtBmlC,EAAc,UAAM98B,EAAOjD,SAAS9D,OAAS+G,EAAOjD,SAAS,GAAK,GAApD,YAClBiD,EAAOhD,OADW,YAEhBrF,EAAQsG,QACN8+B,EAAqBxB,EAAW/rB,KAAKxP,EAAOhD,OAAO,IAA9B,UAAuCgD,EAAOhD,OAAO,GAArD,MAA8D,GAGzFw+B,GAAM,qBAAQx7B,EAAOnD,kBAAf,QAA6B,GAA7B,aAAoC+/B,EAApC,sBAA+CjlC,EAAQkG,iBAAvD,QAAoE,GAApE,sBACJlG,EAAQoG,YADJ,QACY,GADZ,aAED++B,EAFC,cAEmB98B,EAAOjD,SAAS6P,KAAK,MAFxC,aAEkD5M,EAAOhD,OAFzD,YAGJrF,EAAQsG,OAHJ,YAIF8+B,EAJE,YAIoBplC,EAAQiG,cAAgB,EAAIjG,EAAQiG,aAAe,GAJvE,YAKJjG,EAAQI,cAAgB,EAAIJ,EAAQI,aAAe,GAL/C,sBAMFJ,EAAQmG,YANN,QAMc,GANd,sBAMoBnG,EAAQ0F,iBAN5B,QAMyC,GANzC,sBAM+C1F,EAAQ6F,gBANvD,QAMmE,GANnE,sBAOJ7F,EAAQ4F,iBAPJ,QAOiB,GAPjB,uBAQD4+B,SARC,QAQkB,GARlB,cAQ0BD,EAR1B,cAQkDE,EARlD,cAQ+DV,EAR/D,uBASJ/jC,EAAQgG,iBATJ,QASiB,GATjB,sBAUFhG,EAAQ2F,eAVN,QAUiB,GAVjB,sBAWJ3F,EAAQ+F,sBAXJ,QAWsB,GAXtB,aAYDs+B,EAZC,cAYgBC,EAZhB,cAYmCN,EAZnC,cAYwDC,EAZxD,cAYqFG,EAZrF,cAYoHF,EAZpH,cAYuIC,EAZvI,cAYkKO,EAZlK,cAY8KC,EAZ9K,cAY2LC,EAZ3L,cAYuMC,EAZvM,cAYqNC,EAZrN,wBAaJ9kC,EAAQ8F,YAbJ,QAaYuC,EAAOvC,KAbnB,cAcA9F,EAAQM,YAAY2U,KAAK,MAdzB,wBAcoCjV,EAAQ+C,cAd5C,QAcsD,GAdtD,wBAeJ/C,EAAQG,2BAfJ,QAe2B,GAf3B,wBAgBAH,EAAQyF,gBAhBR,QAgBoB,GAhBpB,wBAgB4BzF,EAAQgZ,iBAhBpC,QAgBiD,GAhBjD,aAmBH6qB,GAGImB,GAAoB,SAACtG,EAAqBoF,GACrD,MAAM,GAAN,OAAUpF,EAAY/yB,OAAO,SAA7B,cAA2Cm4B,EAAUn4B,OAAO,SAA5D,OAGWu5B,GAAc,SAACllC,GAC1B,GAAIqB,MAAM2P,QAAQhR,EAAQC,MAAO,CAC/B,GAA4B,IAAxBD,EAAQC,KAAKqB,OACf,MAAO,GAET,IAAI+jC,EAAW,IAIf,OAHAj9B,kBAAQpI,EAAQC,MAAM,SAACA,GACrBolC,GAAQ,UAAOC,GAAWtlC,EAAQoG,KAAMnG,GAAhC,SAEJ,GAAN,OAAUolC,EAAS1iC,MAAM,GAAI,GAA7B,KAEF,OAAO2iC,GAAWtlC,EAAQoG,KAAMpG,EAAQC,OAGpCqlC,GAAa,SAACl/B,EAAuBnG,GACzC,OAAOmG,EAAI,UAEW,kBAATA,EACHnG,IAASgB,OAAK2G,KACZoH,OAAO5I,GAAMzD,OAAO,GACpBqM,OAAO5I,EAAO,GAAGzD,OAAO,GAC1B1C,IAASgB,OAAK2G,KACdoH,OAAO+C,OAAM,OAAC3L,QAAD,IAACA,OAAD,EAACA,EAAMzD,OAAO,IAAM,GADjC,OAEAyD,QAFA,IAEAA,OAFA,EAEAA,EAAMzD,OAAO,GARZ,YASH1C,GACJA,GCrIO6a,GAAiC,SAAChZ,GAC7C,IAAMyjC,EAAY,mDACd1B,EAAS0B,EAiBb,OAhBAzjC,EAASkC,QAAQoE,SAAQ,SAACC,GAEjBA,EAAOjD,SAAS9D,QAAU+G,EAAOjD,SAAS,IAAOiD,EAAOhD,QAC7DgD,EAAOE,SAASH,SAAQ,SAACpI,GAEvB,IAAMilC,EAAUC,uBAAYllC,GAI5B6jC,GAAM,UAAOoB,EAAP,YAAkBjlC,EAAQG,oBAA1B,YAAiDH,EAAQI,aAAaolC,QAC1E,GADI,aAEAxlC,EAAQM,YAAY2U,KAAK,MAFzB,aAOR4uB,IAAW0B,EACN1B,EAEF,IAKIjpB,GAAsB,SAAC9Y,GAClC,IAAI+hC,EAAS,mFA6Cb,OA5CA/hC,EAASkC,QAAQoE,SAAQ,SAACC,IAEnBA,EAAOjD,SAAS9D,QAAU+G,EAAOjD,SAAS,IAAOiD,EAAOhD,SAC3DgD,EAAOE,SAASH,SAAQ,SAACpI,GAAa,IAAD,EAE/B0+B,EACAoF,EACAC,EAAiB,GACjBQ,EAAqB,GACrBE,EAAU,GACdzkC,EAAQyI,SAASL,SAAQ,SAACM,GACxBg2B,EAAc51B,IAAOJ,EAAQK,UAAW,UACxC+6B,EAAYpF,EAAYqG,QAAQ57B,IAAIT,EAAQU,SAAU,WAClDs1B,EAAYC,UACdoF,GAAkBiB,6BAAkBtG,EAAaoF,GAEjDC,GAAkB,KAEpBQ,GAAsB77B,EAAQtG,SAAS8L,WAAjB,UACf3E,6BAAkBb,EAAQtG,UADX,gBAEfsG,EAAQtG,SAAS4L,SAFF,MAGtBy2B,GAAO,UAAO/7B,EAAQO,KAAKgM,KAAK,IAAzB,SAGT8uB,EAAiBA,EAAephC,MAAM,GAAI,GAC1C4hC,EAAqBA,EAAmB5hC,MAAM,GAAI,GAClD8hC,EAAUA,EAAQ9hC,MAAM,GAAI,GAE5B,IAAMsiC,EAAUC,uBAAYllC,GACtBmlC,EAAc,UAAM98B,EAAOjD,SAAS9D,OAAS+G,EAAOjD,SAAS,GAAK,GAApD,YAClBiD,EAAOhD,OADW,YAEhBrF,EAAQsG,QAGZu9B,GAAM,UAAOoB,EAAP,aAAmBE,EAAnB,aAAsCnlC,EAAQiG,aAAau/B,QAC/D,GADI,YAEDxlC,EAAQI,aAAaolC,QACxB,GAHI,aAIAjB,EAJA,cAIwBE,EAJxB,cAIqCV,EAJrC,wBAKJ/jC,EAAQ8F,YALJ,QAKYuC,EAAOvC,KALnB,cAMA9F,EAAQM,YAAY2U,KAAK,MANzB,aAUL4uB,K","file":"static/js/main.8862205b.chunk.js","sourcesContent":["// Note: Shout-out to CQL/Benchmark which was referenced while writing this\n\n/**\n * Get value from localStorage\n * @param key id for localStorage\n * @returns item with \"key\"\n */\nexport const loadLocal = <T>(key: string) => {\n  const item: string | null = localStorage.getItem(key);\n  return item ? (JSON.parse(item) as T) : undefined;\n};\n\n/**\n * Save item to localStorage\n * @param key id for localStorage\n * @param item value for key\n */\nexport const saveLocal = <T>(key: string, item: T | undefined) => {\n  if (item === undefined) localStorage.removeItem(key);\n  else localStorage.setItem(key, JSON.stringify(item));\n};\n\n/**\n * Delete item from localStorage\n * @param key id for localStorage\n */\nexport const removeLocal = (key: string) => {\n  localStorage.removeItem(key);\n};\n\n/** Hook provides callback functions to load, remove, and save\n *   values in localStorage.\n */\nexport const useLocal = <T>(key: string) => {\n  const load = () => {\n    return loadLocal<T>(key);\n  };\n  const save = (item: T) => {\n    saveLocal(key, item);\n  };\n  const remove = () => {\n    removeLocal(key);\n  };\n  return { load, remove, save };\n};\n","import { cloneDeep, map } from \"lodash\";\nimport { Course, CourseSectionMeeting, NonTeachingLoadInput, Section, Term } from \"utilities\";\nimport { emptyCourse, emptySection } from \"utilities/constants\";\n\nexport type CheckboxTerms = (Term | boolean)[];\n\nexport const mapNonTeachingLoadValuesToInput = (\n  data?: CourseSectionMeeting,\n): NonTeachingLoadInput => {\n  const terms = addFalseToTermsCheckboxList(data?.section.term as Term[]);\n\n  return {\n    activity: data?.section.instructionalMethod ?? \"\",\n    facultyHours:\n      data?.section.facultyHours !== undefined && data.section.facultyHours > -1\n        ? data.section.facultyHours\n        : undefined,\n    instructor: data?.section.instructors ?? [],\n    terms,\n  };\n};\n\nexport const mapNonTeachingLoadInput = (data: NonTeachingLoadInput) => {\n  const newSection: Section = cloneDeep(emptySection);\n  const newCourse: Course = cloneDeep(emptyCourse);\n  newSection.instructionalMethod = data.activity;\n  newSection.facultyHours = data.facultyHours ?? 0;\n  newSection.instructors = data.instructor;\n  newSection.isNonTeaching = true;\n  newSection.term = data.terms as Term[];\n  return { newCourse, newSection };\n};\n\nexport const addFalseToTermsCheckboxList = (terms?: Term[]): CheckboxTerms => {\n  const termValues = Object.values(Term);\n  if (!terms) {\n    return new Array(termValues.length).fill(false);\n  }\n  return map(termValues, (t) => {\n    return terms.includes(t) ? t : false;\n  });\n};\n","import { useContext } from \"react\";\nimport { csvStringToSchedule, getCSVFromXLSXData, updateScheduleInContext } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\n\nexport const getCSVStr = \"?csv=\";\nconst getXLSXStr = \"?xlsx=\";\n\nexport const useImportRemoteFile = () => {\n  const appContext = useContext(AppContext);\n  const {\n    appState: { schedule, fileUrl },\n    appDispatch,\n    setIsCSVLoading,\n  } = appContext;\n\n  // Load a file from the GET parameters (either ?csv= or ?xlsx=)\n  // only do this once for each page refresh, then redirect to the page without the GET params\n  // this will erase existing work!\n  // Ref: https://stackoverflow.com/questions/56663785/invalid-hook-call-hooks-can-only-be-called-inside-of-the-body-of-a-function-com\n  // Ref: https://www.gitmemory.com/issue/SheetJS/js-xlsx/1110/531003740\n  const importRemoteFile = () => {\n    // eslint-disable-next-line no-restricted-globals\n    const url = location.href;\n    // TODO: We'll need to be more careful about this if we end up using more GET params\n    const csvIndex = url.indexOf(getCSVStr);\n    const xlsxIndex = url.indexOf(getXLSXStr);\n    if (csvIndex !== -1) {\n      loadRemoteCSV(url, csvIndex, appContext);\n    } else if (xlsxIndex !== -1) {\n      const xlsxUrl = url.slice(xlsxIndex + getXLSXStr.length);\n      if (xlsxUrl !== \"\" && xlsxUrl !== fileUrl) {\n        setIsCSVLoading(true);\n        fetch(xlsxUrl)\n          .then((response) => {\n            if (response.status === 404) {\n              return null;\n            }\n            return response.arrayBuffer();\n          })\n          .then(async (result) => {\n            appDispatch({ payload: { fileUrl: xlsxUrl }, type: \"setFileUrl\" });\n            if (result) {\n              const newSchedule = csvStringToSchedule(\n                getCSVFromXLSXData(result as ArrayBufferLike),\n              );\n              await updateScheduleInContext(schedule, newSchedule, appDispatch);\n            }\n            clearSearchParams();\n            setIsCSVLoading(false);\n          });\n      } else {\n        clearSearchParams();\n      }\n    }\n  };\n\n  return { importRemoteFile };\n};\n\nconst clearSearchParams = () => {\n  // eslint-disable-next-line no-restricted-globals\n  location.href = \"\";\n};\n\n/**\n * Will take a url and load a schedule if it is a hosted schedule csv\n * @param url the url string\n * @param csvIndex the index of the csv url\n * @param appContext the context of the schedulizer app\n */\nexport const loadRemoteCSV = (url: string, csvIndex: number, appContext: AppContext) => {\n  const {\n    appState: { schedule, fileUrl },\n    appDispatch,\n    setIsCSVLoading,\n  } = appContext;\n\n  const csvUrl = url.slice(csvIndex + getCSVStr.length);\n  if (csvUrl !== \"\" && csvUrl !== fileUrl) {\n    setIsCSVLoading(true);\n    fetch(csvUrl)\n      .then((response) => {\n        if (response.status === 404) {\n          return null;\n        }\n        return response.text();\n      })\n      .then(async (result) => {\n        appDispatch({ payload: { fileUrl: csvUrl }, type: \"setFileUrl\" });\n        if (result) {\n          const newSchedule = csvStringToSchedule(result);\n          await updateScheduleInContext(schedule, newSchedule, appDispatch);\n        }\n        clearSearchParams();\n        setIsCSVLoading(false);\n      });\n  } else {\n    clearSearchParams();\n  }\n};\n","import create, { GetState, SetState, State } from \"zustand\";\n\n/**\n * A hook to get access to a global store storing all values related to the\n *   forms on the Harmony page. Replacement for Context Providers and Reducers.\n *\n * ref: https://dev.to/karanpratapsingh/simplify-your-store-a-brief-introduction-to-zustand-250h\n */\nexport const useHarmonyFormsStore = create<HarmonyFormsState>(\n  (set: SetState<HarmonyFormsState>, get: GetState<HarmonyFormsState>) => {\n    return {\n      courses: [],\n      professors: [],\n      rooms: [],\n      times: [],\n      update: (key, data) => {\n        set({ [key]: data });\n      },\n    };\n  },\n);\n\n/** Adds functions to accessors */\nexport interface HarmonyFormsState extends HarmonyFormsAccessors {\n  update: (key: keyof HarmonyFormsAccessors, data: { [key: string]: string }[]) => void;\n}\n\n/** labels to retrieve data */\nexport interface HarmonyFormsAccessors extends State {\n  courses: SingularAccessors[\"course\"][];\n  professors: SingularAccessors[\"professor\"][];\n  rooms: SingularAccessors[\"room\"][];\n  times: SingularAccessors[\"time\"][];\n}\n\n/** Helper types */\nexport interface SingularAccessors {\n  course: { Course: string };\n  professor: { First: string; Last: string };\n  room: { Room: string };\n  time: { Time: string };\n}\n","/* eslint-disable typescript-sort-keys/string-enum */\n\nexport enum Day {\n  Monday = \"M\",\n  Tuesday = \"T\",\n  Wednesday = \"W\",\n  Thursday = \"TH\",\n  Friday = \"F\",\n  Saturday = \"S\",\n  Sunday = \"SU\",\n}\n\nexport enum Weekday {\n  Monday = Day.Monday,\n  Tuesday = Day.Tuesday,\n  Wednesday = Day.Wednesday,\n  Thursday = Day.Thursday,\n  Friday = Day.Friday,\n}\n","/* eslint-disable typescript-sort-keys/string-enum */\nimport { Day, SemesterLength, Term } from \".\";\n\nexport interface Location {\n  building: string;\n  roomCapacity?: number;\n  roomNumber: string;\n}\n\nexport interface Meeting {\n  // All days on which the given Meeting time and room is applicable\n  days: Day[];\n  // In minutes (usually 50)\n  duration: number;\n  isConflict?: boolean;\n  location: Location;\n  // Like \"8:00 AM\" or \"12:30 PM\"\n  startTime: string;\n}\n\nexport type Prefix = string;\n\n// If new non-identifying fields are added to this interface, must update updateNonIdentifyingCourseInfo()\n// If new identifying fields are added to this interface, must update updateIdentifyingCourseInfo()\nexport interface Course {\n  department?: string;\n  name: string;\n  number: string;\n  prefixes: Prefix[];\n  sections: Section[];\n}\n\n// Updates all Course fields except for:\n// - Identifying Fields: used for finding a Course in getCourse()\n//                       includes: prefixes, number\n// - Sections: if this field is changed, new sections are added and/or old ones deleted\n// - Name: this is handled on the Section level instead\nexport const updateNonIdentifyingCourseInfo = (oldCourse: Course, newCourse: Course): Course => {\n  oldCourse.department = newCourse.department;\n  return oldCourse;\n};\n\n// Updates all identifying Course fields\n//  includes: prefixes, number\nexport const updateIdentifyingCourseInfo = (oldCourse: Course, newCourse: Course): Course => {\n  oldCourse.prefixes = newCourse.prefixes;\n  oldCourse.number = newCourse.number;\n  return oldCourse;\n};\n\nexport type Instructor = string;\n\n// If new non-identifying fields are added to this interface, must update updateNonIdentifyingSectionInfo()\n// If new identifying fields are added to this interface, must update updateIdentifyingSectionInfo()\nexport interface Section {\n  anticipatedSize?: number;\n  comments?: string;\n  // Number of students enrolled in this section 10 days into the course\n  day10Used?: number;\n  // Like 2/3/2020\n  endDate?: string;\n  facultyHours: number;\n  globalMax?: number;\n  instructionalMethod?: string;\n  instructors: Instructor[];\n  isNonTeaching?: boolean;\n  letter: string;\n  localMax?: number;\n  // Multiple Meetings possible if time/room differs on different days\n  // Asynchronous classes should have an empty array of meeting times\n  meetings: Meeting[];\n  name?: string;\n  semesterLength?: SemesterLength;\n  // Like 5/21/2020\n  startDate?: string;\n  status?: string;\n  studentHours: number;\n  term: Term | Term[];\n  // Like 9/3/2019\n  termStart?: string;\n  timestamp?: string;\n  // Number of students enrolled in this section at the end of the course\n  used?: number;\n  year?: number | string;\n}\n\n// Updates all Section fields except for:\n// - Identifying Fields: used for finding a Section in getSection()\n//                       includes: letter, term, instructors, instructionalMethod\n// - Meetings: if this field is changed, new meetings are added and/or old ones deleted\nexport const updateNonIdentifyingSectionInfo = (\n  oldSection: Section,\n  newSection: Section,\n): Section => {\n  oldSection.anticipatedSize = newSection.anticipatedSize;\n  oldSection.comments = newSection.comments;\n  oldSection.day10Used = newSection.day10Used;\n  oldSection.endDate = newSection.endDate;\n  oldSection.facultyHours = newSection.facultyHours;\n  oldSection.globalMax = newSection.globalMax;\n  oldSection.isNonTeaching = newSection.isNonTeaching;\n  oldSection.localMax = newSection.localMax;\n  oldSection.name = newSection.name;\n  oldSection.semesterLength = newSection.semesterLength;\n  oldSection.startDate = newSection.startDate;\n  oldSection.status = newSection.status;\n  oldSection.studentHours = newSection.studentHours;\n  oldSection.termStart = newSection.termStart;\n  oldSection.used = newSection.used;\n  oldSection.year = newSection.year;\n  return oldSection;\n};\n\n// Updates all identifying Section fields\n//  includes: letter, term, instructors, instructionalMethod\nexport const updateIdentifyingSectionInfo = (oldSection: Section, newSection: Section): Section => {\n  oldSection.letter = newSection.letter;\n  oldSection.term = newSection.term;\n  oldSection.instructors = newSection.instructors;\n  oldSection.instructionalMethod = newSection.instructionalMethod;\n  return oldSection;\n};\n\nexport interface Schedule {\n  courses: Course[];\n}\n\nexport interface CourseSectionMeeting {\n  course: Course;\n  meeting: Meeting;\n  section: Section;\n}\n","/* eslint-disable typescript-sort-keys/string-enum */\n\nexport enum Term {\n  Fall = \"FA\",\n  Interim = \"IN\", // TODO: Remove?\n  Spring = \"SP\",\n  Summer = \"SU\", // TODO: Is this a thing?\n}\n\nexport enum SemesterLength {\n  Full = \"Full\",\n  HalfFirst = \"First\",\n  HalfSecond = \"Second\",\n  IntensiveA = \"A\",\n  IntensiveB = \"B\",\n  IntensiveC = \"C\",\n  IntensiveD = \"D\",\n}\n\nexport enum Half {\n  First = SemesterLength.HalfFirst,\n  Second = SemesterLength.HalfSecond,\n}\n\nexport enum Intensive {\n  A = SemesterLength.IntensiveA,\n  B = SemesterLength.IntensiveB,\n  C = SemesterLength.IntensiveC,\n  D = SemesterLength.IntensiveD,\n}\n\nexport enum SemesterLengthOption {\n  FullSemester = \"Full\",\n  HalfSemester = \"Half\",\n  IntensiveSemester = \"Intensive\",\n  CustomSemester = \"Custom\",\n}\n","import { createContext, Dispatch, SetStateAction } from \"react\";\nimport { AppAction, AppState, initialAppState, voidFn } from \"utilities\";\n\nexport interface AppContext {\n  appDispatch: Dispatch<AppAction> | (() => void);\n  appState: AppState;\n  isCSVLoading: boolean;\n  setIsCSVLoading: Dispatch<SetStateAction<AppContext[\"isCSVLoading\"]>> | (() => void);\n}\n\n/* Used for containing the global state of the app\n  and a dispatcher to perform updates against the\n  state of the app.\n*/\nexport const AppContext = createContext<AppContext>({\n  appDispatch: voidFn,\n  appState: initialAppState,\n  isCSVLoading: false,\n  setIsCSVLoading: voidFn,\n});\nAppContext.displayName = \"AppContext\";\n","import { createContext, Dispatch, SetStateAction } from \"react\";\nimport { voidFn } from \"utilities\";\n\ninterface ScheduleContext {\n  isScheduleLoading: boolean;\n  setIsScheduleLoading:\n    | Dispatch<SetStateAction<ScheduleContext[\"isScheduleLoading\"]>>\n    | (() => void);\n}\n\n/* Provide a context for each Schedule (Faculty, Room, etc.) */\nexport const ScheduleContext = createContext<ScheduleContext>({\n  isScheduleLoading: false,\n  setIsScheduleLoading: voidFn,\n});\n","import { loadLocal } from \"utilities/hooks/useLocal\";\nimport { HarmonyClass } from \"utilities/services\";\nimport { Schedule, Term } from \"./dataInterfaces\";\n\nexport enum ColorBy {\n  Level,\n  Room,\n  Instructor,\n  Prefix,\n}\n\nexport enum SchedulizerTab {\n  Faculty = 0,\n  Room,\n  Loads,\n  Conflicts,\n}\n\n// structure for the global app state\nexport interface AppState {\n  classes: HarmonyClass[];\n  colorBy: ColorBy;\n  departments: string[];\n  fileUrl: string;\n  professors: string[];\n  rooms: string[];\n  schedule: Schedule;\n  schedulizerTab: SchedulizerTab;\n  selectedTerm: Term;\n  slotMaxTime: string;\n  slotMinTime: string;\n  times: string[];\n}\n\n// Defaults for the app state when it launches, will try to load\n//  previous appState to launch app from.\n//  If no previous state saved, will default to the object below.\nexport const initialAppState: AppState = loadLocal(\"appState\") || {\n  classes: [],\n  colorBy: 0,\n  departments: [],\n  fileUrl: \"\",\n  professors: [],\n  rooms: [],\n  schedule: { courses: [] },\n  schedulizerTab: 0,\n  selectedTerm: Term.Fall,\n  slotMaxTime: \"22:00\",\n  slotMinTime: \"6:00\",\n  times: [],\n};\n\n// Ensure that these aren't undefined if they didn't exist in the previous app state\nif (!initialAppState.classes) {\n  initialAppState.departments = [];\n}\nif (!initialAppState.departments) {\n  initialAppState.departments = [];\n}\nif (!initialAppState.professors) {\n  initialAppState.departments = [];\n}\nif (!initialAppState.rooms) {\n  initialAppState.departments = [];\n}\n\n// structure of actions that can be sent to app dispatch\nexport interface AppAction {\n  payload: Partial<AppState>;\n  type: \"setScheduleData\" | \"setSelectedTerm\" | \"setFileUrl\" | \"setColorBy\" | \"setSchedulizerTab\"; // add | to add more actions in the future\n}\n","import { forEach } from \"lodash\";\nimport * as AllMoment from \"moment\";\nimport moment, { Moment } from \"moment\";\nimport { extendMoment } from \"moment-range\";\nimport { Day, getLocationString, getSectionName, Schedule, Section } from \"utilities\";\nimport { Instructor } from \"utilities/interfaces\";\n\nconst { range } = extendMoment(AllMoment);\n\ninterface ConflictData {\n  days: Day[];\n  endTime: Moment;\n  indexes: number[];\n  instructors: Section[\"instructors\"];\n  room: string;\n  sectionName: string;\n  startTime: Moment;\n  term: Section[\"term\"];\n}\n\nexport const findConflicts = (schedule: Schedule): Schedule => {\n  // flatten the schedule into a single array with just the data being checked for conflicts\n  const dataToCheck: ConflictData[] = [];\n  forEach(schedule.courses, (course, courseIndex) => {\n    forEach(course.sections, (section, sectionIndex) => {\n      forEach(section.meetings, (meeting, meetingIndex) => {\n        meeting.isConflict = false;\n        const startTimeMoment = moment(meeting.startTime, \"h:mm A\");\n        dataToCheck.push({\n          days: meeting.days,\n          endTime: moment(startTimeMoment).add(meeting.duration, \"minutes\"),\n          indexes: [courseIndex, sectionIndex, meetingIndex],\n          instructors: section.instructors,\n          room: getLocationString(meeting.location),\n          sectionName: getSectionName(course, section),\n          startTime: startTimeMoment,\n          term: section.term,\n        });\n      });\n    });\n  });\n\n  // loop through each pair of meetings and mark conflicts\n  forEach(dataToCheck, (meeting1, i) => {\n    forEach(dataToCheck, (meeting2, j) => {\n      const range1 = range(meeting1.startTime, meeting1.endTime);\n      const range2 = range(meeting2.startTime, meeting2.endTime);\n      const meeting2IncludesDay = (day: Day) => {\n        return meeting2.days.includes(day);\n      };\n      const meeting2IncludesInstructor = (instructor: Instructor) => {\n        return meeting2.instructors.includes(instructor);\n      };\n\n      if (\n        i !== j &&\n        range1.overlaps(range2) &&\n        meeting1.term === meeting2.term &&\n        meeting1.days.some(meeting2IncludesDay) &&\n        (meeting1.instructors.some(meeting2IncludesInstructor) ||\n          meeting1.room === meeting2.room) &&\n        meeting1.sectionName !== meeting2.sectionName\n      ) {\n        const [ci1, si1, mi1] = meeting1.indexes;\n        const [ci2, si2, mi2] = meeting2.indexes;\n        schedule.courses[ci1].sections[si1].meetings[mi1].isConflict = true;\n        schedule.courses[ci2].sections[si2].meetings[mi2].isConflict = true;\n      }\n    });\n  });\n  return schedule;\n};\n","import { EventInput } from \"@fullcalendar/react\";\nimport { ScheduleBaseProps } from \"components\";\nimport { filter, flatten, forEach, forOwn, map, maxBy, minBy, range } from \"lodash\";\nimport moment from \"moment\";\nimport hash from \"object-hash\";\nimport randomColor from \"randomcolor\";\nimport { enumArray } from \"utilities\";\nimport { INITIAL_DATE } from \"utilities/constants\";\nimport { ColorBy, Day, Location, Meeting, Schedule, Section, Term } from \"utilities/interfaces\";\nimport { findConflicts } from \"./conflictsService\";\n\n// Returns a list of hours to display on the Schedule\n// TODO: add better types for timing, maybe: https://stackoverflow.com/questions/51445767/how-to-define-a-regex-matched-string-type-in-typescript\nexport const getHoursArr = (min: string, max: string): number[] => {\n  const minHour = parseInt(min.split(\":\")[0]);\n  const maxHour = parseInt(max.split(\":\")[0]);\n  return range(minHour, maxHour);\n};\n\nexport interface GroupedEvents {\n  [key: string]: EventInput[];\n}\n\nconst eventExistsInEventList = (event: EventInput, eventList: EventInput[]): boolean => {\n  return eventList.some((e) => {\n    return (\n      e.title === event.title &&\n      e.start === event.start &&\n      e.end === event.end &&\n      e.term === event.term\n    );\n  });\n};\n\n// TODO: Add events with no meeting times as all day\nexport const getEvents = (\n  schedule: Schedule,\n  groups: \"faculty\" | \"room\" | \"department\",\n): GroupedEvents => {\n  const events: GroupedEvents = {};\n  const days: Day[] = enumArray(Day);\n  const scheduleWithConflicts = findConflicts(schedule);\n  forEach(scheduleWithConflicts.courses, (course) => {\n    const dept = course.department ? course.department : \"No Department\";\n    forEach(course.sections, (section) => {\n      const sectionName = `${course.prefixes[0]}-${course.number}-${section.letter}`;\n      forEach(section.instructors, (prof) => {\n        forEach(section.meetings, (meeting) => {\n          const room = getLocationString(meeting.location);\n          const className = createEventClassName(sectionName, room, prof);\n          let group = \"\";\n          if (groups === \"faculty\") {\n            group = prof;\n          } else if (groups === \"room\") {\n            group = room;\n          } else {\n            group = dept;\n          }\n          const startTimeMoment = moment(meeting.startTime, \"h:mm A\");\n          const endTimeMoment = moment(startTimeMoment).add(meeting.duration, \"minutes\");\n          // Don't display meetings which span more than one day\n          if (startTimeMoment.format(\"YYYY-MM-DD\") === endTimeMoment.format(\"YYYY-MM-DD\")) {\n            forEach(meeting.days, (day) => {\n              const dayOfWeek = moment(INITIAL_DATE)\n                .add(days.indexOf(day) + 1, \"days\")\n                .format(\"YYYY-MM-DD\");\n              const newEvent: EventInput = {\n                classNames: [className],\n                description: course.name,\n                end: `${dayOfWeek}T${endTimeMoment.format(\"HH:mm\")}`,\n                extendedProps: {\n                  course,\n                  meeting,\n                  section,\n                },\n                start: `${dayOfWeek}T${startTimeMoment.format(\"HH:mm\")}`,\n                term: section.term,\n                title: sectionName,\n              };\n              if (events[group]) {\n                // Only add the event if it hasn't already been added\n                // TODO: Will this conceal conflicts (specifically duplicated courses/sections/meetings)?\n                if (!eventExistsInEventList(newEvent, events[group])) {\n                  events[group].push(newEvent);\n                }\n              } else {\n                events[group] = [newEvent];\n              }\n            });\n          }\n        });\n      });\n    });\n  });\n  return events;\n};\n\nexport const createEventClassName = (sectionName: string, room: string, prof: string): string => {\n  const identifier = `${sectionName}_${prof}_${room}`;\n  return identifier.replace(/ /g, \"_\");\n};\n\nexport const getMinAndMaxTimes = (schedule: Schedule) => {\n  findConflicts(schedule);\n  const sections: Section[] = flatten(map(schedule.courses, \"sections\"));\n  const meetings: Meeting[] = flatten(map(sections, \"meetings\"));\n  let startDate = \"\";\n  const startTimes = map(meetings, (meeting) => {\n    return moment(meeting.startTime, \"h:mm A\");\n  });\n  if (startTimes.length) {\n    startDate = startTimes[0].format(\"YYYY-MM-DD\");\n  }\n  let endTimes = map(meetings, (meeting) => {\n    return moment(meeting.startTime, \"h:mm A\").add(meeting.duration, \"minutes\");\n  });\n  // If the meeting ends on a different day than it started, don't include it\n  endTimes = endTimes.filter((endTime) => {\n    return endTime.format(\"YYYY-MM-DD\") === startDate;\n  });\n  const minTime = (minBy(startTimes) || moment(\"06:00\", \"HH:mm\")).startOf(\"hour\").format(\"HH:mm\");\n  let maxTime = (maxBy(endTimes) || moment(\"22:00\", \"HH:mm\"))\n    .add(1, \"hours\")\n    .startOf(\"hour\")\n    .format(\"HH:mm\");\n  maxTime = maxTime === \"00:00\" ? \"24:00\" : maxTime;\n  return {\n    maxTime,\n    minTime,\n  };\n};\n\nexport const filterEventsByTerm = (groupedEvents: GroupedEvents, term: Term) => {\n  const tempGroupedEvents: GroupedEvents = {};\n  forOwn(groupedEvents, (_, key) => {\n    tempGroupedEvents[key] = filter(groupedEvents[key], (e) => {\n      return e.extendedProps?.section.term === term;\n    });\n  });\n  return tempGroupedEvents;\n};\n\nexport const filterHeadersWithNoEvents = (filteredEvents: GroupedEvents, headers: string[]) => {\n  return filter(headers, (header) => {\n    const groupEvents = filteredEvents[header];\n    return groupEvents?.length > 0;\n  });\n};\n\nexport const colorConflictBorders = (groupedEvents: GroupedEvents) => {\n  forOwn(groupedEvents, (_, key) => {\n    forEach(groupedEvents[key], (event) => {\n      if (event.extendedProps?.meeting?.isConflict) {\n        event.borderColor = \"red\";\n      }\n    });\n  });\n};\n\nexport const colorEventsByFeature = (groupedEvents: GroupedEvents, colorBy: ColorBy) => {\n  // TODO: Multiple colors for multiple instructors/prefixes?\n  // TODO: Pre-hashing strings too slow?\n  // Hash the strings before seeding the random color because it seemed that similar strings gave similar colors\n  switch (colorBy) {\n    case ColorBy.Room:\n      forOwn(groupedEvents, (_, key) => {\n        forEach(groupedEvents[key], (event) => {\n          const building = event.extendedProps?.meeting?.location?.building;\n          const roomNum = event.extendedProps?.meeting?.location?.roomNumber;\n          const roomStr = `${building} ${roomNum}`;\n          event.color = randomColor({ luminosity: \"light\", seed: hash(roomStr) });\n          event.textColor = \"black\";\n        });\n      });\n      break;\n    case ColorBy.Instructor:\n      forOwn(groupedEvents, (_, key) => {\n        forEach(groupedEvents[key], (event) => {\n          let instructorStr = \"\";\n          forEach(event.extendedProps?.section?.instructors, (instructor) => {\n            instructorStr += `${instructor}, `;\n          });\n          event.color = randomColor({\n            luminosity: \"light\",\n            seed: hash(instructorStr),\n          });\n          event.textColor = \"black\";\n        });\n      });\n      break;\n    case ColorBy.Prefix:\n      forOwn(groupedEvents, (_, key) => {\n        forEach(groupedEvents[key], (event) => {\n          let prefixStr = \"\";\n          forEach(event.extendedProps?.course?.prefixes, (prefix) => {\n            prefixStr += `${prefix}, `;\n          });\n          event.color = randomColor({ luminosity: \"light\", seed: hash(prefixStr) });\n          event.textColor = \"black\";\n        });\n      });\n      break;\n    default:\n      forOwn(groupedEvents, (_, key) => {\n        forEach(groupedEvents[key], (event) => {\n          const levelStr = String(event.extendedProps?.course?.number)[0];\n          switch (levelStr) {\n            case \"1\":\n              // Pastel green (suggests easy difficulty)\n              event.color = \"#c2ffc4\";\n              break;\n            case \"2\":\n              // Pastel yellow (suggests medium difficulty)\n              event.color = \"#fffec2\";\n              break;\n            case \"3\":\n              // Pastel red (suggests hard difficulty)\n              event.color = \"#ffc2c2\";\n              break;\n            default:\n              event.color = randomColor({\n                luminosity: \"light\",\n                seed: hash(levelStr ?? \"no-level\"),\n              });\n          }\n          event.textColor = \"black\";\n        });\n      });\n  }\n  return groupedEvents;\n};\n\nexport const getPrefixes = (schedule: Schedule) => {\n  const prefixes: string[] = [];\n  forEach(schedule.courses, (course) => {\n    forEach(course.prefixes, (prefix) => {\n      if (!prefixes.includes(prefix)) {\n        prefixes.push(prefix);\n      }\n    });\n  });\n  return prefixes.sort();\n};\n\nexport const getNumbers = (schedule: Schedule) => {\n  const numbers: string[] = [];\n  forEach(schedule.courses, (course) => {\n    if (!numbers.includes(course.number)) {\n      numbers.push(course.number);\n    }\n  });\n  return numbers.sort();\n};\n\nexport const getCourseNames = (schedule: Schedule) => {\n  const names: string[] = [];\n  forEach(schedule.courses, (course) => {\n    if (!names.includes(course.name)) {\n      names.push(course.name);\n    }\n  });\n  return names.sort();\n};\n\nexport const getSectionLetters = (schedule: Schedule) => {\n  const letters: string[] = [];\n  forEach(schedule.courses, (course) => {\n    forEach(course.sections, (section) => {\n      if (!letters.includes(section.letter)) {\n        letters.push(section.letter);\n      }\n    });\n  });\n  return letters.sort();\n};\n\nexport const getInstructionalMethods = (schedule: Schedule) => {\n  const instructionalMethods: string[] = [];\n  forEach(schedule.courses, (course) => {\n    forEach(course.sections, (section) => {\n      if (\n        section.instructionalMethod &&\n        !instructionalMethods.includes(section.instructionalMethod) &&\n        !section.isNonTeaching\n      ) {\n        instructionalMethods.push(section.instructionalMethod);\n      }\n    });\n  });\n  return instructionalMethods.sort();\n};\n\nexport const getDepts = (schedule: Schedule) => {\n  const departments: string[] = [];\n  forEach(schedule.courses, (course) => {\n    const deptStr = course.department ? course.department : \"No Department\";\n    if (!departments.includes(deptStr)) {\n      departments.push(deptStr);\n    }\n  });\n  return departments.sort();\n};\n\nexport const getLocationString = (location: Location): string => {\n  return `${location.building} ${location.roomNumber}`;\n};\n\n/* Generate a css class name. apply additional styles\n * specifically for the department tab view\n */\nexport const getCalendarClassName = (scheduleType: ScheduleBaseProps[\"scheduleType\"]) => {\n  let className = \"calendar-width calendar-title\";\n  if (scheduleType === \"department\") {\n    className += \" department-calendar-width\";\n  }\n  return className;\n};\n","import { filter, indexOf, isEqual, map } from \"lodash\";\nimport moment from \"moment\";\nimport { CheckboxTerms } from \"utilities\";\nimport { locationCase, startTimeCase, yearCase } from \"utilities/helpers\";\nimport {\n  Course,\n  CourseSectionMeeting,\n  Day,\n  Half,\n  Instructor,\n  Intensive,\n  Location,\n  Meeting,\n  Prefix,\n  Schedule,\n  Section,\n  SemesterLength,\n  SemesterLengthOption,\n  Term,\n  updateIdentifyingCourseInfo,\n  updateIdentifyingSectionInfo,\n  Weekday,\n} from \"utilities/interfaces\";\nimport { getLocationString } from \"./scheduleService\";\n\ntype CheckboxDays = (Day | boolean)[];\n\n// Defines interface for the section popover input\nexport interface SectionInput {\n  anticipatedSize?: Section[\"anticipatedSize\"];\n  comments?: Section[\"comments\"];\n  day10Used?: Section[\"day10Used\"];\n  days: CheckboxDays;\n  department?: Course[\"department\"];\n  duration?: Meeting[\"duration\"];\n  facultyHours?: Section[\"facultyHours\"];\n  globalMax?: Section[\"globalMax\"];\n  halfSemester?: Half;\n  instructionalMethod?: Section[\"instructionalMethod\"];\n  instructor: Instructor[];\n  intensiveSemester?: Intensive;\n  localMax?: Section[\"localMax\"];\n  location: string;\n  name: Course[\"name\"];\n  number: Course[\"number\"];\n  prefix: Prefix[];\n  roomCapacity?: Location[\"roomCapacity\"];\n  section: Section[\"letter\"];\n  semesterLength: SemesterLengthOption;\n  startTime: Meeting[\"startTime\"];\n  status?: Section[\"status\"];\n  studentHours?: Section[\"studentHours\"];\n  term: Section[\"term\"];\n  used?: Section[\"used\"];\n  year: string; // Assume string till yearCase() decides\n}\n\nexport interface NonTeachingLoadInput {\n  activity: Section[\"instructionalMethod\"];\n  facultyHours?: Section[\"facultyHours\"];\n  instructor: Instructor[];\n  terms: CheckboxTerms;\n}\n\nexport const convertFromSemesterLength = (sl: SemesterLength | undefined): SemesterLengthOption => {\n  if (sl === SemesterLength.Full || !sl) {\n    return SemesterLengthOption.FullSemester;\n  }\n  if (sl === SemesterLength.HalfFirst || sl === SemesterLength.HalfSecond) {\n    return SemesterLengthOption.HalfSemester;\n  }\n\n  return SemesterLengthOption.IntensiveSemester;\n};\n\nconst convertToSemesterLength = (sl: Half | Intensive | SemesterLengthOption): SemesterLength => {\n  switch (sl) {\n    case Half.First:\n      return SemesterLength.HalfFirst;\n    case Half.Second:\n      return SemesterLength.HalfSecond;\n    case Intensive.A:\n      return SemesterLength.IntensiveA;\n    case Intensive.B:\n      return SemesterLength.IntensiveB;\n    case Intensive.C:\n      return SemesterLength.IntensiveC;\n    case Intensive.D:\n      return SemesterLength.IntensiveD;\n    default:\n      return SemesterLength.Full;\n  }\n};\n\nexport const getSectionName = (course: Course, section: Section) => {\n  return `${course.prefixes[0]}-${course.number}-${section.letter}`;\n};\n\nexport const getCourse = (\n  schedule: Schedule,\n  prefixes: Course[\"prefixes\"],\n  courseNumber: Course[\"number\"],\n) => {\n  const courses = filter(schedule.courses, (course) => {\n    return isEqual(course.prefixes, prefixes) && course.number === courseNumber;\n  });\n  return courses.length > 0 ? courses[0] : undefined;\n};\n\nexport const getSection = (\n  schedule: Schedule,\n  prefixes: Course[\"prefixes\"],\n  courseNumber: Course[\"number\"],\n  letter: Section[\"letter\"],\n  term: Section[\"term\"],\n  instructors: Section[\"instructors\"],\n  instructionalMethod: Section[\"instructionalMethod\"],\n) => {\n  const course = getCourse(schedule, prefixes, courseNumber);\n  const sections = filter(course?.sections, (section) => {\n    return (\n      section.letter === letter &&\n      section.term === term &&\n      isEqual(section.instructors, instructors) &&\n      section.instructionalMethod === instructionalMethod\n    );\n  });\n  return sections.length > 0 ? sections[0] : undefined;\n};\n\n// Deprecated, replaced by removeMeeting\n// TODO: Remove?\nconst removeSection = (\n  schedule: Schedule,\n  letter: Section[\"letter\"],\n  term: Section[\"term\"],\n  instructors: Section[\"instructors\"],\n  courseIndex: number,\n) => {\n  schedule.courses[courseIndex].sections = filter(\n    schedule.courses[courseIndex].sections,\n    (section) => {\n      return (\n        section.letter !== letter || section.term !== term || section.instructors !== instructors\n      );\n    },\n  );\n  // TODO: Delete course if no sections left?\n};\n\n/* Used to map the input from the popover form to the\n internal JSON object type.  */\nexport const mapInputToInternalTypes = (data: SectionInput) => {\n  const newSection: Section = createNewSectionFromInput(data);\n  const newCourse: Course = createNewCourseFromInput(data);\n\n  return { newCourse, newSection };\n};\n\nexport const mapInternalTypesToInput = (data?: CourseSectionMeeting): SectionInput => {\n  const locationValue = (\n    (data &&\n      data.meeting &&\n      data.meeting.location.building &&\n      getLocationString(data.meeting.location)) ||\n    \"\"\n  ).trim();\n  let defaultTerm = data?.section.term;\n  if (Array.isArray(defaultTerm)) {\n    [defaultTerm] = defaultTerm;\n  }\n\n  const days = addFalseToDaysCheckboxList(data?.meeting?.days);\n\n  return {\n    anticipatedSize: data?.section.anticipatedSize,\n    comments: data?.section.comments?.trim() === \"\" ? undefined : data?.section.comments,\n    day10Used: data?.section.day10Used,\n    days,\n    department: data?.course.department,\n    duration: data?.meeting?.duration,\n    facultyHours:\n      data?.section.facultyHours !== undefined && data.section.facultyHours > -1\n        ? data.section.facultyHours\n        : undefined,\n    globalMax: data?.section.globalMax,\n    halfSemester: ((data?.section.semesterLength &&\n    convertFromSemesterLength(data?.section.semesterLength) === SemesterLengthOption.HalfSemester\n      ? data?.section.semesterLength\n      : SemesterLength.HalfFirst) as unknown) as Half,\n    instructionalMethod: data?.section.instructionalMethod ?? \"LEC\",\n    instructor: data?.section.instructors ?? [],\n    intensiveSemester: ((data?.section.semesterLength &&\n    convertFromSemesterLength(data?.section.semesterLength) ===\n      SemesterLengthOption.IntensiveSemester\n      ? data?.section.semesterLength\n      : SemesterLength.IntensiveA) as unknown) as Intensive,\n    localMax: data?.section.localMax,\n    location: locationValue,\n    name: data?.section.name ?? data?.course.name ?? \"\",\n    number: data?.course.number ?? \"\",\n    prefix: data?.course.prefixes ?? [],\n    roomCapacity: data?.meeting?.location.roomCapacity,\n    section: data?.section.letter ?? \"\",\n    semesterLength: convertFromSemesterLength(data?.section.semesterLength),\n    startTime: data?.meeting?.startTime\n      ? moment(data?.meeting?.startTime, \"h:mm A\").format(\"HH:mm\")\n      : \"08:00\",\n    status: data?.section.status ?? \"Active\",\n    studentHours:\n      data?.section.studentHours !== undefined && data.section.studentHours > -1\n        ? data.section.studentHours\n        : undefined,\n    term: defaultTerm || Term.Fall,\n    used: data?.section.used,\n    year: data?.section.year?.toString() ?? \"\",\n  };\n};\n\nconst createNewSectionFromInput = (data: SectionInput): Section => {\n  const location = locationCase(data.location);\n  const semesterType = convertToSemesterLength(\n    data.intensiveSemester || data.halfSemester || data.semesterLength,\n  );\n\n  const building = location ? location[0] : \"\";\n  const roomNumber = location ? location[1] : \"\";\n\n  return {\n    anticipatedSize: data.anticipatedSize,\n    comments: data.comments,\n    day10Used: data.day10Used,\n    endDate: \"\",\n    facultyHours: Number(data.facultyHours),\n    globalMax: data.globalMax,\n    instructionalMethod: data.instructionalMethod,\n    instructors: data.instructor,\n    letter: data.section,\n    localMax: data.localMax,\n    meetings: [\n      {\n        days: data.days as Day[],\n        duration: Number(data.duration),\n        location: {\n          building,\n          roomCapacity: data.roomCapacity,\n          roomNumber,\n        },\n        startTime: startTimeCase(data.startTime),\n      },\n    ],\n    semesterLength: semesterType,\n    startDate: \"\",\n    status: data.status,\n    studentHours: Number(data.studentHours),\n    term: data.term,\n    termStart: \"\",\n    used: data.used,\n    year: yearCase(data.year),\n  };\n};\n\nconst createNewCourseFromInput = (data: SectionInput): Course => {\n  return {\n    department: data.department,\n    name: data.name,\n    number: data.number,\n    prefixes: data.prefix,\n    // The newSection will be added later in insertSectionCourse()\n    sections: [],\n  };\n};\n\n// Deprecated, replaced by handleOldMeeting\n// TODO: Remove?\nexport const handleOldSection = (\n  oldData: CourseSectionMeeting | undefined,\n  newSection: Section,\n  removeOldSection: boolean,\n  schedule: Schedule,\n) => {\n  const oldSection = oldData?.section;\n  if (oldSection) {\n    // If the year, term, and semester length haven't changed...\n    if (\n      String(newSection.year) === String(oldSection.year) &&\n      newSection.term === oldSection.term &&\n      newSection.semesterLength === oldSection.semesterLength\n    ) {\n      // Update the new Section to match the date fields of the old Section\n      newSection.termStart = oldSection.termStart;\n      newSection.startDate = oldSection.startDate;\n      newSection.endDate = oldSection.endDate;\n    }\n\n    // Remove the old version of the Section\n    if (removeOldSection) {\n      removeSectionFromSchedule(oldData, schedule, oldSection);\n    }\n  }\n};\n\n// Deprecated, replaced by removeMeetingFromSchedule\n// TODO: Remove?\nexport const removeSectionFromSchedule = (\n  data: CourseSectionMeeting | undefined,\n  schedule: Schedule,\n  section: Section,\n) => {\n  const oldCourse = data?.course;\n  const courseIndex = indexOf(schedule.courses, oldCourse);\n  removeSection(schedule, section.letter, section.term, section.instructors, courseIndex);\n};\n\nexport const addFalseToDaysCheckboxList = (days?: Day[]): CheckboxDays => {\n  const weekdays = Object.values(Day).filter((day) => {\n    return Object.values(Weekday).includes(day);\n  });\n\n  if (!days) {\n    return new Array(weekdays.length).fill(false);\n  }\n\n  return map(weekdays, (wd: Day) => {\n    return days.includes(wd) ? wd : false;\n  });\n};\n\nexport const handleOldMeeting = (\n  oldData: CourseSectionMeeting | undefined,\n  newSection: Section,\n  newCourse: Course,\n  removeOldMeeting: boolean,\n  schedule: Schedule,\n) => {\n  const oldMeeting = oldData?.meeting;\n  let oldSection = oldData?.section;\n  let oldCourse = oldData?.course;\n  const courseIndex = indexOf(schedule.courses, oldCourse);\n  const sectionIndex = indexOf(oldCourse?.sections, oldSection);\n  if (oldSection) {\n    // If the year, term, and semester length haven't changed...\n    if (\n      String(newSection.year) === String(oldSection.year) &&\n      newSection.term === oldSection.term &&\n      newSection.semesterLength === oldSection.semesterLength\n    ) {\n      // Update the new Section to match the date fields of the old Section\n      newSection.termStart = oldSection.termStart;\n      newSection.startDate = oldSection.startDate;\n      newSection.endDate = oldSection.endDate;\n    }\n  }\n  // If the user pressed 'update' rather than 'add'...\n  if (removeOldMeeting && oldData) {\n    if (oldCourse) {\n      // Update identifying Course fields which were changed\n      oldCourse = updateIdentifyingCourseInfo(oldCourse, newCourse);\n      schedule.courses[courseIndex] = oldCourse;\n    }\n    if (oldSection) {\n      // Update identifying Section fields which were changed\n      oldSection = updateIdentifyingSectionInfo(oldSection, newSection);\n      schedule.courses[courseIndex].sections[sectionIndex] = oldSection;\n    }\n    if (oldMeeting) {\n      // Remove the old version of the Meeting\n      removeMeetingFromSchedule(\n        oldData,\n        schedule,\n        oldMeeting,\n        oldSection,\n        oldCourse,\n        newSection.isNonTeaching,\n      );\n    }\n  }\n};\n\nexport const removeMeetingFromSchedule = (\n  data: CourseSectionMeeting | undefined,\n  schedule: Schedule,\n  oldMeeting: Meeting | undefined,\n  oldSection: Section | undefined,\n  oldCourse: Course | undefined,\n  hardDelete = true,\n) => {\n  const courseIndex = indexOf(schedule.courses, oldCourse);\n  const sectionIndex = indexOf(schedule.courses[courseIndex].sections, oldSection);\n  const meetingIndex = indexOf(\n    schedule.courses[courseIndex].sections[sectionIndex].meetings,\n    oldMeeting,\n  );\n  const oldSectionHadMeetings = !!(oldSection && oldSection.meetings.length);\n  removeMeeting(\n    schedule,\n    meetingIndex,\n    sectionIndex,\n    courseIndex,\n    hardDelete,\n    oldSectionHadMeetings,\n  );\n};\n\nconst removeMeeting = (\n  schedule: Schedule,\n  meetingIndex: number,\n  sectionIndex: number,\n  courseIndex: number,\n  hardDelete: boolean,\n  oldSectionHadMeetings: boolean,\n) => {\n  // Remove the oldMeeting from the sections meetings\n  if (meetingIndex >= 0) {\n    schedule.courses[courseIndex].sections[sectionIndex].meetings.splice(meetingIndex, 1);\n  }\n  // If user pressed delete button and/or the old section had meetings before, delete section if no meetings left\n  if (\n    (hardDelete || oldSectionHadMeetings) &&\n    courseIndex >= 0 &&\n    sectionIndex >= 0 &&\n    !schedule.courses[courseIndex].sections[sectionIndex].meetings.length\n  ) {\n    schedule.courses[courseIndex].sections.splice(sectionIndex, 1);\n    // Delete course if no sections left\n    if (!schedule.courses[courseIndex].sections.length) {\n      schedule.courses.splice(courseIndex, 1);\n    }\n  }\n};\n","import { filter, forEach, sumBy } from \"lodash\";\nimport {\n  CourseSectionMeeting,\n  emptyMeeting,\n  getSectionName,\n  Schedule,\n  Section,\n  Term,\n} from \"utilities\";\nimport { Instructor } from \"utilities/interfaces\";\n\ntype hourKeys = \"fallHours\" | \"springHours\" | \"summerHours\" | \"totalHours\" | \"otherHours\";\ntype sectionKeys =\n  | \"fallCourseSections\"\n  | \"springCourseSections\"\n  | \"summerCourseSections\"\n  | \"otherDuties\";\n\n// Define a regex for the faculty load hours specifications added to the\n// Teaching Load tab's course/duty strings. See the test cases.\nexport const loadHoursRegEx = / \\(\\d+.?\\d*\\)(,|$)/;\n\nexport type FacultyRow = {\n  [key in hourKeys]?: number;\n} &\n  {\n    [key in sectionKeys]?: string;\n  } & {\n    faculty: string;\n    loadNotes?: string;\n    otherDuties?: string;\n  };\n\ninterface UpdateRowParams {\n  newRow: FacultyRow;\n  prevRow: FacultyRow;\n  section: Section;\n  sectionName: string;\n  termName?: \"fall\" | \"spring\" | \"summer\" | \"other\";\n}\n\nconst updateRow = ({ newRow, prevRow, section, sectionName, termName }: UpdateRowParams) => {\n  const termCourseSectionProp =\n    termName === \"other\" ? \"otherDuties\" : (`${termName}CourseSections` as sectionKeys);\n  const termHoursProp = `${termName}Hours` as hourKeys;\n  const facultyHours = section.facultyHours / section.instructors.length;\n  // Add faculty load hours using the format specified by loadHoursRegEx.\n  const sectionNameWithHours = `${sectionName} (${facultyHours})`;\n  if (prevRow) {\n    prevRow[termCourseSectionProp] = prevRow[termCourseSectionProp]\n      ? (prevRow[\n          termCourseSectionProp\n        ] = `${prevRow[termCourseSectionProp]}, ${sectionNameWithHours}`)\n      : (prevRow[termCourseSectionProp] = sectionNameWithHours);\n\n    prevRow[termHoursProp] = prevRow[termHoursProp]\n      ? Number(prevRow[termHoursProp]) + facultyHours\n      : facultyHours;\n  } else {\n    newRow[termCourseSectionProp] = sectionNameWithHours;\n    newRow[termHoursProp] = facultyHours;\n  }\n};\n\nexport const createTable = (schedule: Schedule): FacultyRow[] => {\n  const newTableData: FacultyRow[] = [];\n  forEach(schedule.courses, (course) => {\n    forEach(course.sections, (section) => {\n      const sectionName = getSectionName(course, section);\n      forEach(section.instructors, (instructor) => {\n        const newFacultyRow: FacultyRow = {\n          faculty: instructor,\n        };\n        const [prevAddedFacultyRow] = filter(newTableData, (data) => {\n          return data.faculty === instructor;\n        });\n        const updateArgs = {\n          newRow: newFacultyRow,\n          prevRow: prevAddedFacultyRow,\n          section,\n          sectionName,\n        };\n        if (section.isNonTeaching) {\n          updateRow({\n            ...updateArgs,\n            sectionName: section.instructionalMethod ?? \"\",\n            termName: \"other\",\n          });\n        } else {\n          switch (section.term) {\n            case Term.Fall:\n              updateRow({ ...updateArgs, termName: \"fall\" });\n              break;\n            case Term.Spring:\n              updateRow({ ...updateArgs, termName: \"spring\" });\n              break;\n            case Term.Summer:\n            case Term.Interim:\n              updateRow({ ...updateArgs, termName: \"summer\" });\n              break;\n            default:\n              // eslint-disable-next-line no-console\n              console.log(`Fell through case statement with value ${section.term}`);\n              break;\n          }\n        }\n        if (prevAddedFacultyRow) {\n          newTableData[newTableData.indexOf(prevAddedFacultyRow)] = prevAddedFacultyRow;\n        } else {\n          newTableData.push(newFacultyRow);\n        }\n      });\n    });\n  });\n  const sortedTableData = newTableData\n    .map((row) => {\n      return {\n        ...row,\n        totalHours:\n          (row.fallHours || 0) +\n          (row.springHours || 0) +\n          (row.summerHours || 0) +\n          (row.otherHours || 0),\n      };\n    })\n    .sort((a, b) => {\n      return b.totalHours - a.totalHours;\n    });\n  sortedTableData.push({\n    faculty: \"Total\",\n    fallHours: sumBy(sortedTableData, \"fallHours\"),\n    otherHours: sumBy(sortedTableData, \"otherHours\"),\n    springHours: sumBy(sortedTableData, \"springHours\"),\n    summerHours: sumBy(sortedTableData, \"summerHours\"),\n    totalHours: sumBy(sortedTableData, \"totalHours\"),\n  });\n  return sortedTableData;\n};\n\nexport const findSection = (\n  schedule: Schedule,\n  sectionName: string,\n  term: Term,\n): CourseSectionMeeting | null => {\n  if (!sectionName) {\n    return null;\n  }\n  const [prefix, number, letter] = sectionName.split(\"-\");\n\n  // Find the course with the prefix and number from the schedule courses array\n  const courses = filter(schedule.courses, (c) => {\n    return c.prefixes.includes(prefix) && c.number === number;\n  });\n  if (!courses.length) {\n    return null;\n  }\n  // Extract the course from the array\n  const [course] = courses;\n\n  // Find the section with the letter and term from the course sections array\n  const sections = filter(course.sections, (s) => {\n    return s.letter === letter && s.term === term;\n  });\n  if (!sections.length) {\n    return null;\n  }\n  // Extract the section from the array\n  const [section] = sections;\n\n  return {\n    course,\n    meeting: section.meetings ? section.meetings[0] : emptyMeeting,\n    section,\n  };\n};\n\nexport const getCourseSectionMeetingFromCell = (\n  schedule: Schedule,\n  cellValue: string,\n  cellHeader: string,\n): CSMIterableKeyMap => {\n  // Remove the load hours spec from the string before splitting on comma.\n  const sectionStrList = cellValue.split(loadHoursRegEx).join(\"\").split(\", \");\n  const courseSectionHeaders = [\n    \"Fall Course Sections\",\n    \"Spring Course Sections\",\n    \"Summer Course Sections\",\n  ];\n  if (courseSectionHeaders.includes(cellHeader)) {\n    let term: Term = Term.Fall;\n    switch (cellHeader) {\n      case \"Fall Course Sections\":\n        term = Term.Fall;\n        break;\n      case \"Spring Course Sections\":\n        term = Term.Spring;\n        break;\n      case \"Summer Course Sections\":\n        term = Term.Summer;\n        break;\n      default:\n        break;\n    }\n    let courseSectionMeeting = findSection(schedule, sectionStrList[0], term);\n    if (courseSectionMeeting === null) {\n      term = Term.Interim;\n      courseSectionMeeting = findSection(schedule, sectionStrList[0], Term.Interim);\n    }\n    return {\n      csm: courseSectionMeeting,\n      iterable: sectionStrList,\n      key: term,\n    };\n  }\n  return {\n    csm: null,\n    iterable: sectionStrList,\n    key: Term.Fall,\n  };\n};\n\nexport const findNonTeachingLoad = (\n  schedule: Schedule,\n  nonTeachingActivity: string,\n  instructor: Instructor,\n): CourseSectionMeeting | null => {\n  if (!nonTeachingActivity) {\n    return null;\n  }\n\n  const nonTeachingLoadsArray = filter(schedule.courses, (c) => {\n    return c.prefixes.length === 0 && c.number === \"\";\n  });\n  if (!nonTeachingLoadsArray.length) {\n    return null;\n  }\n  const [nonTeachingLoads] = nonTeachingLoadsArray;\n\n  const nonTeachingLoadArray = filter(nonTeachingLoads.sections, (s) => {\n    return (\n      s.isNonTeaching === true &&\n      s.instructionalMethod === nonTeachingActivity &&\n      s.instructors.includes(instructor)\n    );\n  });\n  if (!nonTeachingLoadArray.length) {\n    return null;\n  }\n  const [nonTeachingLoad] = nonTeachingLoadArray;\n\n  return {\n    course: nonTeachingLoads,\n    meeting: emptyMeeting,\n    section: nonTeachingLoad,\n  };\n};\n\n/**\n * A specific CSM with with corresponding iterable\n *   and key.\n *\n * @export\n * @interface CSMIterableKeyMap\n */\nexport interface CSMIterableKeyMap {\n  csm: CourseSectionMeeting | null;\n  iterable: string[];\n  key: string;\n}\n\nexport const getNonTeachingLoadsFromCell = (\n  schedule: Schedule,\n  cellValue: string,\n  instructor: Instructor,\n): CSMIterableKeyMap => {\n  // Remove the load hours spec from the string before splitting on comma.\n  const nonTeachingLoadStrList = cellValue.split(loadHoursRegEx).join(\"\").split(\", \");\n  const courseSectionMeeting = findNonTeachingLoad(schedule, nonTeachingLoadStrList[0], instructor);\n\n  return {\n    csm: courseSectionMeeting,\n    iterable: nonTeachingLoadStrList,\n    key: instructor,\n  };\n};\n\n/**\n * Components with this reference will have a function handleModalOpen which\n *   can be called.\n *\n * @export\n * @type\n */\nexport type UpdateModalPaginationRef = {\n  handleModalOpen: ({ csm, iterable, key }: CSMIterableKeyMap) => void;\n};\n","import forEach from \"lodash/forEach\";\nimport { Schedule } from \"utilities\";\n\n// Get list of unique professors.\nexport const getProfs = (schedule: Schedule): string[] => {\n  const professorsSet = new Set<string>();\n  forEach(schedule.courses, (course) => {\n    forEach(course.sections, (section) => {\n      forEach(section.instructors, (prof) => {\n        professorsSet.add(prof);\n      });\n    });\n  });\n  return [...professorsSet];\n};\n","import { Schedule, Section } from \"utilities\";\n\n/** A special data type used in Harmony. Ideally, this would just\n *   use the same interfaces as the Schedulizer. Having it separate increases complexity.\n */\nexport interface HarmonyClass {\n  instructors: Section[\"instructors\"];\n  name: string;\n}\n\n// get list of unique classes\nexport const getClasses = (schedule: Schedule): HarmonyClass[] => {\n  const coursesSet = new Set<HarmonyClass>();\n  const stringSet = new Set<string>();\n  schedule.courses.forEach((course) => {\n    const {\n      number,\n      prefixes: [firstPrefix],\n      sections,\n    } = course;\n    sections.forEach((section) => {\n      const { letter, instructors, isNonTeaching } = section;\n      const name = `${firstPrefix}-${number}-${letter}`;\n      // Note: Equality between objects returns false.\n      const obj = { instructors, name };\n      // This is to make sure there are no duplicate classes or teaching loads.\n      // TODO: update to work for multiple semester.\n      if (!stringSet.has(name) && !isNonTeaching) {\n        stringSet.add(name);\n        coursesSet.add(obj);\n      }\n    });\n  });\n  return [...coursesSet];\n};\n","import forEach from \"lodash/forEach\";\nimport { Schedule } from \"utilities\";\nimport { getLocationString } from \"./scheduleService\";\n\n// Get list of unique rooms.\nexport const getRooms = (schedule: Schedule): string[] => {\n  const roomsSet = new Set<string>();\n  forEach(schedule.courses, (course) => {\n    forEach(course.sections, (section) => {\n      forEach(section.meetings, ({ location }) => {\n        roomsSet.add(getLocationString(location));\n      });\n    });\n  });\n  return [...roomsSet];\n};\n","import forEach from \"lodash/forEach\";\nimport moment from \"moment\";\nimport { Schedule } from \"utilities\";\n\n// Get list of unique start times.\nexport const getTimes = (schedule: Schedule): string[] => {\n  const timesSet = new Set<string>();\n  forEach(schedule.courses, (course) => {\n    forEach(course.sections, (section) => {\n      forEach(section.meetings, ({ startTime }) => {\n        const time24 = moment(startTime, [\"h:mm A\"]).format(\"HH:mm\");\n        timesSet.add(time24);\n      });\n    });\n  });\n  // return [...timesSet];\n  // TODO: hack for demo\n  return [\n    \"07:00\",\n    \"08:00\",\n    \"09:00\",\n    \"10:30\",\n    \"11:30\",\n    \"12:30\",\n    \"13:30\",\n    \"14:30\",\n    \"15:30\",\n    \"16:30\",\n    \"18:30\",\n  ];\n};\n","import { array, number, object, string } from \"yup\";\n\n/*\nhelper for yup transform function\nRef: https://github.com/jquense/yup/issues/298#issuecomment-559017330\n */\nconst emptyStringToNull = <T>(value: T, originalValue: T) => {\n  if (typeof originalValue === \"string\" && originalValue === \"\") {\n    return null;\n  }\n  return value;\n};\n\n/*\n  Removes unchecked days from the list. Helper for yup\n*/\nexport const removeUncheckedValues = (valueArr: string[]) => {\n  return valueArr.filter((value: boolean | string) => {\n    return value;\n  });\n};\n\n/*\n  Tests that a number is an integer or a decimal.\n  Ref: https://stackoverflow.com/questions/59269772/formik-yup-how-to-check-is-decimal-number\n*/\nconst decimalRegex = (value: number | null | undefined): boolean => {\n  return Boolean(`${value || \"\"}`.match(/^\\d*\\.?\\d*$/)) || false;\n};\n\n/* A schema to provide form validation for the AddSectionPopover.\nNOTE: fields with default values are not check: semester and time. */\nexport const addSectionSchema = object().shape({\n  anticipatedSize: number()\n    .typeError(\"global max must be a number\")\n    .integer()\n    .min(0)\n    .transform(emptyStringToNull)\n    .nullable(),\n  day10Used: number()\n    .typeError(\"day 10 used must be a number\")\n    .integer()\n    .min(0)\n    .transform(emptyStringToNull)\n    .nullable(),\n  days: array().transform(removeUncheckedValues),\n  department: string().nullable(),\n  duration: number()\n    .typeError(\"duration must be a number\")\n    .integer()\n    .min(0)\n    .transform(emptyStringToNull)\n    .nullable(),\n  facultyHours: number()\n    .required()\n    .typeError(\"faculty hours must be a number\")\n    .min(0)\n    .test(\"is-decimal\", \"invalid decimal\", decimalRegex),\n  globalMax: number()\n    .typeError(\"global max must be a number\")\n    .integer()\n    .min(0)\n    .transform(emptyStringToNull)\n    .nullable(),\n  instructionalMethod: string().nullable(),\n  instructor: array().of(string()).required(),\n  localMax: number()\n    .typeError(\"global max must be a number\")\n    .integer()\n    .min(0)\n    .transform(emptyStringToNull)\n    .nullable(),\n  location: string().nullable(),\n  name: string().nullable(),\n  number: string().required().typeError(\"number is a required field\"),\n  prefix: array().of(string().uppercase()).required().typeError(\"prefix is a required field\"),\n  roomCapacity: number()\n    .typeError(\"room capacity must be a number\")\n    .positive()\n    .integer()\n    .min(0)\n    .transform(emptyStringToNull)\n    .nullable(),\n  section: string().required().uppercase().typeError(\"section is a required field\"),\n  status: string().nullable(),\n  studentHours: number()\n    .required()\n    .typeError(\"student hours must be a number\")\n    .min(0)\n    .test(\"is-decimal\", \"invalid decimal\", decimalRegex),\n  used: number()\n    .typeError(\"used must be a number\")\n    .integer()\n    .min(0)\n    .transform(emptyStringToNull)\n    .nullable(),\n  year: number()\n    .typeError(\"year must be a number\")\n    .positive()\n    .integer()\n    .min(1970)\n    .transform(emptyStringToNull)\n    .nullable(),\n});\n\nexport const addNonTeachingLoadSchema = object().shape({\n  activity: string().required(),\n  facultyHours: number()\n    .required()\n    .typeError(\"faculty hours must be a number\")\n    .positive()\n    .test(\"is-decimal\", \"invalid decimal\", decimalRegex)\n    .transform(emptyStringToNull)\n    .nullable(),\n  instructor: array().of(string()).required(),\n  terms: array().transform(removeUncheckedValues),\n});\n","import { voidFn } from \"utilities\";\nimport { AppAction, AppState, ColorBy, SchedulizerTab, Term } from \"utilities/interfaces\";\nimport {\n  getClasses,\n  getDepts,\n  getMinAndMaxTimes,\n  getProfs,\n  getRooms,\n  getTimes,\n} from \"utilities/services\";\n\n/*\n  Provides a function to perform multiple setState updates\n  at once that depend on each other.\n  Can be initialized with a callback to be performed on\n  any completed action.\n*/\nexport const reducer = (actionCallback: (item: AppState) => void = voidFn) => {\n  return (state: AppState, action: AppAction): AppState => {\n    let newState: AppState;\n    switch (action.type) {\n      case \"setScheduleData\": {\n        let { schedule } = action.payload;\n        schedule = schedule || { courses: [] };\n        const times = getMinAndMaxTimes(schedule);\n        newState = {\n          ...state,\n          classes: getClasses(schedule),\n          departments: getDepts(schedule),\n          professors: getProfs(schedule),\n          rooms: getRooms(schedule),\n          schedule,\n          slotMaxTime: times.maxTime,\n          slotMinTime: times.minTime,\n          times: getTimes(schedule),\n        };\n        break;\n      }\n      case \"setSelectedTerm\": {\n        let { selectedTerm } = action.payload;\n        selectedTerm = selectedTerm || Term.Fall;\n        newState = { ...state, selectedTerm };\n        break;\n      }\n      case \"setFileUrl\": {\n        let { fileUrl } = action.payload;\n        fileUrl = fileUrl || \"\";\n        newState = { ...state, fileUrl };\n        break;\n      }\n      case \"setColorBy\": {\n        let { colorBy } = action.payload;\n        colorBy = colorBy || ColorBy.Level;\n        newState = { ...state, colorBy };\n        break;\n      }\n      case \"setSchedulizerTab\": {\n        let { schedulizerTab } = action.payload;\n        schedulizerTab = schedulizerTab || SchedulizerTab.Faculty;\n        newState = { ...state, schedulizerTab };\n        break;\n      }\n      default:\n        return state;\n    }\n    actionCallback(newState);\n    return newState;\n  };\n};\n","import { camelCase, forEach } from \"lodash\";\nimport moment from \"moment\";\nimport { useContext } from \"react\";\nimport { DeepMap, FieldError } from \"react-hook-form\";\nimport { insertSectionCourse } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport {\n  AppAction,\n  Course,\n  CourseSectionMeeting,\n  SchedulizerTab,\n  Section,\n  Term,\n} from \"utilities/interfaces\";\nimport {\n  createEventClassName,\n  handleOldMeeting,\n  mapInputToInternalTypes,\n  NonTeachingLoadInput,\n  SectionInput,\n} from \"utilities/services\";\nimport { mapNonTeachingLoadInput } from \"utilities/services/addNonTeachingLoadService\";\n\ninterface MappedSection {\n  newCourse: Course;\n  newSection: Section;\n}\n\ninterface AddToScheduleParams {\n  newCourse: Course;\n  newSection: Section;\n  oldData: CourseSectionMeeting | undefined;\n  removeOldMeeting: boolean;\n}\n\nexport const useAddSectionToSchedule = () => {\n  const {\n    appState: { schedule, selectedTerm, schedulizerTab },\n    appDispatch,\n    setIsCSVLoading,\n  } = useContext(AppContext);\n\n  // Update the schedule via pass by sharing.\n  const addSectionToSchedule = async (\n    data: SectionInput,\n    oldData: CourseSectionMeeting | undefined,\n    removeOldMeeting = false,\n  ) => {\n    setIsCSVLoading(true);\n    const { newSection, newCourse }: MappedSection = mapInputToInternalTypes(data);\n    addToSchedule({ newCourse, newSection, oldData, removeOldMeeting });\n\n    // Depending on the current tab, scroll to the updated/added section/row\n    if (schedulizerTab === SchedulizerTab.Faculty || schedulizerTab === SchedulizerTab.Room) {\n      await switchToCorrectTerm(newSection, selectedTerm, appDispatch);\n      setIsCSVLoading(false);\n      scrollToUpdatedSection(newCourse, newSection);\n    } else if (schedulizerTab === SchedulizerTab.Loads) {\n      setIsCSVLoading(false);\n      // TODO: This may not be the row clicked on if there are multiple instructors?\n      scrollToUpdatedFacultyRow(newSection.instructors[newSection.instructors.length - 1]);\n    } else {\n      setIsCSVLoading(false);\n    }\n  };\n\n  const addNonTeachingLoadToSchedule = (\n    data: NonTeachingLoadInput,\n    oldData: CourseSectionMeeting | undefined,\n    removeOldMeeting = false,\n  ) => {\n    setIsCSVLoading(true);\n    const { newCourse, newSection }: MappedSection = mapNonTeachingLoadInput(data);\n    addToSchedule({ newCourse, newSection, oldData, removeOldMeeting });\n    setIsCSVLoading(false);\n    scrollToUpdatedFacultyRow(newSection.instructors[newSection.instructors.length - 1]);\n  };\n\n  const addToSchedule = ({\n    newCourse,\n    newSection,\n    oldData,\n    removeOldMeeting,\n  }: AddToScheduleParams) => {\n    newSection.timestamp = moment().format();\n    handleOldMeeting(oldData, newSection, newCourse, removeOldMeeting, schedule);\n    insertSectionCourse(schedule, newSection, newCourse);\n    appDispatch({ payload: { schedule }, type: \"setScheduleData\" });\n  };\n\n  return { addNonTeachingLoadToSchedule, addSectionToSchedule };\n};\n\nconst switchToCorrectTerm = async (\n  newSection: Section,\n  currentTerm: Term,\n  appDispatch: React.Dispatch<AppAction> | (() => void),\n) => {\n  const newTerm = Array.isArray(newSection.term) ? newSection.term[0] : newSection.term;\n  if (newTerm !== currentTerm) {\n    await appDispatch({\n      payload: { selectedTerm: newTerm },\n      type: \"setSelectedTerm\",\n    });\n  }\n};\n\nconst scrollToUpdatedSection = (newCourse: Course, newSection: Section) => {\n  let className = \"\";\n  let newElement: Element | undefined;\n  const newSectionName = `${newCourse.prefixes[0]}-${newCourse.number}-${newSection.letter}`;\n  forEach(newSection.instructors, (prof) => {\n    forEach(newSection.meetings, (meeting) => {\n      const room = `${meeting.location.building}_${meeting.location.roomNumber}`;\n      className = createEventClassName(newSectionName, room, prof);\n      const newElements = document.getElementsByClassName(className);\n      if (newElements) {\n        newElement = newElements.item(newElements.length - 1) ?? undefined;\n      }\n    });\n  });\n  if (newElement && newElement.parentElement?.parentElement) {\n    newElement.scrollIntoView(false);\n  }\n};\n\nconst scrollToUpdatedFacultyRow = (instructor: string) => {\n  const id = getIdFromFaculty(instructor);\n  const row = document.getElementById(id);\n  if (row !== null) {\n    row.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n  }\n};\n\n// a helper to provide consistent naming and retrieve error messages\nexport const useInput = <T>(label: string, errors: DeepMap<T, FieldError>) => {\n  const name = camelCase(label);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const errorMessage = (errors[name as keyof T] as any)?.message;\n  return { errorMessage, name };\n};\n\nexport const getIdFromFaculty = (faculty: string) => {\n  return faculty.replace(/ /g, \"-\");\n};\n","import { useContext } from \"react\";\nimport { AppContext } from \"utilities/contexts\";\nimport { CourseSectionMeeting } from \"utilities/interfaces\";\nimport { removeMeetingFromSchedule } from \"utilities/services\";\n\nexport const useDeleteMeetingFromSchedule = () => {\n  const {\n    appState: { schedule },\n    appDispatch,\n    setIsCSVLoading,\n  } = useContext(AppContext);\n\n  // Update the schedule via pass by sharing.\n  const deleteMeetingFromSchedule = (data: CourseSectionMeeting | undefined) => {\n    const meeting = data?.meeting;\n    const section = data?.section;\n    const course = data?.course;\n    setIsCSVLoading(true);\n    removeMeetingFromSchedule(data, schedule, meeting, section, course);\n    appDispatch({ payload: { schedule }, type: \"setScheduleData\" });\n    setIsCSVLoading(false);\n  };\n\n  return { deleteMeetingFromSchedule };\n};\n","import { useContext } from \"react\";\nimport { AppContext } from \"utilities/contexts\";\n\n/** Get a handle on the app context.\n *  Uses one import in files rather than two.\n */\nexport const useAppContext = () => {\n  return useContext(AppContext);\n};\n","import download from \"js-file-download\";\nimport moment from \"moment\";\nimport { useContext } from \"react\";\nimport { scheduleToCSVString, scheduleToNonTeachingCSVString } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\n\n// Deprecated, TODO: Remove this function?\n/* Hook that downloads the current schedule when onExportClick\n is executed. */\nexport const useExportCSV = () => {\n  const {\n    appState: { schedule },\n  } = useContext(AppContext);\n\n  const onExportClick = () => {\n    // TODO: maybe generate a cool title like schedule-fall-2020.csv\n    download(scheduleToCSVString(schedule), `schedule_${moment().format()}.csv`);\n    const nonTeachingCSV = scheduleToNonTeachingCSVString(schedule);\n    if (nonTeachingCSV) {\n      download(nonTeachingCSV, `non_teaching_${moment().format()}.csv`);\n    }\n  };\n  return onExportClick;\n};\n","import download from \"js-file-download\";\nimport moment from \"moment\";\nimport { useContext } from \"react\";\nimport { scheduleToFullCSVString, scheduleToNonTeachingCSVString } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\n\n/* Hook that downloads the current schedule when onFullExportClick\n is executed. */\nexport const useExportFullCSV = () => {\n  const {\n    appState: { schedule },\n  } = useContext(AppContext);\n\n  const onFullExportClick = () => {\n    // TODO: maybe generate a cool title like full-schedule-fall-2020.csv\n    download(scheduleToFullCSVString(schedule), `full_schedule_${moment().format()}.csv`);\n    const nonTeachingCSV = scheduleToNonTeachingCSVString(schedule);\n    if (nonTeachingCSV) {\n      download(nonTeachingCSV, `non_teaching_${moment().format()}.csv`);\n    }\n  };\n  return onFullExportClick;\n};\n","import React from \"react\";\nimport { FieldValues } from \"react-hook-form\";\nimport { AllFormMethods, FieldArrayFormProviderProps } from \"utilities\";\n\n/** Creates a Context for a FieldArrayForm Instance */\nconst FieldArrayFormContext = React.createContext<AllFormMethods | null>(null);\nFieldArrayFormContext.displayName = \"RHFArrayContext\";\n\n/**\n * Allows a component inside the FieldArrayFormContext access to all of the\n *   methods and other data in the FieldArrayForm\n * @returns AllFormMethods\n */\nexport const useFieldArrayFormContext = <TFieldValues extends FieldValues>(): AllFormMethods<\n  TFieldValues\n> => {\n  return React.useContext(FieldArrayFormContext) as AllFormMethods<TFieldValues>;\n};\n\n/**\n * A provider that has AllFormMethods within it. Used with FieldArrayForms\n */\nexport const FieldArrayFormProvider = <TFieldValues extends FieldValues>({\n  children,\n  ...props\n}: FieldArrayFormProviderProps<TFieldValues>) => {\n  return (\n    <FieldArrayFormContext.Provider value={{ ...props } as AllFormMethods}>\n      {children}\n    </FieldArrayFormContext.Provider>\n  );\n};\n","import { Assignments, ClassLimits } from \"@harmoniously/react\";\nimport { immer } from \"utilities\";\nimport create, { State } from \"zustand\";\n\n/**\n * A hook to get access to a global store containing assignment data for Harmony\n */\nexport const useHarmonyAssignmentsStore = create<HarmonyAssignmentsState>(\n  immer<HarmonyAssignmentsState>((set) => {\n    return {\n      assignments: {},\n      setAssignments: (newAssignments: Assignments) => {\n        set((state) => {\n          state.assignments = newAssignments;\n        });\n      },\n      setClass: (className: string, attributes: ClassLimits) => {\n        set((state) => {\n          state.assignments[className] = attributes;\n        });\n      },\n    };\n  }),\n);\n\nexport interface HarmonyAssignmentsState extends State {\n  assignments: Assignments;\n  setAssignments: (newAssignments: Assignments) => void;\n  setClass: (className: string, setAttributes: ClassLimits) => void;\n}\n","import { Result } from \"@harmoniously/react\";\nimport { Day, Schedule, SemesterLength, Term } from \"utilities/interfaces\";\nimport create, { GetState, SetState, State } from \"zustand\";\n\n/** Store the Harmony results */\nexport const useHarmonyResultStore = create<HarmonyResultState>(\n  (set: SetState<HarmonyResultState>, get: GetState<HarmonyResultState>) => {\n    return {\n      result: {},\n      schedule: { courses: [] },\n      setResult: (res: Result) => {\n        set({ result: res, schedule: convertToSchedule(res) });\n      },\n    };\n  },\n);\n\nexport interface HarmonyResultState extends State {\n  result: Result;\n  schedule: Schedule;\n  setResult: (result: Result) => void;\n}\n\n/** Convert the assignments to a schedule object. */\nconst convertToSchedule = (result: Result): Schedule => {\n  const schedule: Schedule = { courses: [] };\n  if (result !== undefined) {\n    Object.keys(result).forEach((course) => {\n      // TODO update this.\n      const [prefix, number, letter] = course.split(\"-\");\n      const courseObject = result[course];\n      const { professor, time, room } = courseObject;\n      const [building, roomNumber] = room.split(\" \");\n\n      schedule.courses.push({\n        department: \"\",\n        name: \"\",\n        number,\n        prefixes: [prefix],\n        sections: [\n          {\n            comments: \"\",\n            endDate: \"1/1/21\",\n            facultyHours: 3,\n            instructionalMethod: \"\",\n            instructors: [professor],\n            letter,\n            meetings: [\n              {\n                days: [Day.Monday, Day.Wednesday, Day.Friday],\n                duration: 50,\n                location: { building, roomNumber },\n                startTime: time,\n              },\n            ],\n            semesterLength: SemesterLength.Full,\n            startDate: \"01/01/21\",\n            status: \"\",\n            studentHours: 3,\n            term: Term.Fall,\n            termStart: \"01/01/21\",\n            year: 2021,\n          },\n        ],\n      });\n    });\n  }\n\n  return schedule;\n};\n","import create, { State } from \"zustand\";\n\nexport interface HarmonyStepperCallbackState extends State {\n  callbacks: (() => void)[];\n  clearCallbacks: () => void;\n  pushCallbacks: (callback: () => void) => void;\n}\n\n/**\n * Used to get a handle on different callbacks that need to be run\n * when the Harmony stepper transitions to the next page.\n */\nexport const useHarmonyStepperCallback = create<HarmonyStepperCallbackState>((set) => {\n  return {\n    callbacks: [],\n    clearCallbacks: () => {\n      set({ callbacks: [] });\n    },\n    pushCallbacks: (callback) => {\n      set((state) => {\n        return { callbacks: [...state.callbacks, callback] };\n      });\n    },\n  };\n});\n","import { isEqual } from \"lodash\";\nimport { ChangeEvent, useContext } from \"react\";\nimport { csvStringToSchedule, insertSectionCourse, Schedule } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport { read, utils } from \"xlsx\";\n\n/**\n * Hook that returns function to handle file uploaded\n *   and store it in local state.\n *\n * @param  {boolean} isAdditiveImport\n * @returns void\n *\n * Ref: https://stackoverflow.com/questions/5201317/read-the-contents-of-a-file-object\n */\nexport const useImportFile = (isAdditiveImport: boolean) => {\n  const {\n    appState: { schedule },\n    appDispatch,\n    setIsCSVLoading,\n  } = useContext(AppContext);\n\n  /**\n   * Used to handle changes to inputs when files are uploaded.\n   */\n  const onInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setIsCSVLoading(true);\n\n    const file: File | null = e.target.files && e.target.files[0];\n    const fileNameTokens = file?.name.split(\".\") || [];\n    const fileType = fileNameTokens[fileNameTokens.length - 1];\n    const reader = new FileReader();\n    let scheduleJSON: Schedule;\n\n    switch (fileType) {\n      case \"xlsx\": {\n        file && reader.readAsArrayBuffer(file);\n        break;\n      }\n      case \"csv\": {\n        file && reader.readAsBinaryString(file);\n        break;\n      }\n      default: {\n        throw Error(`FileType ${fileType} not supported.`);\n      }\n    }\n\n    reader.onloadend = async () => {\n      let scheduleString: string;\n      if (fileType === \"xlsx\") {\n        scheduleString = getCSVFromXLSXData(reader.result as ArrayBufferLike);\n      } else {\n        scheduleString = String(reader.result);\n      }\n      scheduleJSON = csvStringToSchedule(scheduleString);\n\n      !isAdditiveImport && appDispatch({ payload: { fileUrl: \"\" }, type: \"setFileUrl\" });\n      await updateScheduleInContext(schedule, scheduleJSON, appDispatch, isAdditiveImport);\n      setIsCSVLoading(false);\n    };\n  };\n\n  return onInputChange;\n};\n\n/**\n * Update the Schedule information in the context\n * @param currentSchedule\n * @param newSchedule\n * @param appDispatch\n * @param isAdditiveImport\n *\n * Ref: https://stackoverflow.com/a/57214316/9931154\n */\nexport const updateScheduleInContext = async (\n  currentSchedule: Schedule,\n  newSchedule: Schedule,\n  appDispatch: AppContext[\"appDispatch\"],\n  isAdditiveImport = false,\n) => {\n  if (!isEqual(currentSchedule, newSchedule)) {\n    let newScheduleData: Schedule;\n    if (isAdditiveImport) {\n      newScheduleData = combineSchedules(currentSchedule, newSchedule);\n    } else {\n      newScheduleData = newSchedule;\n    }\n    await appDispatch({ payload: { schedule: newScheduleData }, type: \"setScheduleData\" });\n  }\n};\n\n/**\n * Convert XLSX Data to CSV\n *\n * @param  {ArrayBufferLike} xlsxData\n * @returns string\n */\nexport const getCSVFromXLSXData = (xlsxData: ArrayBufferLike): string => {\n  const data = new Uint8Array(xlsxData);\n  const workBook = read(data, { type: \"array\" });\n  const firstSheet = workBook.Sheets[workBook.SheetNames[0]];\n  return utils.sheet_to_csv(firstSheet);\n};\n\n/**\n * Combine two schedule courses together.\n *\n * @param  {Schedule} currentSchedule\n * @param  {Schedule} newSchedule\n */\nconst combineSchedules = (currentSchedule: Schedule, newSchedule: Schedule) => {\n  newSchedule.courses.forEach((newCourse) => {\n    newCourse.sections.forEach((newSection) => {\n      currentSchedule = insertSectionCourse(currentSchedule, newSection, newCourse);\n    });\n  });\n  return currentSchedule;\n};\n","import { useHistory } from \"react-router-dom\";\n\n/** Hook that uses history to programmatically\n *   route to a new page. Returns a function\n *   routeTo: (path: string) => void\n */\nexport const useRedirect = () => {\n  const history = useHistory();\n\n  return (path: string) => {\n    history.push(path);\n  };\n};\n","module.exports = __webpack_public_path__ + \"static/media/CalvinUniv-vert-full-color-inverse.255efbf6.png\";","export * from \"./constants\";\n// export * from \"./contexts\";\nexport * from \"./helpers\";\nexport * from \"./hooks\";\nexport * from \"./interfaces\";\nexport * from \"./reducers\";\nexport * from \"./services\";\n","import { Course, Meeting, Section, Term } from \"./interfaces\";\n\nexport const INITIAL_DATE = \"2000-01-02\";\n\nexport const emptyCourse: Course = {\n  name: \"\",\n  number: \"\",\n  prefixes: [],\n  sections: [],\n};\n\nexport const emptyMeeting: Meeting = {\n  days: [],\n  duration: 0,\n  isConflict: false,\n  location: { building: \"\", roomNumber: \"\" },\n  startTime: \"\",\n};\n\nexport const emptySection: Section = {\n  facultyHours: -1,\n  instructors: [],\n  letter: \"\",\n  meetings: [],\n  studentHours: -1,\n  term: Term.Fall,\n};\n","import { yupResolver } from \"@hookform/resolvers/yup\";\nimport { Box, Button, Grid, Typography } from \"@material-ui/core\";\nimport { GridItemAutocomplete, GridItemCheckboxGroup, GridItemTextField } from \"components\";\nimport { isEqual } from \"lodash\";\nimport moment from \"moment\";\nimport React, { useContext, useEffect } from \"react\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport {\n  addFalseToTermsCheckboxList,\n  addNonTeachingLoadSchema,\n  mapNonTeachingLoadValuesToInput,\n  NonTeachingLoadInput,\n  PopoverValueProps,\n  removeUncheckedValues,\n  Term,\n  useAddSectionToSchedule,\n  useDeleteMeetingFromSchedule,\n} from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport \"./AddNonTeachingLoadPopover.scss\";\n\nconst SPACING = 2;\n\nexport const AddNonTeachingLoadPopover = ({ values }: PopoverValueProps) => {\n  const { addNonTeachingLoadToSchedule } = useAddSectionToSchedule();\n  const {\n    appState: { professors },\n  } = useContext(AppContext);\n\n  const onSubmit = (removeOldActivity: boolean) => {\n    return (data: NonTeachingLoadInput) => {\n      addNonTeachingLoadToSchedule(data, values, removeOldActivity);\n    };\n  };\n\n  const methods = useForm<NonTeachingLoadInput>({\n    criteriaMode: \"all\",\n    resolver: yupResolver(addNonTeachingLoadSchema),\n  });\n\n  const { deleteMeetingFromSchedule } = useDeleteMeetingFromSchedule();\n\n  const deleteMeeting = () => {\n    return () => {\n      deleteMeetingFromSchedule(values);\n    };\n  };\n\n  const { reset, getValues } = methods;\n\n  useEffect(() => {\n    const inputValues = mapNonTeachingLoadValuesToInput(values);\n    const formValues = getValues();\n    inputValues.terms = removeUncheckedValues(inputValues.terms as string[]) as Term[];\n\n    // Update the form values if they have changed\n    if (!isEqual(inputValues, formValues)) {\n      reset(inputValues);\n    }\n  }, [reset, getValues, values]);\n\n  return (\n    <FormProvider {...methods}>\n      <form className=\"popover-container\">\n        <Box>\n          <Typography className=\"popover-title\" variant=\"h4\">\n            {values ? \"Update Non-Teaching Activity\" : \"Add Non-Teaching Activity\"}\n          </Typography>\n        </Box>\n        <Grid container spacing={SPACING}>\n          <GridItemTextField label=\"Activity\" />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemAutocomplete\n            defaultValue={values?.section.instructors}\n            label=\"Instructor\"\n            multiple\n            options={[...professors].sort()}\n          />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemTextField label=\"Faculty Hours\" />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemCheckboxGroup\n            initialValue={addFalseToTermsCheckboxList(values?.section.term as Term[]) as string[]}\n            label=\"Terms\"\n            options={Object.values(Term)}\n          />\n        </Grid>\n        <Grid className=\"popover-buttons\" item>\n          <Button\n            color=\"primary\"\n            onClick={methods.handleSubmit(onSubmit(values !== undefined))}\n            variant=\"contained\"\n          >\n            {values ? \"Update Activity\" : \"Add Activity\"}\n          </Button>\n          {values && (\n            <Button\n              color=\"secondary\"\n              onClick={methods.handleSubmit(deleteMeeting())}\n              variant=\"contained\"\n            >\n              Delete Activity\n            </Button>\n          )}\n          {values?.section.timestamp && (\n            <Typography variant=\"caption\">\n              Last Edited: {moment(values?.section.timestamp).format(\"MMMM Do YYYY, h:mm:ss a\")}\n            </Typography>\n          )}\n        </Grid>\n      </form>\n    </FormProvider>\n  );\n};\n\nAddNonTeachingLoadPopover.defaultProps = {\n  values: undefined,\n};\n","import { Button, ButtonProps, IconButton, Popover } from \"@material-ui/core\";\nimport { Add } from \"@material-ui/icons\";\nimport { bindPopover, bindTrigger, usePopupState } from \"material-ui-popup-state/hooks\";\nimport React from \"react\";\nimport \"./PopoverButton.scss\";\n\ninterface PopoverButton extends ButtonProps {\n  buttonTitle?: string;\n  isIcon?: boolean;\n  minWidth?: string;\n  popupId?: string;\n}\n\nexport const PopoverButton = (props: PopoverButton) => {\n  const { isIcon, popupId, buttonTitle, minWidth, children, ...buttonProps } = props;\n  const popupState = usePopupState({\n    popupId,\n    variant: \"popover\",\n  });\n\n  return (\n    <>\n      {isIcon ? (\n        <IconButton {...bindTrigger(popupState)}>\n          <Add />\n        </IconButton>\n      ) : (\n        <Button color=\"secondary\" variant=\"contained\" {...buttonProps} {...bindTrigger(popupState)}>\n          {buttonTitle}\n        </Button>\n      )}\n      <Popover\n        {...bindPopover(popupState)}\n        anchorOrigin={{\n          horizontal: \"left\",\n          vertical: \"bottom\",\n        }}\n        PaperProps={{ style: { minWidth } }}\n        transformOrigin={{\n          horizontal: \"right\",\n          vertical: \"top\",\n        }}\n      >\n        {children}\n      </Popover>\n    </>\n  );\n};\n\nPopoverButton.defaultProps = {\n  buttonTitle: \"Add Section\",\n  isIcon: true,\n  minWidth: \"500px\",\n  popupId: \"addSection\",\n};\n","import { ButtonProps } from \"@material-ui/core\";\nimport { AddSectionPopover } from \"components\";\nimport React from \"react\";\nimport { PopoverButton } from \"../PopoverButton\";\nimport \"./AddSectionButton.scss\";\n\ninterface AddSectionButton extends ButtonProps {\n  isIcon?: boolean;\n}\n\nexport const AddSectionButton = (props: AddSectionButton) => {\n  const { isIcon } = props;\n\n  return (\n    <PopoverButton isIcon={isIcon}>\n      <AddSectionPopover />\n    </PopoverButton>\n  );\n};\n\nAddSectionButton.defaultProps = {\n  isIcon: true,\n};\n","import { yupResolver } from \"@hookform/resolvers/yup\";\nimport { Box, Button, Grid, InputAdornment, Typography } from \"@material-ui/core\";\nimport {\n  GridItemAutocomplete,\n  GridItemCheckboxGroup,\n  GridItemRadioGroup,\n  GridItemTextField,\n} from \"components\";\nimport { isEqual, isNil, omitBy } from \"lodash\";\nimport moment from \"moment\";\nimport React, { ChangeEvent, useContext, useEffect, useState } from \"react\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport {\n  addFalseToDaysCheckboxList,\n  addSectionSchema,\n  convertFromSemesterLength,\n  emptyMeeting,\n  getCourseNames,\n  getInstructionalMethods,\n  getNumbers,\n  getPrefixes,\n  getSectionLetters,\n  mapInputToInternalTypes,\n  mapInternalTypesToInput,\n  SectionInput,\n  useAddSectionToSchedule,\n  useDeleteMeetingFromSchedule,\n} from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport {\n  Day,\n  Half,\n  Intensive,\n  PopoverValueProps,\n  SemesterLength,\n  SemesterLengthOption,\n  Term,\n  Weekday,\n} from \"utilities/interfaces\";\nimport \"./AddSectionPopover.scss\";\n\nconst SPACING = 2;\n\nconst transformDataToTrueSectionInput = (data: SectionInput): SectionInput => {\n  const dataCourseSection = mapInputToInternalTypes(data);\n  let newMeeting = emptyMeeting;\n  if (dataCourseSection.newSection.meetings.length) {\n    [newMeeting] = dataCourseSection.newSection.meetings;\n  }\n  return mapInternalTypesToInput({\n    course: dataCourseSection.newCourse,\n    meeting: newMeeting,\n    section: dataCourseSection.newSection,\n  });\n};\n\n/* A form to input information to add a schedule */\nexport const AddSectionPopover = ({ values }: PopoverValueProps) => {\n  const {\n    appState: { schedule, rooms, professors },\n    setIsCSVLoading,\n  } = useContext(AppContext);\n\n  const methods = useForm<SectionInput>({\n    criteriaMode: \"all\",\n    defaultValues: mapInternalTypesToInput(values),\n    resolver: yupResolver(addSectionSchema),\n  });\n  const { reset } = methods;\n  const [semesterLength, setSemesterLength] = useState<SemesterLengthOption>(\n    convertFromSemesterLength(values?.section.semesterLength),\n  );\n  const { addSectionToSchedule } = useAddSectionToSchedule();\n  const { deleteMeetingFromSchedule } = useDeleteMeetingFromSchedule();\n\n  const onSubmit = (removeOldMeeting: boolean) => {\n    return async (data: SectionInput) => {\n      const dataTransformed = transformDataToTrueSectionInput(data);\n      // Submit the data if any of the form values were updated (omitting null and undefined values)\n      if (\n        !isEqual(omitBy(dataTransformed, isNil), omitBy(mapInternalTypesToInput(values), isNil))\n      ) {\n        await addSectionToSchedule(data, values, removeOldMeeting);\n      } else {\n        // Close the popover\n        setIsCSVLoading(true);\n        setIsCSVLoading(false);\n      }\n    };\n  };\n\n  const deleteMeeting = () => {\n    return () => {\n      deleteMeetingFromSchedule(values);\n    };\n  };\n\n  const onSemesterLengthChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setSemesterLength(e.target.value as SemesterLengthOption);\n  };\n\n  useEffect(() => {\n    setSemesterLength(convertFromSemesterLength(values?.section.semesterLength));\n    const inputValues = mapInternalTypesToInput(values);\n    reset(inputValues);\n  }, [reset, values]);\n\n  const isHalfSemester = semesterLength === SemesterLengthOption.HalfSemester;\n  const isIntensiveSemester = semesterLength === SemesterLengthOption.IntensiveSemester;\n  const isCustomSemester = semesterLength === SemesterLengthOption.CustomSemester;\n  const title = values ? \"Update Section\" : \"Add Section\";\n\n  let defaultTerm = values?.section.term;\n  if (Array.isArray(defaultTerm)) {\n    [defaultTerm] = defaultTerm;\n  }\n\n  const buttons = () => {\n    const addTitle = values ? \"Add New Section\" : \"Add Section\";\n    return (\n      <>\n        {values && (\n          <Button\n            className=\"update-button\"\n            color=\"primary\"\n            onClick={methods.handleSubmit(onSubmit(true))}\n            type=\"submit\"\n            variant=\"contained\"\n          >\n            Update Section\n          </Button>\n        )}\n        <Button\n          className=\"add-button\"\n          color=\"primary\"\n          onClick={methods.handleSubmit(onSubmit(false))}\n          type=\"submit\"\n          variant=\"contained\"\n        >\n          {addTitle}\n        </Button>\n        {values && (\n          <Button\n            className=\"delete-button\"\n            color=\"secondary\"\n            onClick={methods.handleSubmit(deleteMeeting())}\n            variant=\"contained\"\n          >\n            Delete Section\n          </Button>\n        )}\n      </>\n    );\n  };\n\n  // TODO: Make fields for termStart, startDate, and endDate?\n  return (\n    <FormProvider {...methods}>\n      <form className=\"popover-container\">\n        <Box mb={SPACING}>\n          <Typography className=\"popover-title\" variant=\"h4\">\n            {title}\n          </Typography>\n        </Box>\n        <Grid container spacing={SPACING}>\n          <GridItemTextField label=\"Department\" textFieldProps={{ autoFocus: true }} />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemAutocomplete label=\"Prefix\" multiple options={getPrefixes(schedule)} />\n          <GridItemAutocomplete label=\"Number\" options={getNumbers(schedule)} />\n          <GridItemAutocomplete label=\"Section\" options={getSectionLetters(schedule)} />\n          <GridItemAutocomplete label=\"Name\" options={getCourseNames(schedule)} />\n          <GridItemAutocomplete\n            label=\"Instructional Method\"\n            options={getInstructionalMethods(schedule)}\n          />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemAutocomplete label=\"Instructor\" multiple options={[...professors].sort()} />\n          <GridItemAutocomplete label=\"Location\" options={[...rooms].sort()} />\n          <GridItemTextField label=\"Room Capacity\" />\n          <GridItemTextField label=\"Faculty Hours\" />\n          <GridItemTextField label=\"Student Hours\" />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemTextField label=\"Anticipated Size\" />\n          <GridItemTextField label=\"Used\" />\n          <GridItemTextField label=\"Day 10 Used\" />\n          <GridItemTextField label=\"Local Max\" />\n          <GridItemTextField label=\"Global Max\" />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemTextField\n            label=\"Start Time\"\n            textFieldProps={{ fullWidth: true, type: \"time\" }}\n          />\n          <GridItemTextField\n            label=\"Duration\"\n            textFieldProps={{\n              InputProps: {\n                endAdornment: <InputAdornment position=\"end\">min</InputAdornment>,\n              },\n            }}\n          />\n          <GridItemTextField label=\"Year\" />\n          <GridItemTextField label=\"Status\" />\n          {/* This empty item just fills space */}\n          <Grid item xs />\n        </Grid>\n        <Grid container spacing={SPACING}>\n          <GridItemCheckboxGroup\n            initialValue={addFalseToDaysCheckboxList(values?.meeting?.days) as string[]}\n            label=\"Days\"\n            options={Object.values(Day).filter((day) => {\n              return Object.values(Weekday).includes(day);\n            })}\n          />\n          <GridItemRadioGroup label=\"Term\" options={Object.values(Term)} />\n          <GridItemRadioGroup\n            label=\"Semester Length\"\n            onChange={onSemesterLengthChange}\n            options={Object.values(SemesterLengthOption)}\n          />\n          <Grid item xs>\n            {isHalfSemester && (\n              <GridItemRadioGroup\n                label=\"Half Semester\"\n                options={Object.values(SemesterLength).filter((h) => {\n                  return Object.values(Half).includes(h);\n                })}\n              />\n            )}\n            {isIntensiveSemester && (\n              <GridItemRadioGroup\n                label=\"Intensive Semester\"\n                options={Object.values(SemesterLength).filter((i) => {\n                  return Object.values(Intensive).includes(i);\n                })}\n              />\n            )}\n            {isCustomSemester && (\n              <Grid container direction=\"column\" spacing={SPACING}>\n                {/* TODO: add support for custom */}\n                <GridItemTextField\n                  label=\"Start Date\"\n                  textFieldProps={{\n                    defaultValue: \"2020-20-20\",\n                    disabled: true,\n                    fullWidth: true,\n                    // type: \"date\",\n                  }}\n                />\n                <Typography variant=\"caption\">\n                  Custom semester lengths are not supported yet.\n                </Typography>\n              </Grid>\n            )}\n          </Grid>\n          <GridItemTextField\n            label=\"Notes\"\n            textFieldProps={{ multiline: true, name: \"comments\", rows: 4 }}\n            value={values?.section.comments}\n          />\n        </Grid>\n        <Grid alignItems=\"flex-end\" container justify=\"space-between\">\n          <Grid item>\n            <Typography variant=\"caption\">\n              Tip: use <b>tab</b> and <b>shift + tab</b> to navigate, <b>space bar</b> to select\n              days, <b>arrow keys</b> to select term and others, and <b>return</b> to submit.\n            </Typography>\n          </Grid>\n          <Grid className=\"popover-buttons\" item>\n            {buttons()}\n            {values?.section.timestamp && (\n              <Typography variant=\"caption\">\n                Last Edited: {moment(values?.section.timestamp).format(\"MMMM Do YYYY, h:mm:ss a\")}\n              </Typography>\n            )}\n          </Grid>\n        </Grid>\n      </form>\n    </FormProvider>\n  );\n};\n\nAddSectionPopover.defaultProps = {\n  values: undefined,\n};\n","import React, { PropsWithChildren, useCallback, useState } from \"react\";\nimport { animated, useSpring } from \"react-spring\";\nimport ReactVisibilitySensor from \"react-visibility-sensor\";\nimport \"./AnimateShowAndHide.scss\";\n\ninterface AnimateShowAndHide {\n  /* complete the animation once */\n  once?: boolean;\n}\n\n/* A component that animates children vertically when it goes into scroll view.\n  References:\n  - https://codesandbox.io/embed/zn2q57vn13\n  - https://stackoverflow.com/questions/56928771/reactjs-react-countup-visible-only-once-in-visibility-sensor\n*/\nexport const AnimateShowAndHide = ({ children, once }: PropsWithChildren<AnimateShowAndHide>) => {\n  const [isActive, setIsActive] = useState(true);\n  const [isVisible, setIsVisible] = useState(false);\n\n  const springProps = useSpring({\n    config: { friction: 200, mass: 5, tension: 2000 },\n    from: { height: 0, opacity: 0, x: 20 },\n    height: isVisible ? 130 : 0,\n    opacity: isVisible ? 1 : 0,\n    x: isVisible ? 0 : 20,\n  });\n\n  const onVisibilityChange = useCallback(\n    (isElemVisible: boolean) => {\n      /* Animate once */\n      if (once && isElemVisible) {\n        setIsVisible(true);\n        setIsActive(false);\n        /* Animate on every view */\n      } else {\n        setIsVisible(isElemVisible);\n      }\n    },\n    [once],\n  );\n\n  const { height } = springProps;\n\n  return (\n    <ReactVisibilitySensor active={isActive} onChange={onVisibilityChange}>\n      <div className=\"show-and-hide-main\">\n        <animated.div className=\"show-and-hide-text\" style={springProps}>\n          <animated.div style={{ height, paddingRight: 20 }}>{children}</animated.div>\n        </animated.div>\n      </div>\n    </ReactVisibilitySensor>\n  );\n};\n\nAnimateShowAndHide.defaultProps = {\n  once: true,\n};\n","import { NewTabLink } from \"components\";\nimport Image from \"material-ui-image\";\nimport React from \"react\";\nimport { animated, useSpring } from \"react-spring\";\nimport { TeamMember } from \"utilities\";\nimport { calc, trans } from \".\";\nimport \"./Spring3DHover.scss\";\n\ninterface Spring3DCard {\n  member: TeamMember;\n}\n\n/* Transforms and Reanimates an image when a mouse is hovered.\n  Ref: https://codesandbox.io/embed/rj998k4vmm\n*/\nexport const Spring3DHover = ({ member }: Spring3DCard) => {\n  const [springProps, set] = useSpring(() => {\n    return { config: { friction: 40, mass: 5, tension: 350 }, xys: [0, 0, 1] };\n  });\n\n  const { xys } = springProps;\n  const { photo, website, name } = member;\n\n  return (\n    <div className=\"spring-3d-wrapper\">\n      <NewTabLink href={website}>\n        <animated.div\n          className=\"spring-3d-content\"\n          onMouseLeave={() => {\n            return set({ xys: [0, 0, 1] });\n          }}\n          onMouseMove={({ clientX: x, clientY: y }) => {\n            return set({ xys: calc(x, y) });\n          }}\n          style={{ transform: xys.interpolate(trans as never) }}\n        >\n          <Image\n            alt={`image of ${name}`}\n            className=\"spring-3d-image\"\n            src={photo}\n            style={{ borderRadius: \"100%\" }}\n          />\n        </animated.div>\n      </NewTabLink>\n    </div>\n  );\n};\n","/* Referenced: https://codesandbox.io/embed/rj998k4vmm */\n\n/* Calculates the y, x, and scale for the transformation. */\nexport const calc = (x: number, y: number) => {\n  // TODO: This makes only things in the center perfectly transform.\n  // I can't figure out the math to fix this yet\n  // Need to offset for where the div is placed on the screen.\n  return [-(y - window.innerHeight / 2) / 50, (x - window.innerWidth / 2) / 50, 1.1];\n};\n\n/* Transforms the image */\nexport const trans = (x: number, y: number, s: number): string => {\n  return `perspective(600px) rotateX(${x}deg) rotateY(${y}deg) scale(${s})`;\n};\n","import React, { FC, PropsWithChildren } from \"react\";\nimport { Literal, Static, Union } from \"runtypes\";\nimport { createFC, getElements } from \"utilities\";\n\ninterface AsyncComponent {\n  isLoading: boolean;\n}\n\n// Define the runtype\nconst SubComponents = Union(Literal(\"Loading\"), Literal(\"Loaded\"));\n\n// Some boiler plate to get useable types.\ntype SubComponents = Static<typeof SubComponents>;\ntype AsyncSubComponents = { [key in SubComponents]: FC<{}> };\n\n/*\n  Show a loading state while waiting on a async function to finish.\n\n  Usage:\n  <AsyncComponent isLoading={boolean}>\n    <AsyncComponent.Loading>\n      content to display while loading\n    </AsyncComponent.Loading>\n    <AsyncComponent.Loaded>\n      content to display when loading is complete\n    </AsyncComponent.Loaded>\n  </AsyncComponent>\n\n  References:\n    - https://stackoverflow.com/a/56953600/9931154\n    - https://dev.to/shayanypn/buckle-with-react-sub-component-10ll\n*/\nexport const AsyncComponent: FC<AsyncComponent> & AsyncSubComponents = ({\n  children,\n  isLoading,\n}: PropsWithChildren<AsyncComponent>) => {\n  const { Loading, Loaded } = getElements(children, SubComponents);\n\n  return <>{isLoading ? <>{Loading}</> : <>{Loaded}</>}</>;\n};\n\n// Define sub-components.\nAsyncComponent.Loading = createFC(\"Loading\");\nAsyncComponent.Loaded = createFC(\"Loaded\");\n","// eslint-disable-next-line import/no-extraneous-dependencies\nimport FullCalendar from \"01/../@fullcalendar/react\";\nimport { CalendarOptions } from \"@fullcalendar/common\";\nimport interactionPlugin from \"@fullcalendar/interaction\"; // needed for dayClick\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport React from \"react\";\nimport { INITIAL_DATE } from \"utilities/constants\";\nimport \"./Calendar.scss\";\n\nexport const Calendar = (props: CalendarOptions) => {\n  return (\n    <>\n      <FullCalendar {...props} />\n    </>\n  );\n};\n\nCalendar.defaultProps = {\n  allDaySlot: false,\n  dayHeaderFormat: { weekday: \"short\" },\n  droppable: false,\n  editable: false, // TODO: Change to true if we can lock section meeting times\n  headerToolbar: false,\n  height: \"auto\",\n  initialDate: INITIAL_DATE,\n  initialView: \"timeGridWeek\",\n  nowIndicator: false,\n  plugins: [interactionPlugin, timeGridPlugin],\n  selectable: true,\n  slotMaxTime: \"22:00:00\",\n  slotMinTime: \"6:00:00\",\n  weekends: false,\n};\n","import { IconButton, Tooltip } from \"@material-ui/core\";\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport React from \"react\";\nimport { useFieldArrayFormContext } from \"utilities\";\nimport \"./DeleteFieldButton.scss\";\n\ninterface DeleteFieldButtonProps {\n  index: number;\n}\n\n/**\n * Deletes a row in the field array at a specific index.\n */\nexport const DeleteFieldButton = ({ index }: DeleteFieldButtonProps) => {\n  const { remove } = useFieldArrayFormContext();\n\n  return (\n    <div className=\"delete-field-button\">\n      <Tooltip title=\"Remove\">\n        <IconButton\n          aria-label=\"remove\"\n          onClick={() => {\n            remove(index);\n          }}\n        >\n          <HighlightOffIcon />\n        </IconButton>\n      </Tooltip>\n    </div>\n  );\n};\n","import { Box, TextField } from \"@material-ui/core\";\nimport React, { useMemo } from \"react\";\nimport { Controller } from \"react-hook-form\";\nimport { useFieldArrayFormContext } from \"utilities\";\n\ninterface FieldArrayFieldProps {\n  fieldIndex: string;\n  index: number;\n}\n\n/**\n * A single field in a field array. There could be multiple fields per row\n *   or just one.\n */\nexport const FieldArrayField = ({ index, fieldIndex }: FieldArrayFieldProps) => {\n  const {\n    control,\n    titleCaseName: name,\n    defaultValues,\n    textFieldProps,\n  } = useFieldArrayFormContext();\n\n  const defaultValue = useMemo(() => {\n    return defaultValues && defaultValues[index] ? defaultValues[index][fieldIndex] : \"\";\n  }, [defaultValues, fieldIndex, index]);\n\n  return (\n    <Box m={1}>\n      <Controller\n        as={<TextField {...textFieldProps} label={fieldIndex} variant=\"outlined\" />}\n        control={control}\n        defaultValue={defaultValue}\n        name={`${name}[${index}][${fieldIndex}]`}\n      />\n    </Box>\n  );\n};\n","import { Grid } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useFieldArrayFormContext } from \"utilities\";\nimport { DeleteFieldButton } from \"../DeleteFieldButton\";\nimport { FieldArrayField } from \"../FieldArrayField\";\n\n/**\n * Creates one row in the FieldArrayForm. Renders multiple fields\n *   if there are more keys in the original object.\n */\nexport const FieldArrayFields = () => {\n  const { fields } = useFieldArrayFormContext();\n\n  return (\n    <>\n      {fields.map((field, index) => {\n        return (\n          <Grid key={field.id} container>\n            <DeleteFieldButton index={index} />\n            {Object.keys(field)\n              .filter((f) => {\n                return f !== \"id\";\n              })\n              .map((key) => {\n                return <FieldArrayField key={key} fieldIndex={key} index={index} />;\n              })}\n          </Grid>\n        );\n      })}\n    </>\n  );\n};\n","import { Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useFieldArrayFormContext } from \"utilities\";\n\n/** Buttons at the bottom of the FieldArrayForm that allow the\n *   user to add more rows to the form and submit it.\n */\nexport const FieldArrayFormActionButtons = () => {\n  const { append, defaultValue, titleCaseName } = useFieldArrayFormContext();\n\n  return (\n    <>\n      <Button\n        color=\"secondary\"\n        onClick={() => {\n          append(defaultValue || {});\n        }}\n        style={{ margin: \"1em\" }}\n        type=\"button\"\n        variant=\"outlined\"\n      >\n        Add {titleCaseName?.slice(0, -1)}\n      </Button>\n\n      <Button color=\"primary\" style={{ margin: \"1em\" }} type=\"submit\" variant=\"outlined\">\n        Submit\n      </Button>\n    </>\n  );\n};\n","import { Card, CardContent, TextFieldProps } from \"@material-ui/core\";\nimport startCase from \"lodash/startCase\";\nimport toLower from \"lodash/toLower\";\nimport React, { useCallback, useEffect } from \"react\";\nimport { useFieldArray, useForm } from \"react-hook-form\";\nimport { FieldArrayFormProvider } from \"utilities\";\nimport { HarmonyStepperCallbackState, useHarmonyStepperCallback } from \"utilities/hooks\";\nimport { FieldArrayFields } from \"./FieldArrayFields\";\nimport { FieldArrayFormActionButtons } from \"./FieldArrayFormActionButtons\";\n\nexport interface FieldArrayFormProps {\n  defaultValues?: object[];\n  emptyValue: object;\n  fieldsName: string;\n  onSubmit?: (data: object[]) => void;\n  textFieldProps?: TextFieldProps;\n}\n\n/**\n * FieldArrayForm creates a form with a variable amount of fields all for similar values.\n * This uses a provider to pass form related data down the component tree.\n * Handles the form submission and formats the name to look nice on the web.\n */\nexport const FieldArrayForm = ({\n  fieldsName,\n  emptyValue,\n  defaultValues = [],\n  onSubmit,\n  textFieldProps,\n}: FieldArrayFormProps) => {\n  const titleCaseName = startCase(toLower(fieldsName));\n\n  // TODO: remove this. This component could not contain Harmony code.\n  const pushCallbacks = useHarmonyStepperCallback(selector);\n  const formMethods = useForm({\n    defaultValues: {\n      [titleCaseName]: [...defaultValues, emptyValue],\n    },\n  });\n  const { control, handleSubmit } = formMethods;\n  const fieldArrayMethods = useFieldArray({\n    control,\n    name: titleCaseName,\n  });\n\n  const onFormSubmit = useCallback(\n    // kinda a hack to get this to work and not do a full page submit. Ideally this would be in another callback onSave\n    handleSubmit((formData) => {\n      const dataWithNoEmpty = (formData as { [key: string]: object[] })[titleCaseName].filter(\n        (obj) => {\n          return Object.entries(obj).every(([, value]) => {\n            return value !== \"\";\n          });\n        },\n      );\n      onSubmit && onSubmit(dataWithNoEmpty);\n    }),\n    [handleSubmit, onSubmit, titleCaseName],\n  );\n\n  useEffect(() => {\n    pushCallbacks(onFormSubmit);\n  }, [onFormSubmit, pushCallbacks]);\n\n  return (\n    <FieldArrayFormProvider\n      {...formMethods}\n      {...fieldArrayMethods}\n      defaultValue={emptyValue}\n      defaultValues={defaultValues}\n      textFieldProps={textFieldProps}\n      titleCaseName={titleCaseName}\n    >\n      <Card style={{ marginBottom: \"2em\" }} variant=\"outlined\">\n        <CardContent>\n          <form onSubmit={onFormSubmit}>\n            <h2>{titleCaseName}: </h2>\n            <FieldArrayFields />\n            <FieldArrayFormActionButtons />\n          </form>\n        </CardContent>\n      </Card>\n    </FieldArrayFormProvider>\n  );\n};\n\nFieldArrayForm.defaultProps = {\n  onSubmit: undefined,\n};\n\nconst selector = (state: HarmonyStepperCallbackState) => {\n  return state.pushCallbacks;\n};\n","import { Grid, TextField } from \"@material-ui/core\";\nimport { Autocomplete, AutocompleteProps } from \"@material-ui/lab\";\nimport React from \"react\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport { useInput } from \"utilities\";\nimport \"./GridItemAutocomplete.scss\";\n\ninterface GridItemAutocomplete {\n  defaultValue?: string[];\n  label: string;\n  name?: string;\n}\n\n/* A text field to be used on forms */\nexport const GridItemAutocomplete = (\n  props: GridItemAutocomplete &\n    Omit<AutocompleteProps<unknown, boolean, boolean, boolean>, \"renderInput\">,\n) => {\n  const { defaultValue, label, name } = props;\n  const { control, errors } = useFormContext();\n  const { name: nameFallback, errorMessage } = useInput(label, errors);\n\n  return (\n    <Grid container direction=\"column\" item xs>\n      <Grid item xs>\n        <Controller\n          control={control}\n          defaultValue={defaultValue}\n          name={name ?? nameFallback}\n          onChange={([, data]: [unknown, unknown]) => {\n            return data;\n          }}\n          render={({ onChange, ...controllerProps }) => {\n            const cPropSet = new Set(\n              Array.isArray(controllerProps.value)\n                ? controllerProps.value\n                : [controllerProps.value],\n            );\n            const propsCopy = { ...props };\n            // Remove existing elements from the autocomplete options\n            // Set difference: https://stackoverflow.com/a/36504668/14478665\n            propsCopy.options = [\n              ...new Set(\n                props.options.filter((x) => {\n                  return x && !cPropSet.has(x);\n                }),\n              ),\n            ];\n            return (\n              <Autocomplete\n                autoSelect\n                freeSolo\n                onChange={(e, data) => {\n                  return onChange(data);\n                }}\n                openOnFocus\n                renderInput={(params) => {\n                  return (\n                    <TextField\n                      label={label}\n                      {...params}\n                      error={!!errorMessage}\n                      helperText={errorMessage}\n                      variant=\"outlined\"\n                    />\n                  );\n                }}\n                {...propsCopy}\n                {...controllerProps}\n              />\n            );\n          }}\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nGridItemAutocomplete.defaultProps = {\n  defaultValue: undefined,\n  name: undefined,\n};\n","import {\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  FormHelperText,\n  FormLabel,\n  Grid,\n} from \"@material-ui/core\";\nimport React, { ChangeEvent, useEffect, useState } from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useInput } from \"utilities\";\nimport \"./GridItemCheckboxGroup.scss\";\n\ninterface GridItemCheckboxGroup {\n  initialValue: string[];\n  label: string;\n  name?: string;\n  options: string[];\n}\n\nexport const GridItemCheckboxGroup = ({\n  label,\n  name,\n  options,\n  initialValue,\n}: GridItemCheckboxGroup) => {\n  const { register, errors } = useFormContext();\n  const { name: nameFallback, errorMessage } = useInput(label, errors);\n  const [value, onValueChange] = useState(initialValue);\n\n  useEffect(() => {\n    onValueChange(initialValue);\n  }, [initialValue]);\n\n  /* onCheckboxChange handles the value change when a checkbox is clicked\n      value is a string[] with a length equal to the number of options.\n      If an option is selected, its position in the value array is updated\n      with the option name. If it is unselected, its position in the value array\n      is updated with \"false\".\n  */\n  const onCheckboxChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const opt = e.target.value;\n    if (value) {\n      const valueCopy = [...value];\n      if (value?.includes(opt)) {\n        valueCopy.splice(options.indexOf(opt), 1, \"false\");\n        onValueChange(valueCopy);\n      } else {\n        valueCopy.splice(options.indexOf(opt), 1, opt);\n        onValueChange(valueCopy);\n      }\n    } else {\n      onValueChange([opt]);\n    }\n  };\n\n  return (\n    <Grid item xs>\n      <FormControl component=\"fieldset\" error={!!errorMessage}>\n        <FormLabel component=\"legend\">{label}</FormLabel>\n        <FormGroup>\n          <Grid container direction=\"column\">\n            {options.map((opt, i) => {\n              return (\n                <Grid key={opt} item>\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={value?.includes(opt) ?? false}\n                        onChange={onCheckboxChange}\n                      />\n                    }\n                    inputRef={register}\n                    label={opt}\n                    name={`${name ?? nameFallback}[${i}]`}\n                    value={opt}\n                  />\n                </Grid>\n              );\n            })}\n          </Grid>\n        </FormGroup>\n        <FormHelperText>{errorMessage}</FormHelperText>\n      </FormControl>\n    </Grid>\n  );\n};\n\nGridItemCheckboxGroup.defaultProps = {\n  name: undefined,\n};\n","import {\n  FormControl,\n  FormControlLabel,\n  FormLabel,\n  Grid,\n  Radio,\n  RadioGroup,\n} from \"@material-ui/core\";\nimport { camelCase } from \"lodash\";\nimport React, { ChangeEvent } from \"react\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport \"./GridItemRadioGroup.scss\";\n\ninterface GridItemRadioGroup {\n  defaultValue?: string;\n  label: string;\n  name?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  options: string[];\n}\n\n/* Renders a group of radio buttons for a form.\nRef: https://stackoverflow.com/questions/64042394/react-hook-form-and-material-ui-formcontrol */\nexport const GridItemRadioGroup = ({\n  defaultValue,\n  label,\n  name,\n  onChange,\n  options,\n}: GridItemRadioGroup) => {\n  const { control } = useFormContext();\n\n  return (\n    <Grid item xs>\n      <FormControl component=\"fieldset\">\n        <FormLabel component=\"legend\">{label}</FormLabel>\n        <Controller\n          as={\n            <RadioGroup>\n              {options.map((opt) => {\n                return (\n                  <FormControlLabel\n                    key={opt}\n                    control={<Radio onChange={onChange} />}\n                    label={opt}\n                    value={opt}\n                  />\n                );\n              })}\n            </RadioGroup>\n          }\n          control={control}\n          defaultValue={defaultValue}\n          name={name ?? camelCase(label)}\n        />\n      </FormControl>\n    </Grid>\n  );\n};\n\nGridItemRadioGroup.defaultProps = {\n  defaultValue: undefined,\n  name: undefined,\n  onChange: undefined,\n};\n","import { Grid, StandardTextFieldProps, TextField } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useInput } from \"utilities\";\nimport \"./GridItemTextField.scss\";\n\ninterface GridItemTextField {\n  label: string;\n  name?: string;\n  textFieldProps?: StandardTextFieldProps;\n  value?: string;\n}\n\n/* A text field to be used on forms */\nexport const GridItemTextField = ({ label, textFieldProps, value, name }: GridItemTextField) => {\n  const { register, errors } = useFormContext();\n  const { name: nameFallback, errorMessage } = useInput(label, errors);\n\n  return (\n    <Grid container direction=\"column\" item xs>\n      <Grid item xs>\n        <TextField\n          defaultValue={value}\n          fullWidth\n          inputRef={register}\n          label={label}\n          name={name ?? nameFallback}\n          {...textFieldProps}\n          error={!!errorMessage}\n          helperText={errorMessage}\n          variant=\"outlined\"\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nGridItemTextField.defaultProps = {\n  name: undefined,\n  textFieldProps: undefined,\n  value: \"\",\n};\n","import React, { PropsWithChildren } from \"react\";\nimport { useImportFile } from \"utilities\";\n\ninterface ImportInputWrapperProps {\n  /**\n   * If true, will add schedules together.\n   *   false will override the current schedule.\n   *\n   * @type {boolean}\n   * @memberof ImportInputWrapperProps\n   * @optional\n   */\n  isAdditiveImport?: boolean;\n}\n\n/**\n * Wraps whatever children in a label that will capture the click\n *   on the children and open the file explorer to upload a file.\n */\nexport const ImportInputWrapper = ({\n  children,\n  isAdditiveImport = false,\n}: PropsWithChildren<ImportInputWrapperProps>) => {\n  const onInputChange = useImportFile(isAdditiveImport);\n\n  const id = `${isAdditiveImport ? \"additive-\" : \"\"}import-button`;\n\n  return (\n    <label htmlFor={id}>\n      <input accept=\".csv, .xlsx\" className=\"hidden\" id={id} onChange={onInputChange} type=\"file\" />\n      {children}\n    </label>\n  );\n};\n","import { Modal, Paper } from \"@material-ui/core\";\nimport { Pagination } from \"@material-ui/lab\";\nimport React, {\n  ChangeEvent,\n  forwardRef,\n  Ref,\n  useContext,\n  useImperativeHandle,\n  useState,\n} from \"react\";\nimport {\n  CourseSectionMeeting,\n  CSMIterableKeyMap,\n  FindCourseSectionMeetingFunction,\n  PopoverValueProps,\n  UpdateModalPaginationRef,\n} from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport \"./ModalPagination.scss\";\n\ninterface ModalPaginationProps {\n  /**\n   * A component that displays a form to edit the entries\n   * @type {React.ElementType<PopoverValueProps>}\n   * @memberof ModalPaginationProps\n   */\n  PopoverComponent: React.ElementType<PopoverValueProps>;\n  /**\n   * Function to find specific CSMs for the specific cell clicked\n   * @type {FindCourseSectionMeetingFunction}\n   * @memberof ModalPaginationProps\n   */\n  findCourseSectionMeeting: FindCourseSectionMeetingFunction;\n}\n\ninterface IterableKeyMap {\n  iterable: string[];\n  key: string;\n}\n\n/**\n * Creates a modal for forms with multiple pages and allows the user to\n *   step through the pages and edit the same form for multiple entities.\n * Used on the FacultyPage to find CourseSectionMeetings\n */\nexport const ModalPagination = forwardRef(\n  (props: ModalPaginationProps, ref: Ref<UpdateModalPaginationRef>) => {\n    const { findCourseSectionMeeting, PopoverComponent } = props;\n\n    const {\n      appState: { schedule },\n    } = useContext(AppContext);\n\n    const [open, setOpen] = useState(false);\n    const [modalValues, setModalValues] = useState<CourseSectionMeeting>();\n    const [iterableKeyMap, setIterableKeyMap] = useState<IterableKeyMap>({\n      iterable: [],\n      key: \"\",\n    });\n    const [page, setPage] = useState(1);\n\n    const handlePageChange = (event: ChangeEvent<unknown>, value: number) => {\n      setPage(value);\n      const courseSectionMeeting = findCourseSectionMeeting(\n        schedule,\n        iterableKeyMap.iterable[value - 1],\n        iterableKeyMap.key,\n      );\n      if (courseSectionMeeting !== null) {\n        setOpen(false);\n        setModalValues(courseSectionMeeting);\n        setOpen(true);\n      }\n    };\n\n    const handleModalClose = () => {\n      setPage(1);\n      setOpen(false);\n    };\n\n    const handleModalOpen = ({ csm, iterable, key }: CSMIterableKeyMap) => {\n      if (csm) {\n        setModalValues(csm);\n        setIterableKeyMap({\n          iterable,\n          key,\n        });\n      }\n      setOpen(true);\n    };\n\n    // Allow parents to open the child modal.\n    useImperativeHandle(ref, () => {\n      return {\n        handleModalOpen,\n      };\n    });\n\n    return (\n      <Modal className=\"pagination-modal\" onClose={handleModalClose} open={open}>\n        <Paper className=\"pagination-modal-paper\">\n          <Pagination\n            count={iterableKeyMap.iterable.length}\n            onChange={handlePageChange}\n            page={page}\n          />\n          <PopoverComponent values={modalValues} />\n        </Paper>\n      </Modal>\n    );\n  },\n);\n","import { Link } from \"@material-ui/core\";\nimport React, { PropsWithChildren } from \"react\";\n\ntype NewTabLink = Pick<HTMLAnchorElement, \"href\">;\n\n/* Opens a link in a new tab. Useful for referencing pages outside of the app */\nexport const NewTabLink = ({ children, href }: PropsWithChildren<NewTabLink>) => {\n  return (\n    <Link href={href} rel=\"noopener noreferrer\" target=\"_blank\">\n      {children}\n    </Link>\n  );\n};\n","import React, { PropsWithChildren } from \"react\";\nimport \"./Page.scss\";\n\nexport const Page = ({ children }: PropsWithChildren<{}>) => {\n  return (\n    <div className=\"Page\">\n      <div className=\"content\">{children}</div>\n    </div>\n  );\n};\n","import { AsyncComponent, ScheduleBase, ScheduleBaseProps } from \"components\";\nimport React, { useState } from \"react\";\nimport { ScheduleContext } from \"utilities/contexts\";\nimport \"./Schedule.scss\";\n\n/* Provides a Schedule component to handle loading and async events and interfaces\n  with a BaseSchedule.\n*/\nexport const Schedule = (props: ScheduleBaseProps) => {\n  const [isScheduleLoading, setIsScheduleLoading] = useState(false);\n\n  return (\n    <ScheduleContext.Provider value={{ isScheduleLoading, setIsScheduleLoading }}>\n      <AsyncComponent isLoading={isScheduleLoading}>\n        <AsyncComponent.Loading>Updating Schedule...</AsyncComponent.Loading>\n        <AsyncComponent.Loaded>\n          <ScheduleBase {...props} />\n        </AsyncComponent.Loaded>\n      </AsyncComponent>\n    </ScheduleContext.Provider>\n  );\n};\n","import React from \"react\";\nimport StickyNode from \"react-stickynode\";\nimport { getCalendarClassName } from \"utilities\";\nimport { ScheduleBaseProps } from \"./ScheduleBase\";\n\ninterface ScheduleHeaderProps {\n  headers: ScheduleBaseProps[\"calendarHeaders\"];\n  scheduleType: ScheduleBaseProps[\"scheduleType\"];\n}\n\nconst tenVH = window.innerHeight / 10;\n\n/*\n  StickyHeader is used to keep the Schedule header sticky to the\n  top of the view port.\n*/\nexport const ScheduleHeader = ({ headers, scheduleType }: ScheduleHeaderProps) => {\n  return (\n    <StickyNode top={tenVH}>\n      <div className=\"adjacent schedule-header-row\">\n        {headers.map((header) => {\n          const className = `calendar-title ${getCalendarClassName(scheduleType)}`;\n          return (\n            <div key={header} className={className}>\n              {header}\n            </div>\n          );\n        })}\n      </div>\n    </StickyNode>\n  );\n};\n","import React from \"react\";\nimport { getHoursArr } from \"utilities/services\";\n\ninterface ScheduleLeftTimeAxisProps {\n  slotMaxTime: string;\n  slotMinTime: string;\n}\n\n/* Display the hours on the left axis of the schedule */\nexport const ScheduleLeftTimeAxis = ({\n  slotMinTime: min,\n  slotMaxTime: max,\n}: ScheduleLeftTimeAxisProps) => {\n  return (\n    <div className=\"left-time-axis\">\n      {getHoursArr(min, max).map((time) => {\n        return (\n          <div key={time} className=\"time-slot\">\n            <span>{`${time}:00`}</span>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import { CalendarOptions, EventClickArg } from \"@fullcalendar/react\";\nimport { Popover } from \"@material-ui/core\";\nimport { AddSectionPopover, Calendar, ScheduleToolbar } from \"components\";\nimport { bindPopover, usePopupState } from \"material-ui-popup-state/hooks\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport Stick from \"react-stick\";\nimport { CourseSectionMeeting, useAppContext } from \"utilities\";\nimport {\n  colorConflictBorders,\n  colorEventsByFeature,\n  filterEventsByTerm,\n  filterHeadersWithNoEvents,\n  getCalendarClassName,\n  GroupedEvents,\n} from \"utilities/services\";\nimport { ScheduleHeader } from \"./ScheduleHeader\";\nimport { ScheduleLeftTimeAxis } from \"./ScheduleLeftTimeAxis\";\n\nexport interface ScheduleBaseProps extends CalendarOptions {\n  calendarHeaders: string[];\n  groupedEvents: GroupedEvents;\n  readonly?: boolean;\n  scheduleType: string;\n}\n\n/* Creates a list of Calendars to create a Schedule\n  <Stick> is used to stick the Schedule Header to the Schedule\n  to track horizontal scrolling.\n*/\nexport const ScheduleBase = ({\n  readonly,\n  calendarHeaders,\n  groupedEvents,\n  scheduleType,\n  ...calendarOptions\n}: ScheduleBaseProps) => {\n  const {\n    appState: { colorBy, selectedTerm, slotMaxTime, slotMinTime },\n  } = useAppContext();\n  const [popupData, setPopupData] = useState<CourseSectionMeeting>();\n\n  const popupState = usePopupState({\n    popupId: \"addSection\",\n    variant: \"popover\",\n  });\n\n  const handleEventClick = useCallback(\n    (arg: EventClickArg) => {\n      setPopupData(arg.event.extendedProps as CourseSectionMeeting);\n      popupState.open(arg.el);\n    },\n    [popupState],\n  );\n\n  const times = {\n    slotMaxTime,\n    slotMinTime,\n  };\n\n  // Add context times to the existing calendarOptions\n  calendarOptions = {\n    ...calendarOptions,\n    ...times,\n  };\n\n  // Filter out events from other terms\n  const filteredEvents = useMemo(() => {\n    return filterEventsByTerm(groupedEvents, selectedTerm);\n  }, [groupedEvents, selectedTerm]);\n\n  // Filter out headers with no events\n  const calenderHeadersNoEmptyInTerm = useMemo(() => {\n    return filterHeadersWithNoEvents(filteredEvents, calendarHeaders);\n  }, [filteredEvents, calendarHeaders]);\n\n  // Color events by the selected feature\n  colorEventsByFeature(filteredEvents, colorBy);\n  colorConflictBorders(groupedEvents);\n\n  return (\n    <>\n      <ScheduleToolbar />\n      <div className=\"schedule-time-axis-wrapper\">\n        <ScheduleLeftTimeAxis {...times} />\n        <div className=\"schedule-wrapper\">\n          <Stick\n            node={\n              <ScheduleHeader headers={calenderHeadersNoEmptyInTerm} scheduleType={scheduleType} />\n            }\n            position=\"top left\"\n          >\n            <div className=\"adjacent\">\n              {calenderHeadersNoEmptyInTerm.map((header) => {\n                const className = `hide-axis ${getCalendarClassName(scheduleType)}`;\n                return (\n                  <div key={header} className={className}>\n                    <Calendar\n                      {...calendarOptions}\n                      key={header}\n                      eventClick={handleEventClick}\n                      events={filteredEvents[header]}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          </Stick>\n        </div>\n      </div>\n      <Popover\n        {...bindPopover(popupState)}\n        anchorOrigin={{\n          horizontal: \"left\",\n          vertical: \"bottom\",\n        }}\n        PaperProps={{ style: { maxHeight: \"90%\", maxWidth: \"90%\", minWidth: \"500px\" } }}\n        transformOrigin={{\n          horizontal: \"right\",\n          vertical: \"top\",\n        }}\n      >\n        <AddSectionPopover values={popupData} />\n      </Popover>\n    </>\n  );\n};\n","import { Button } from \"@material-ui/core\";\nimport React, { useCallback } from \"react\";\nimport { getCSVStr, loadRemoteCSV, useAppContext } from \"utilities/hooks\";\n\n/**\n * A button users can click to load a demo schedule\n */\nexport const ViewDemoButton = () => {\n  const appContext = useAppContext();\n\n  const demoUrl =\n    \"?csv=https://kvlinden.github.io/data/full_schedule_2021-04-07_submitted.csv\";\n  const csvIndex = demoUrl.indexOf(getCSVStr);\n\n  const onClick = useCallback(() => {\n    loadRemoteCSV(demoUrl, csvIndex, appContext);\n  }, [appContext, csvIndex]);\n\n  return (\n    <Button onClick={onClick} variant=\"contained\">\n      View Demo\n    </Button>\n  );\n};\n","import { Grid } from \"@material-ui/core\";\nimport { NewTabLink, Page } from \"components/reuseables\";\nimport React from \"react\";\nimport { team, TeamMember } from \"utilities\";\nimport { TeamMemberProfile, TextSection } from \".\";\nimport \"./AboutPage.scss\";\n\n/* A page with information about the project\n  with references */\nexport const AboutPage = () => {\n  return (\n    <Page>\n      <AboutVision />\n      <AboutTeam />\n      <AboutCode />\n      <AboutReport />\n      <AboutResources />\n    </Page>\n  );\n};\n\nconst AboutVision = () => {\n  return (\n    <TextSection\n      body={\n        <>\n          Every year, all department chairs at Calvin must develop a schedule for their department’s\n          classes based on a spreadsheet provided to them by the Registrar. The schedule must\n          contain the times, professors, and rooms for every class section in the department and the\n          schedule must satisfy the following constraints:\n          <ul>\n            <li>Only one section can be in a room at a time</li>\n            <li>A professor can only teach one section at a time</li>\n            <li>\n              Two sections taken together cannot be offered at the same time (e.g. CS 212 is often\n              taken together with MATH 251 and ENGR 220)\n            </li>\n            <li>Professors can only teach courses when they are available</li>\n            <li>Professors can only teach courses they are qualified to teach</li>\n            <li>Professors must/cannot teach consecutive classes depending on their preferences</li>\n            <li>A room’s capacity cannot be exceeded by the expected enrollment in the class</li>\n            <li>Faculty teaching loads cannot be “too high” or “too low”</li>\n          </ul>\n          These constraints make it extremely difficult for the department chair to create a\n          schedule without a tool to help them. We propose building a web application, named the\n          Course Schedulizer, that will allow department chairs to visualize and manipulate their\n          department course schedules. It will provide:\n          <ul>\n            <li>The ability to upload and export department schedules via CSV</li>\n            <li>Integration with the spreadsheets provided and required by the Registrar</li>\n            <li>Two views to visualize the schedule data (by location and by instructor)</li>\n            <li>Options to color the data by level, instructor, location, or prefix</li>\n            <li>Functionality to create, read, update, and delete class sections</li>\n            <li>A load summary for each instructor in the department</li>\n            <li>Schedule conflict detection and resolution suggestions (for honors portion)</li>\n            <li>An optimized user interface with an efficient use of screen space</li>\n            <li>An extensible interface to integrate with future systems (e.g. Workday)</li>\n          </ul>\n          By offering these features and improvements on the functionality previously implemented by\n          Professor Pruim and Professor VanderLinden, the Course Schedulizer will allow department\n          chairs to easily create their schedules.\n          <br />\n          <br />\n          For an Honors Project, Charles is completing a second project relating to constraint\n          problem satisfaction alongside the Course Schedulizer. By employing constraint\n          satisfaction techniques, Charles hopes to allow department chairs the ability to upload a\n          list of classes, professors, rooms, and times to the Course Schedulizer web application\n          and have the system create a schedule with no conflicts.\n        </>\n      }\n      title=\"Vision\"\n    />\n  );\n};\n\nconst AboutTeam = () => {\n  return (\n    <TextSection\n      body={\n        <Grid container direction=\"column\" justify=\"flex-start\" spacing={2}>\n          {team.map((member: TeamMember) => {\n            return <TeamMemberProfile key={member.name} member={member} />;\n          })}\n        </Grid>\n      }\n      title=\"Team\"\n    />\n  );\n};\n\nconst AboutCode = () => {\n  return (\n    <TextSection\n      body={\n        <>\n          This website is our code built and deployed. Feel free to play around with the site. Our\n          code repository is{\" \"}\n          <NewTabLink href=\"https://github.com/senior-knights/course-schedulizer\">\n            hosted on GitHub\n          </NewTabLink>\n          . We have two persistent branches: <code>production</code> and <code>develop</code>.{\" \"}\n          <code>production</code> is the working, stable build of the web application and{\" \"}\n          <code>develop</code> is the less-stable, bleeding-edge build of our Course Schedulizer\n          app. Please feel free to look around the code and interact with us on the discussion board\n          or by posting issues. The honors constraint satisfaction package is also{\" \"}\n          <NewTabLink href=\"https://github.com/charkour/csps\">hosted on GitHub</NewTabLink>. The\n          Harmoniously project code is also{\" \"}\n          <NewTabLink href=\"https://github.com/charkour/harmoniously\">hosted on GitHub</NewTabLink>.\n          For details on the development process, please view the respective ReadMes on GitHub.\n        </>\n      }\n      title=\"Code\"\n    />\n  );\n};\n\nconst AboutReport = () => {\n  return (\n    <TextSection\n      body={\n        <ul>\n          <li>\n            <NewTabLink href=\"https://docs.google.com/document/d/e/2PACX-1vQcSDE6VMNl-wMHhECt3RbeA3WD-tiXersevVAMDXfgImq9HMFS5yQnLx8mZ4qZ4Q/pub\">\n              Final Report\n            </NewTabLink>{\" \"}\n            - 5.13.2021\n          </li>\n          <li>\n            <NewTabLink href=\"https://docs.google.com/document/d/e/2PACX-1vQPQ1Qhu0jCVThVbNsUFxV8fB56fHgVf4Dnhfkf6EU_7627iMVuSHntW8VxF0j0Aw/pub\">\n              Updated Status Report\n            </NewTabLink>{\" \"}\n            - 12.15.2020\n          </li>\n          <li>\n            <NewTabLink href=\"https://docs.google.com/document/d/e/2PACX-1vQTy2A83LmPKrZhQ5_LCN6a3ow4UHxknIq4OjgimPU-Brfyl6fAhb9aQmxjNvg5tA/pub\">\n              Original Proposal\n            </NewTabLink>{\" \"}\n            - 10.15.2020\n          </li>\n        </ul>\n      }\n      title=\"Report\"\n    />\n  );\n};\n\nconst AboutResources = () => {\n  return (\n    <TextSection\n      body={\n        <ul>\n          <li>\n            <NewTabLink href=\"https://computing.calvin.edu/\">\n              Computing@Calvin Department Website\n            </NewTabLink>\n          </li>\n          <li>\n            <NewTabLink href=\"https://youtu.be/ckn0oPxvlIE\">Final Presentation Video</NewTabLink> -\n            4.25.2021\n          </li>\n          <li>\n            <NewTabLink href=\"https://docs.google.com/presentation/d/e/2PACX-1vRcyM-65kiLgceLaU7mQjnuzqPHKMt-nWT_msYcXeXbLeoe13awn2gSudzlC_5ghpyQlLVPzywJzywj/pub?start=false&loop=false&delayms=3000\">\n              Final Presentation Slides\n            </NewTabLink>{\" \"}\n            - 4.25.2021\n          </li>\n          <li>\n            <NewTabLink href=\"https://web.microsoftstream.com/video/cee6b774-a010-4220-a0d8-c6a6c5240d84?st=2456\">\n              Status Report Video\n            </NewTabLink>{\" \"}\n            - 12.01.2020\n          </li>\n          <li>\n            <NewTabLink href=\"https://docs.google.com/document/d/e/2PACX-1vS8sc8-Vs1qkfyGpelPXsuwvSQif3IFlnsZNoak3P7DbBmSYxWDgXL2ig-OJk8VJVHny2lCUZxCyCfJ/pub\">\n              Honors Status Report\n            </NewTabLink>{\" \"}\n            - 12.01.2020\n          </li>\n          <li>\n            <NewTabLink href=\"https://docs.google.com/presentation/d/e/2PACX-1vQrjMY5c-gnlvX5AAD1zIqRY0P5BLppQFT5y-3fxeR0TzuEvzUpDADYUGY_3J4TBe1PL3sq9rEqUdRA/pub?start=false&loop=false&delayms=3000\">\n              Status Report Slides\n            </NewTabLink>{\" \"}\n            - 12.01.2020\n          </li>\n        </ul>\n      }\n      title=\"Resources\"\n    />\n  );\n};\n","import { Grid } from \"@material-ui/core\";\nimport { Spring3DHover } from \"components\";\nimport React from \"react\";\nimport { TeamMember } from \"utilities\";\n\ninterface TeamMemberProfile {\n  member: TeamMember;\n}\n\n/* Display information about the Team Member */\nexport const TeamMemberProfile = ({ member }: TeamMemberProfile) => {\n  const { name, bio } = member;\n\n  return (\n    <Grid alignItems=\"center\" container item>\n      <Grid alignItems=\"center\" container direction=\"column\" item xs={4}>\n        <Spring3DHover member={member} />\n        <h3>{name}</h3>\n      </Grid>\n      <Grid container item xs={8}>\n        {bio}\n      </Grid>\n    </Grid>\n  );\n};\n","import { Box } from \"@material-ui/core\";\nimport { AnimateShowAndHide } from \"components\";\nimport React, { ReactNode } from \"react\";\n\ninterface TextSection {\n  body?: ReactNode;\n  title?: ReactNode;\n}\n\n/* Display a header with content. Used on About Page */\nexport const TextSection = ({ title, body }: TextSection) => {\n  return (\n    <Box mb={9} mt={3}>\n      <AnimateShowAndHide>{title}</AnimateShowAndHide>\n      <>{body}</>\n    </Box>\n  );\n};\n\nTextSection.defaultProps = {\n  body: undefined,\n  title: undefined,\n};\n","import { CustomButtonProps, Harmony as HarmonyBase, Result } from \"@harmoniously/react\";\nimport { Button } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  HarmonyAssignmentsState,\n  HarmonyResultState,\n  useHarmonyAssignmentsStore,\n  useHarmonyResultStore,\n} from \"utilities\";\n\n/** Harmony returns a component to automatically create schedules. */\nexport const Harmony = () => {\n  const assignments = useHarmonyAssignmentsStore(selector);\n  const setResult = useHarmonyResultStore(resultSelector);\n  const [res, setRes] = useState<Result>();\n\n  // Save state in the store.\n  useEffect(() => {\n    setResult(res);\n  }, [res, setResult]);\n\n  return (\n    <>\n      <HarmonyBase\n        assignments={assignments}\n        autoRun\n        button={CustomButton}\n        footer={<Footer />}\n        header={<></>}\n        setResult={setRes}\n      />\n    </>\n  );\n};\n\nconst selector = ({ assignments }: HarmonyAssignmentsState) => {\n  return assignments;\n};\n\nconst resultSelector = ({ setResult }: HarmonyResultState) => {\n  return setResult;\n};\n\nconst CustomButton = (props: CustomButtonProps) => {\n  return (\n    <Button variant=\"outlined\" {...props}>\n      Find Another Schedule\n    </Button>\n  );\n};\nconst Footer: React.FC = () => {\n  return (\n    <small>\n      powered by{\" \"}\n      <a href=\"https://github.com/charkour/harmoniously\">\n        <code>harmoniously</code>\n      </a>\n    </small>\n  );\n};\n","import { Checkbox, Grid } from \"@material-ui/core\";\nimport React, { ChangeEvent, Dispatch, SetStateAction, useCallback, useState } from \"react\";\n\ninterface HarmonyCheckboxProps {\n  defaultValue: boolean;\n  item: string;\n  setList: Dispatch<SetStateAction<string[]>>;\n}\n\n/** A single check box to update lists on the Harmony page */\nexport const HarmonyCheckbox = ({ setList, item, defaultValue }: HarmonyCheckboxProps) => {\n  const [checked, setChecked] = useState(defaultValue);\n\n  const handleChange = useCallback(\n    (clickedItem: string) => {\n      return (event: ChangeEvent<HTMLInputElement>) => {\n        const isChecked = event.target.checked;\n        setChecked(isChecked);\n        if (isChecked) {\n          setList((prevState) => {\n            return [...prevState, clickedItem];\n          });\n        } else {\n          setList((prevState) => {\n            return prevState.filter((i) => {\n              return i !== clickedItem;\n            });\n          });\n        }\n      };\n    },\n    [setList],\n  );\n\n  return (\n    <Grid alignItems=\"center\" container>\n      <Checkbox checked={checked} onChange={handleChange(item)} /> {item}\n    </Grid>\n  );\n};\n","import { ClassLimits } from \"@harmoniously/react\";\nimport React, { Dispatch, SetStateAction, useEffect, useMemo } from \"react\";\nimport { HarmonyAssignmentsState, useHarmonyAssignmentsStore } from \"utilities/hooks\";\nimport { HarmonyCheckbox } from \"./HarmonyCheckbox\";\n\ninterface HarmonyCheckboxListProps<T> {\n  course: string;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  customLabel?: (obj: any) => string;\n  id: string;\n  list: T;\n  setList: Dispatch<SetStateAction<string[]>>;\n}\n\n/** Multiple check boxes for a specific attribute: rooms, times, professors */\nexport const HarmonyCheckboxList = <T extends unknown[]>({\n  list,\n  course,\n  id,\n  customLabel,\n  setList,\n}: HarmonyCheckboxListProps<T>) => {\n  const assignments = useHarmonyAssignmentsStore(assignmentsSelector);\n\n  const inferredAssignmentsList = useMemo(() => {\n    const inferredAssignments = assignments[course][id as keyof ClassLimits];\n    return inferredAssignments;\n  }, [assignments, course, id]);\n\n  useEffect(() => {\n    setList(inferredAssignmentsList);\n  });\n\n  return (\n    <div>\n      <h3>{id}</h3>\n      {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\n      {list.map((itemObj: any) => {\n        const item: string =\n          (customLabel && customLabel(itemObj)) || itemObj[Object.keys(itemObj)[0]];\n        const defaultValue = inferredAssignmentsList.includes(item);\n        return (\n          <HarmonyCheckbox\n            key={`${item}-${course}`}\n            defaultValue={defaultValue}\n            item={item}\n            setList={setList}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nHarmonyCheckboxList.defaultProps = {\n  customLabel: undefined,\n};\n\nconst assignmentsSelector = ({ assignments }: HarmonyAssignmentsState) => {\n  return assignments;\n};\n","import { Box, Button, Card, CardContent, Grid } from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  HarmonyAssignmentsState,\n  HarmonyFormsAccessors,\n  HarmonyFormsState,\n  HarmonyStepperCallbackState,\n  SingularAccessors,\n  useHarmonyAssignmentsStore,\n  useHarmonyFormsStore,\n  useHarmonyStepperCallback,\n} from \"utilities/hooks\";\nimport { HarmonyCheckboxList } from \"./HarmonyCheckboxList\";\n\ninterface HarmonyCourseCheckboxesProps {\n  course: string;\n}\n\n/** All of the check box lists for each attribute for a specific class */\nexport const HarmonyCourseCheckboxes = ({ course }: HarmonyCourseCheckboxesProps) => {\n  const [professors, times, rooms] = useHarmonyFormsStore(selector);\n  const setClass = useHarmonyAssignmentsStore(assignmentsSelector);\n  const pushCallbacks = useHarmonyStepperCallback(stepperSelector);\n\n  const [profList, setProfList] = useState<string[]>([]);\n  const [timeList, setTimeList] = useState<string[]>([]);\n  const [roomList, setRoomList] = useState<string[]>([]);\n\n  const onSave = useCallback(() => {\n    setClass(course, { professors: profList, rooms: roomList, times: timeList });\n  }, [course, profList, roomList, setClass, timeList]);\n\n  useEffect(() => {\n    // TODO: this is likely causing lots of issues. They are all saving to a new store and thus\n    // are all causing re-renders which takes a long time. Investigate using the Chrome perf monitor\n    pushCallbacks(onSave);\n  }, [onSave, pushCallbacks]);\n\n  return (\n    <Box mb={2}>\n      <Card variant=\"outlined\">\n        <CardContent>\n          <h2>{course}</h2>\n          <Grid container justify=\"space-around\">\n            <HarmonyCheckboxList\n              course={course}\n              customLabel={(profObj: SingularAccessors[\"professor\"]) => {\n                return `${profObj.First} ${profObj.Last}`;\n              }}\n              id=\"professors\"\n              list={professors as HarmonyFormsAccessors[\"professors\"]}\n              setList={setProfList}\n            />\n            <HarmonyCheckboxList\n              course={course}\n              id=\"times\"\n              list={times as HarmonyFormsAccessors[\"times\"]}\n              setList={setTimeList}\n            />\n            <HarmonyCheckboxList\n              course={course}\n              id=\"rooms\"\n              list={rooms as HarmonyFormsAccessors[\"rooms\"]}\n              setList={setRoomList}\n            />\n          </Grid>\n          <Button onClick={onSave} type=\"button\">\n            Save\n          </Button>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\n// pick values from store.\nconst selector = ({ professors, times, rooms }: HarmonyFormsState) => {\n  return [professors, times, rooms];\n};\n\nconst assignmentsSelector = ({ setClass }: HarmonyAssignmentsState) => {\n  return setClass;\n};\n\nconst stepperSelector = (state: HarmonyStepperCallbackState) => {\n  return state.pushCallbacks;\n};\n","import React from \"react\";\nimport { HarmonyFormsAccessors, HarmonyFormsState, useHarmonyFormsStore } from \"utilities/hooks\";\nimport { HarmonyCourseCheckboxes } from \"./HarmonyCourseCheckboxes\";\n\n/**\n * Section on Harmony page designed to allow users to input\n *   assignment restrictions for courses.\n */\nexport const HarmonyAddAssignments = () => {\n  const courses = useHarmonyFormsStore(selector);\n  return (\n    <>\n      {(courses as HarmonyFormsAccessors[\"courses\"]).map((courseObj) => {\n        return <HarmonyCourseCheckboxes key={courseObj.Course} course={courseObj.Course} />;\n      })}\n    </>\n  );\n};\n\n// pick values from store.\nconst selector = ({ courses }: HarmonyFormsState) => {\n  return courses;\n};\n","import { FieldArrayForm, FieldArrayFormProps } from \"components\";\nimport React from \"react\";\nimport { HarmonyFormsState, useHarmonyFormsStore } from \"utilities/hooks/useHarmonyFormsStore\";\n\ninterface HarmonyFieldArrayFormProps extends FieldArrayFormProps {\n  onSubmit?: () => void;\n}\n\n/** Custom field array form for Harmony which injects the specific add function\n *   with the correct fieldsName using a closure.\n */\nexport const HarmonyFieldArrayForm = (props: HarmonyFieldArrayFormProps) => {\n  const { onSubmit, fieldsName } = props;\n  const update = useHarmonyFormsStore(selector);\n\n  const onSubmitCallback = React.useCallback(\n    (data: object[]) => {\n      update(fieldsName, data as { [key: string]: string }[]);\n      onSubmit && onSubmit();\n    },\n    [update, onSubmit, fieldsName],\n  );\n\n  return <FieldArrayForm {...props} onSubmit={onSubmitCallback} />;\n};\n\nHarmonyFieldArrayForm.defaultProps = {\n  onSubmit: undefined,\n};\n\nconst selector = (state: HarmonyFormsState) => {\n  return state.update;\n};\n","import { Button, Step, StepLabel, Stepper, Typography } from \"@material-ui/core\";\nimport {\n  HarmonyStepperAssignments,\n  HarmonyStepperImportData,\n  HarmonyStepperResult,\n  HarmonyStepperUpdateData,\n  HarmonyStepperWelcome,\n} from \"components\";\nimport React, { useCallback, useEffect } from \"react\";\nimport {\n  HarmonyResultState,\n  HarmonyStepperCallbackState,\n  useAppContext,\n  useHarmonyResultStore,\n  useHarmonyStepperCallback,\n  useRedirect,\n} from \"utilities/hooks\";\n\n// TODO: remove inline styles. better performance using .scss?\n/**\n * HarmonyStepper is a UI process to set the variables, attributes, and\n *   constraints to use CSP techniques to find a schedule with no conflicts.\n *\n * ref: https://material-ui.com/components/steppers/\n */\nexport const HarmonyStepper = () => {\n  const [activeStep, setActiveStep] = React.useState(0);\n  const [skipped, setSkipped] = React.useState(new Set<number>());\n  const steps = getSteps();\n  const { appDispatch } = useAppContext();\n  const redirectTo = useRedirect();\n  const schedule = useHarmonyResultStore(selector);\n  const { callbacks, clearCallbacks } = useHarmonyStepperCallback(stepperSelector);\n\n  const isStepOptional = (step: number) => {\n    return step === 1;\n  };\n\n  const isStepSkipped = (step: number) => {\n    return skipped.has(step);\n  };\n\n  const handleNext = () => {\n    let newSkipped = skipped;\n    if (isStepSkipped(activeStep)) {\n      newSkipped = new Set(newSkipped.values());\n      newSkipped.delete(activeStep);\n    }\n\n    setActiveStep((prevActiveStep) => {\n      return prevActiveStep + 1;\n    });\n    setSkipped(newSkipped);\n\n    // run callback if needed\n    callbacks.forEach((cb) => {\n      cb();\n    });\n    // clear callback from store\n    // TODO: need to clear if navigate away.\n    clearCallbacks();\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => {\n      return prevActiveStep - 1;\n    });\n  };\n\n  const handleSkip = () => {\n    if (!isStepOptional(activeStep)) {\n      // You probably want to guard against something like this,\n      // it should never occur unless someone's actively trying to break something.\n      throw new Error(\"You can't skip a step that isn't optional.\");\n    }\n\n    setActiveStep((prevActiveStep) => {\n      return prevActiveStep + 1;\n    });\n    setSkipped((prevSkipped) => {\n      const newSkipped = new Set(prevSkipped.values());\n      newSkipped.add(activeStep);\n      return newSkipped;\n    });\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  // Scroll to top when step changes.\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [activeStep]);\n\n  const onClick = useCallback(() => {\n    appDispatch({ payload: { schedule }, type: \"setScheduleData\" });\n    redirectTo(\"/\");\n  }, [appDispatch, redirectTo, schedule]);\n\n  return (\n    <div className=\"harmony-stepper-root\">\n      <div style={{ flex: \"1 0 auto\" }}>\n        {activeStep === steps.length ? (\n          <div>\n            <Typography className=\"harmony-stepper-content\">\n              All steps completed - you&apos;re finished\n            </Typography>\n            <Button className=\"harmony-stepper-button\" onClick={handleReset}>\n              Reset\n            </Button>\n            <Button\n              className=\"harmony-stepper-button\"\n              disabled={activeStep === 0}\n              onClick={handleBack}\n            >\n              Back\n            </Button>\n            <Button onClick={onClick} type=\"button\">\n              Send to Schedulizer\n            </Button>\n          </div>\n        ) : (\n          <div style={{ display: \"flex\", flexDirection: \"column\", height: \"100%\" }}>\n            <div className=\"harmony-stepper-content\" style={{ flex: \"1 0 auto\" }}>\n              {getStepContent(activeStep)}\n            </div>\n            <div style={{ flex: \"0 1 auto\", textAlign: \"end\" }}>\n              {/* TODO: state is not persisted, so back has no use currently */}\n              {/* <Button\n                className=\"harmony-stepper-button\"\n                disabled={activeStep === 0}\n                onClick={handleBack}\n              >\n                Back\n              </Button> */}\n              {isStepOptional(activeStep) && (\n                <Button\n                  className=\"harmony-stepper-button\"\n                  color=\"secondary\"\n                  onClick={handleSkip}\n                  variant=\"contained\"\n                >\n                  Skip\n                </Button>\n              )}\n              <Button color=\"primary\" onClick={handleNext} variant=\"contained\">\n                {activeStep === steps.length - 1 ? \"Finish\" : \"Next\"}\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n      <Stepper\n        activeStep={activeStep}\n        alternativeLabel\n        style={{ flex: \"0 1 auto\", paddingTop: \"5em\", textAlign: \"center\" }}\n      >\n        {steps.map((label, index) => {\n          const stepProps: { completed?: boolean } = {};\n          const labelProps: { optional?: React.ReactNode } = {};\n          if (isStepOptional(index)) {\n            labelProps.optional = <Typography variant=\"caption\">Optional</Typography>;\n          }\n          if (isStepSkipped(index)) {\n            stepProps.completed = false;\n          }\n          return (\n            <Step key={label} {...stepProps}>\n              <StepLabel {...labelProps}>{label}</StepLabel>\n            </Step>\n          );\n        })}\n      </Stepper>\n    </div>\n  );\n};\n\nconst getSteps = () => {\n  return [\"Welcome\", \"Import Data\", \"Update Data\", \"Create Assignments\", \"Find Schedule\"];\n};\n\n// TODO: somehow this should be linked to the values in getSteps\nconst getStepContent = (step: number) => {\n  switch (step) {\n    case 0:\n      return <HarmonyStepperWelcome />;\n    case 1:\n      return <HarmonyStepperImportData />;\n    case 2:\n      return <HarmonyStepperUpdateData />;\n    case 3:\n      return <HarmonyStepperAssignments />;\n    case 4:\n      return <HarmonyStepperResult />;\n    default:\n      return <>Unknown step</>;\n  }\n};\n\nconst selector = ({ schedule }: HarmonyResultState) => {\n  return schedule;\n};\n\nconst stepperSelector = ({ callbacks, clearCallbacks }: HarmonyStepperCallbackState) => {\n  return { callbacks, clearCallbacks };\n};\n","import { HarmonyAddAssignments } from \"components\";\nimport { AnimateShowAndHide } from \"components/reuseables\";\nimport React from \"react\";\n\n/** Fourth step in HarmonyStepper. Allows users to tweak the\n *   constraints for a valid schedule.\n */\nexport const HarmonyStepperAssignments = () => {\n  return (\n    <>\n      <AnimateShowAndHide>Assignments</AnimateShowAndHide>\n      <HarmonyAddAssignments />\n    </>\n  );\n};\n","import { Assignments } from \"@harmoniously/react\";\nimport { Button } from \"@material-ui/core\";\nimport { AnimateShowAndHide } from \"components/reuseables\";\nimport React, { useCallback } from \"react\";\nimport {\n  HarmonyAssignmentsState,\n  HarmonyFormsState,\n  useAppContext,\n  useHarmonyAssignmentsStore,\n  useHarmonyFormsStore,\n} from \"utilities\";\n\n/** Second step in Harmony Stepper. Allows users to import data\n *   and assignments from the current schedule.\n */\nexport const HarmonyStepperImportData = () => {\n  const {\n    appState: { schedule, rooms, professors, classes, times },\n  } = useAppContext();\n  const update = useHarmonyFormsStore(selector);\n  const setAssignments = useHarmonyAssignmentsStore(assignmentsSelector);\n\n  const hasScheduleData = schedule.courses.length > 0;\n\n  const addSchedulizerDataToStore = useCallback(() => {\n    update(\n      \"professors\",\n      professors.map((prof) => {\n        const [first, ...rest] = prof.split(\" \");\n        return { First: first, Last: rest.join(\" \") };\n      }),\n    );\n    update(\n      \"courses\",\n      classes.map((c) => {\n        return { Course: c.name };\n      }),\n    );\n    update(\n      \"rooms\",\n      rooms.map((r) => {\n        return { Room: r };\n      }),\n    );\n    update(\n      \"times\",\n      times.map((time) => {\n        return { Time: time };\n      }),\n    );\n    // generated assignments based on current data, professor can only teach certain classes. Any times allowed.\n\n    // foreach class, find the professor that teaches it. then add to the assignments\n    const inferredAssignments: Assignments = {};\n    classes.forEach((cls) => {\n      // get professors who teach the class currently\n      const { name, instructors } = cls;\n\n      inferredAssignments[name] = {\n        professors: instructors,\n        rooms,\n        times,\n      };\n    });\n    setAssignments(inferredAssignments);\n  }, [classes, professors, rooms, setAssignments, times, update]);\n\n  return (\n    <>\n      <AnimateShowAndHide>Import Data</AnimateShowAndHide>\n      <p>Use inferred data from schedule. and set assignments. Optional</p>\n      {hasScheduleData && (\n        <p>\n          We found schedule data: {rooms.length} room(s), {professors.length} professor(s),{\" \"}\n          {classes.length} class(es), and {times.length} time(s). Would you like to import those?\n        </p>\n      )}\n      <Button onClick={addSchedulizerDataToStore} variant=\"outlined\">\n        Import\n      </Button>\n      {/* <Button>Download JSON</Button>\n      <Button>Upload JSON</Button> */}\n    </>\n  );\n};\n\nconst selector = (state: HarmonyFormsState) => {\n  return state.update;\n};\n\nconst assignmentsSelector = (state: HarmonyAssignmentsState) => {\n  return state.setAssignments;\n};\n","import { AnimateShowAndHide, Harmony } from \"components\";\nimport React from \"react\";\n\n/** Fifth step in HarmonyStepper. Shows the results of Harmony\n *   and will display the valid schedule on the calendar.\n */\nexport const HarmonyStepperResult = () => {\n  return (\n    <>\n      <AnimateShowAndHide>Results</AnimateShowAndHide>\n      <Harmony />\n      {/* <HarmonySchedule /> */}\n    </>\n  );\n};\n","import { HarmonyFieldArrayForm } from \"components\";\nimport { AnimateShowAndHide } from \"components/reuseables\";\nimport React from \"react\";\nimport { HarmonyFormsState, useHarmonyFormsStore } from \"utilities/hooks\";\n\n/** Third step in HarmonyStepper. Allows users to make changes to\n *   rooms, courses, professors, and times a schedule can have.\n */\nexport const HarmonyStepperUpdateData = () => {\n  const { rooms, courses, professors, times } = useHarmonyFormsStore(selector);\n\n  return (\n    <>\n      <AnimateShowAndHide>Update Data</AnimateShowAndHide>\n      <HarmonyFieldArrayForm\n        defaultValues={professors}\n        emptyValue={{ First: \"\", Last: \"\" }}\n        fieldsName=\"professors\"\n      />\n      <HarmonyFieldArrayForm\n        defaultValues={courses}\n        emptyValue={{ Course: \"\" }}\n        fieldsName=\"courses\"\n      />\n      <HarmonyFieldArrayForm defaultValues={rooms} emptyValue={{ Room: \"\" }} fieldsName=\"rooms\" />\n      <HarmonyFieldArrayForm\n        defaultValues={times}\n        emptyValue={{ Time: \"\" }}\n        fieldsName=\"times\"\n        textFieldProps={{ type: \"time\" }}\n      />\n    </>\n  );\n};\n\nconst selector = ({ rooms, courses, professors, times }: HarmonyFormsState) => {\n  return { courses, professors, rooms, times };\n};\n","import { AnimateShowAndHide } from \"components\";\nimport React from \"react\";\n\n/** First step in Harmony stepper. Welcome and information */\nexport const HarmonyStepperWelcome = () => {\n  return (\n    <>\n      <AnimateShowAndHide>Harmony</AnimateShowAndHide>\n      <h1>\n        Note: This page is in a <i>pre-alpha</i> state. Output might not be perfect.\n      </h1>\n    </>\n  );\n};\n","import { HarmonyStepper, Page } from \"components\";\nimport React from \"react\";\nimport \"./HarmonyPage.scss\";\n\n/**\n * The page contains all of the Harmoniously user-experience.\n *   Allows the user to load professor, courses, rooms, and times from\n *   the uploaded schedule as well as edit them and create assignments (constraints).\n * Harmony will find schedules with no conflicts and allow the user to send it back\n *   to the Schedulizer to make edits.\n */\nexport const HarmonyPage = () => {\n  return (\n    <Page>\n      <HarmonyStepper />\n    </Page>\n  );\n};\n","import React from \"react\";\n\nexport const HelpPage = () => {\n  return <>Help</>;\n};\n","import { Tabs } from \"components\";\nimport React, { useEffect } from \"react\";\nimport { useImportRemoteFile } from \"utilities/hooks/importRemoteFileHook\";\n\nexport const SchedulizerPage = () => {\n  // Load a remote file from the GET parameters\n  const { importRemoteFile } = useImportRemoteFile();\n  useEffect(importRemoteFile);\n\n  return (\n    <>\n      <Tabs />\n    </>\n  );\n};\n","import { Footer, Header } from \"components\";\nimport { AboutPage, HarmonyPage, HelpPage, SchedulizerPage } from \"components/pages\";\nimport React, { useReducer, useState } from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport { reducer, useLocal } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport { initialAppState } from \"utilities/interfaces\";\nimport \"./App.scss\";\n\n/* App with a HashRouter.\nRef: https://medium.com/@bennirus/deploying-a-create-react-app-with-routing-to-github-pages-f386b6ce84c2\n*/\nexport const App = () => {\n  const [isCSVLoading, setIsCSVLoading] = useState(false);\n  const { save } = useLocal(\"appState\");\n  const [appState, appDispatch] = useReducer(reducer(save), initialAppState);\n\n  return (\n    <div className=\"App\">\n      <HashRouter basename=\"/\">\n        <Header />\n        <AppContext.Provider value={{ appDispatch, appState, isCSVLoading, setIsCSVLoading }}>\n          <div className=\"content-container\">\n            <Switch>\n              <Route path=\"/about\">\n                <AboutPage />\n              </Route>\n              <Route path=\"/help\">\n                <HelpPage />\n              </Route>\n              <Route path=\"/harmony\">\n                <HarmonyPage />\n              </Route>\n              <Route path=\"/\">\n                <SchedulizerPage />\n              </Route>\n            </Switch>\n          </div>\n        </AppContext.Provider>\n        <Footer />\n      </HashRouter>\n    </div>\n  );\n};\n","import { Box, Grid } from \"@material-ui/core\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport \"./Footer.scss\";\n\n/* Provides a footer that is always at the bottom of the page: no matter what.\n    Always provides the proper year. To get this working correctly, CSS-Tricks\n    was referenced for the flex-box version.\n  Ref: https://css-tricks.com/couple-takes-sticky-footer/#there-is-flexbox\n*/\nexport const Footer = () => {\n  return (\n    <footer className=\"app-footer\">\n      <Grid container justify=\"flex-start\">\n        <Box p={2}>© {moment().year()} Senior Knights</Box>\n      </Grid>\n    </footer>\n  );\n};\n","import CalvinLogo from \"./CalvinUniv-vert-full-color-inverse.png\";\n\nexport const logo = CalvinLogo;\n","import { AppBar, Toolbar, Typography } from \"@material-ui/core\";\nimport Link from \"@material-ui/core/Link\";\nimport { logo } from \"assets\";\nimport React from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport \"./Header.scss\";\n\n/* Header is the top bar that persists across the app */\nexport const Header = () => {\n  return (\n    <AppBar elevation={0} position=\"static\">\n      <Toolbar className=\"toolbar\">\n        <RouterLink className=\"toolbar-group title\" to=\"/\">\n          <img alt=\"Org Logo\" className=\"org-logo\" src={logo} />\n          <Typography variant=\"h6\">Course Schedulizer</Typography>\n        </RouterLink>\n        <Typography className=\"toolbar-group links\">\n          <Link component={RouterLink} to=\"/\">\n            Schedulizer\n          </Link>\n          <Link component={RouterLink} to=\"/harmony\">\n            Harmony\n          </Link>\n          <Link component={RouterLink} to=\"/about\">\n            About\n          </Link>\n          <Link component={RouterLink} to=\"/help\">\n            Help\n          </Link>\n        </Typography>\n      </Toolbar>\n    </AppBar>\n  );\n};\n","import { Schedule } from \"components\";\nimport React, { useContext } from \"react\";\nimport { getEvents } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport \"./DepartmentSchedule.scss\";\n\n/* Creates a list of Calendars to create the Department Schedule\n */\nexport const DepartmentSchedule = () => {\n  const {\n    appState: { departments, schedule },\n  } = useContext(AppContext);\n\n  return (\n    <>\n      <Schedule\n        calendarHeaders={departments.sort()}\n        groupedEvents={getEvents(schedule, \"department\")}\n        scheduleType=\"department\"\n      />\n    </>\n  );\n};\n","/* eslint-disable react/jsx-key */\nimport {\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport { UpdateNonTeachingLoadModalPagination, UpdateSectionModalPagination } from \"components\";\nimport React, { useContext, useMemo, useRef } from \"react\";\nimport { Cell, Column, useSortBy, useTable } from \"react-table\";\nimport {\n  createTable,\n  FacultyRow,\n  getCourseSectionMeetingFromCell,\n  getIdFromFaculty,\n  getNonTeachingLoadsFromCell,\n  UpdateModalPaginationRef,\n} from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport { AddNonTeachingLoadPopover, PopoverButton } from \"../../reuseables\";\nimport \"./FacultyLoads.scss\";\n\nexport const FacultyLoads = () => {\n  const {\n    appState: { schedule },\n  } = useContext(AppContext);\n\n  const data = useMemo<FacultyRow[]>(() => {\n    return createTable(schedule);\n  }, [schedule]);\n\n  const updateSectionModalRef = useRef<UpdateModalPaginationRef>(null);\n  const updateNonTeachingLoadModalRef = useRef<UpdateModalPaginationRef>(null);\n\n  const handleCellClick = (cell: Cell<FacultyRow>) => {\n    if (typeof cell.value === \"string\") {\n      const cellHeader = cell.column.Header as string;\n      const isNonTeachingLoad = cellHeader === \"Other Duties\";\n      const cellData = isNonTeachingLoad\n        ? getNonTeachingLoadsFromCell(schedule, cell.value, cell.row.values.faculty)\n        : getCourseSectionMeetingFromCell(schedule, cell.value, cellHeader);\n      if (cellData.csm) {\n        if (isNonTeachingLoad && updateNonTeachingLoadModalRef.current) {\n          updateNonTeachingLoadModalRef.current.handleModalOpen(cellData);\n        } else if (!isNonTeachingLoad && updateSectionModalRef.current) {\n          updateSectionModalRef.current.handleModalOpen(cellData);\n        }\n      }\n    }\n  };\n\n  const columns = useMemo<Column<FacultyRow>[]>(() => {\n    return [\n      { Header: \"Faculty\", accessor: \"faculty\" },\n      { Header: \"Total Hours\", accessor: \"totalHours\" },\n      { Header: \"Fall Course Sections\", accessor: \"fallCourseSections\" },\n      { Header: \"Fall Hours\", accessor: \"fallHours\" },\n      { Header: \"Spring Course Sections\", accessor: \"springCourseSections\" },\n      { Header: \"Spring Hours\", accessor: \"springHours\" },\n      { Header: \"Summer Course Sections\", accessor: \"summerCourseSections\" },\n      { Header: \"Summer Hours\", accessor: \"summerHours\" },\n      { Header: \"Other Duties\", accessor: \"otherDuties\" },\n      { Header: \"Other Hours\", accessor: \"otherHours\" },\n    ];\n  }, []);\n\n  // Sort by faculty name by default\n  data.sort((a, b): number => {\n    if (a.faculty < b.faculty) {\n      return -1;\n    }\n    return 1;\n  });\n\n  const tableInstance = useTable({ columns, data }, useSortBy);\n\n  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } = tableInstance;\n\n  // https://react-table.tanstack.com/docs/quick-start\n  return (\n    <>\n      <UpdateSectionModalPagination ref={updateSectionModalRef} />\n      <UpdateNonTeachingLoadModalPagination ref={updateNonTeachingLoadModalRef} />\n      <TableContainer component={Paper}>\n        <div className=\"add-non-teaching-activity-button\">\n          <PopoverButton\n            buttonTitle=\"Add Non-Teaching Activity\"\n            isIcon={false}\n            popupId=\"addNonTeachingActivity\"\n          >\n            <AddNonTeachingLoadPopover />\n          </PopoverButton>\n        </div>\n        <Table {...getTableProps()}>\n          <TableHead>\n            {\n              // Loop over the header rows\n              headerGroups.map((headerGroup) => {\n                return (\n                  // Apply the header row props\n                  <TableRow {...headerGroup.getHeaderGroupProps()}>\n                    {\n                      // Loop over the headers in each row\n                      headerGroup.headers.map((column) => {\n                        return (\n                          // Apply the header cell props, and sort when clicked\n                          // See https://codesandbox.io/s/github/tannerlinsley/react-table/tree/master/examples/sorting?file=/src/App.js:1439-1662\n                          <TableCell {...column.getHeaderProps(column.getSortByToggleProps())}>\n                            {\n                              // Render the header\n                              column.render(\"Header\")\n                            }\n                            <span>\n                              {column.isSorted ? (column.isSortedDesc ? \" 🔽\" : \" 🔼\") : \"\"}\n                            </span>\n                          </TableCell>\n                        );\n                      })\n                    }\n                  </TableRow>\n                );\n              })\n            }\n          </TableHead>\n          {/* Apply the table body props */}\n          <TableBody {...getTableBodyProps()}>\n            {\n              // Loop over the table rows\n              rows.map((row) => {\n                // Prepare the row for display\n                prepareRow(row);\n                const rowId = getIdFromFaculty(row.original.faculty);\n                return (\n                  // Apply the row props\n                  <TableRow {...row.getRowProps()} id={rowId}>\n                    {\n                      // Loop over the rows cells\n                      row.cells.map((cell) => {\n                        // Apply the cell props\n                        const cellClass =\n                          cell.value &&\n                          cell\n                            .getCellProps()\n                            .key.toString()\n                            .match(/(CourseSections)|(otherDuties)/g)\n                            ? \"change-cursor\"\n                            : \"\";\n                        return (\n                          <TableCell\n                            className={cellClass}\n                            {...cell.getCellProps()}\n                            onClick={() => {\n                              handleCellClick(cell);\n                            }}\n                          >\n                            {\n                              // Render the cell contents\n                              cell.render(\"Cell\")\n                            }\n                          </TableCell>\n                        );\n                      })\n                    }\n                  </TableRow>\n                );\n              })\n            }\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  );\n};\n","import { ModalPagination } from \"components\";\nimport { AddNonTeachingLoadPopover } from \"components/reuseables\";\nimport React, { forwardRef, Ref } from \"react\";\nimport { findNonTeachingLoad, UpdateModalPaginationRef } from \"utilities\";\nimport \"./UpdateNonTeachingLoadModalPagination.scss\";\n\n/**\n * Creates a popup modal used on the FacultyLoads page to find\n *   non-teaching loads and allow the user to page through and edit them\n *   on a modal.\n */\nexport const UpdateNonTeachingLoadModalPagination = forwardRef(\n  (props, ref: Ref<UpdateModalPaginationRef>) => {\n    return (\n      <ModalPagination\n        ref={ref}\n        findCourseSectionMeeting={findNonTeachingLoad}\n        PopoverComponent={AddNonTeachingLoadPopover}\n      />\n    );\n  },\n);\n\nUpdateNonTeachingLoadModalPagination.displayName = \"UpdateNonTeachingLoadModalPagination\";\n","import { AddSectionPopover, ModalPagination } from \"components\";\nimport React, { forwardRef, Ref } from \"react\";\nimport { FindCourseSectionMeetingFunction, findSection, UpdateModalPaginationRef } from \"utilities\";\nimport \"./UpdateSectionModalPagination.scss\";\n\n/**\n * Creates a popup modal used on the FacultyLoads page to find\n *   courses and allow the user to page through and edit them\n *   on a modal.\n */\nexport const UpdateSectionModalPagination = forwardRef(\n  (props, ref: Ref<UpdateModalPaginationRef>) => {\n    return (\n      <ModalPagination\n        ref={ref}\n        findCourseSectionMeeting={findSection as FindCourseSectionMeetingFunction}\n        PopoverComponent={AddSectionPopover}\n      />\n    );\n  },\n);\n\nUpdateSectionModalPagination.displayName = \"UpdateSectionModalPagination\";\n","import { Schedule } from \"components\";\nimport React, { useContext } from \"react\";\nimport { getEvents } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\nimport \"./FacultySchedule.scss\";\n\n/* Creates a list of Calendars to create the Faculty Schedule\n */\nexport const FacultySchedule = () => {\n  const {\n    appState: { professors, schedule },\n  } = useContext(AppContext);\n\n  return (\n    <>\n      <Schedule\n        calendarHeaders={professors.sort()}\n        groupedEvents={getEvents(schedule, \"faculty\")}\n        scheduleType=\"faculty\"\n      />\n    </>\n  );\n};\n","import { Schedule } from \"components\";\nimport React, { useContext } from \"react\";\nimport { getEvents } from \"utilities\";\nimport { AppContext } from \"utilities/contexts\";\n\nexport const RoomsSchedule = () => {\n  const {\n    appState: { schedule, rooms },\n  } = useContext(AppContext);\n\n  return (\n    <>\n      <Schedule\n        calendarHeaders={rooms.sort()}\n        groupedEvents={getEvents(schedule, \"room\")}\n        scheduleType=\"room\"\n      />\n    </>\n  );\n};\n","import { IconButton, Menu, MenuItem } from \"@material-ui/core\";\nimport { Menu as MenuIcon } from \"@material-ui/icons\";\nimport { ImportInputWrapper } from \"components\";\nimport { bindMenu, bindTrigger, usePopupState } from \"material-ui-popup-state/hooks\";\nimport React from \"react\";\nimport { useExportFullCSV } from \"utilities\";\nimport \"./CSVActions.scss\";\n\n/* Hamburger with options for the CSV */\nexport const CSVActions = () => {\n  const popupState = usePopupState({ popupId: \"menu\", variant: \"popover\" });\n  const onFullExportClick = useExportFullCSV();\n\n  return (\n    <>\n      <IconButton color=\"inherit\" edge=\"start\" {...bindTrigger(popupState)}>\n        <MenuIcon />\n      </IconButton>\n      <Menu // Anchoring from: https://codesandbox.io/s/3rmgv?file=/demo.js:603-812\n        anchorOrigin={{\n          horizontal: \"right\",\n          vertical: \"top\",\n        }}\n        getContentAnchorEl={null}\n        transformOrigin={{\n          horizontal: \"left\",\n          vertical: \"top\",\n        }}\n        {...bindMenu(popupState)}\n      >\n        <ImportInputWrapper isAdditiveImport={false}>\n          <MenuItem button>IMPORT NEW SCHEDULE</MenuItem>\n        </ImportInputWrapper>\n        <ImportInputWrapper isAdditiveImport>\n          <MenuItem button>ADD SCHEDULE</MenuItem>\n        </ImportInputWrapper>\n        <MenuItem button onClick={onFullExportClick}>\n          EXPORT CSV\n        </MenuItem>\n      </Menu>\n    </>\n  );\n};\n","import { Button, ButtonProps } from \"@material-ui/core\";\nimport { ImportInputWrapper } from \"components\";\nimport React from \"react\";\nimport \"../CSVActions.scss\";\n\n/* An import button that is stylable using the Mat UI props. */\nexport const ImportButton = (btnProps: ButtonProps) => {\n  return (\n    <ImportInputWrapper>\n      <Button color=\"primary\" component=\"span\" {...btnProps}>\n        Import Schedule\n      </Button>\n    </ImportInputWrapper>\n  );\n};\n","import { Box } from \"@material-ui/core\";\nimport { AddSectionButton, ImportButton, ViewDemoButton } from \"components\";\nimport React from \"react\";\nimport \"./NoCoursesHeader.scss\";\n\n/* Display information when schedule has no courses. */\nexport const NoCoursesHeader = () => {\n  return (\n    <>\n      <h2>No schedule data.</h2>\n      <p>\n        Please import a CSV of an existing schedule or start building the schedule from scratch by\n        adding your first section.\n      </p>\n      <Box component=\"span\" marginRight={1}>\n        <ImportButton variant=\"contained\" />\n      </Box>\n      <Box component=\"span\" marginRight={1}>\n        <AddSectionButton isIcon={false} />\n      </Box>\n      <ViewDemoButton />\n    </>\n  );\n};\n","import { Box, Typography } from \"@material-ui/core\";\nimport React, { PropsWithChildren } from \"react\";\n\ninterface TabPanelProps {\n  index: number;\n  value: number;\n}\n\n/* TabPanel displays the content of a selected tab */\nexport const TabPanel = (props: PropsWithChildren<TabPanelProps>) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      aria-labelledby={`simple-tab-${index}`}\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      role=\"tabpanel\"\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>\n          <Typography component=\"div\">{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n};\n","import { Container, Tab, Tabs as MUITabs, Typography } from \"@material-ui/core\";\nimport { AsyncComponent } from \"components\";\nimport { DepartmentSchedule, FacultyLoads, FacultySchedule, RoomsSchedule } from \"components/Tabs\";\nimport React, { ChangeEvent, useContext, useState } from \"react\";\nimport { AppContext } from \"utilities/contexts\";\nimport { SchedulizerTab } from \"utilities/interfaces\";\nimport { CSVActions, NoCoursesHeader, TabPanel } from \"./tabComponents\";\nimport \"./Tabs.scss\";\n\n/* A navigator between the different features of the app */\nexport const Tabs = () => {\n  const {\n    appState: { schedule, schedulizerTab },\n    isCSVLoading,\n    appDispatch,\n  } = useContext(AppContext);\n  const [tabValue, setTabValue] = useState(schedulizerTab || 0);\n\n  const handleTabChange = (event: ChangeEvent<{}>, newValue: SchedulizerTab) => {\n    setTabValue(newValue);\n    appDispatch({ payload: { schedulizerTab: newValue }, type: \"setSchedulizerTab\" });\n  };\n\n  const scheduleHasCourses = schedule.courses.length > 0;\n\n  return (\n    <AsyncComponent isLoading={isCSVLoading}>\n      <AsyncComponent.Loading>Parsing CSV...</AsyncComponent.Loading>\n      <AsyncComponent.Loaded>\n        {scheduleHasCourses ? (\n          <>\n            <Container className=\"schedulizer-header\" maxWidth={false}>\n              <CSVActions />\n\n              <MUITabs\n                centered\n                indicatorColor=\"primary\"\n                onChange={handleTabChange}\n                textColor=\"primary\"\n                value={tabValue}\n              >\n                <Tab label=\"Faculty Schedule\" />\n                <Tab label=\"Room Schedule\" />\n                <Tab label=\"Dept Schedule\" />\n                <Tab label=\"Teaching Loads\" />\n                <Tab label=\"Conflicts\" />\n              </MUITabs>\n              <span>{/* Empty */}</span>\n            </Container>\n            <TabPanel index={0} value={tabValue}>\n              <FacultySchedule />\n            </TabPanel>\n            <TabPanel index={1} value={tabValue}>\n              <RoomsSchedule />\n            </TabPanel>\n            <TabPanel index={2} value={tabValue}>\n              <DepartmentSchedule />\n            </TabPanel>\n            <TabPanel index={3} value={tabValue}>\n              <FacultyLoads />\n            </TabPanel>\n            <TabPanel index={4} value={tabValue}>\n              <Typography>The conflicts tab is not supported yet.</Typography>\n            </TabPanel>\n          </>\n        ) : (\n          <NoCoursesHeader />\n        )}\n      </AsyncComponent.Loaded>\n    </AsyncComponent>\n  );\n};\n","import { InputLabel, MenuItem, Select } from \"@material-ui/core\";\nimport React, { ChangeEvent, useContext } from \"react\";\nimport { AppContext } from \"utilities/contexts\";\nimport { ColorBy } from \"utilities/interfaces\";\nimport \"./ColorSelector.scss\";\n\nexport const ColorSelector = () => {\n  const {\n    appState: { colorBy },\n    appDispatch,\n    setIsCSVLoading,\n  } = useContext(AppContext);\n\n  const handleColorChange = (event: ChangeEvent<{ value: unknown }>) => {\n    setIsCSVLoading(true);\n    const selectedColorBy = event.target.value as ColorBy;\n    appDispatch({ payload: { colorBy: selectedColorBy }, type: \"setColorBy\" });\n    setIsCSVLoading(false);\n  };\n\n  return (\n    <div>\n      <InputLabel id=\"label\">Color By</InputLabel>\n      <Select id=\"color-select\" onChange={handleColorChange} value={colorBy}>\n        <MenuItem value={ColorBy.Level}>Level</MenuItem>\n        <MenuItem value={ColorBy.Room}>Room</MenuItem>\n        <MenuItem value={ColorBy.Instructor}>Instructor</MenuItem>\n        <MenuItem value={ColorBy.Prefix}>Prefix</MenuItem>\n      </Select>\n    </div>\n  );\n};\n","import { AddSectionButton, ColorSelector, Searchbar, SemesterSelector } from \"components\";\nimport React, { useContext } from \"react\";\nimport { AppContext } from \"utilities/contexts\";\nimport \"./ScheduleToolbar.scss\";\n\nexport const ScheduleToolbar = () => {\n  const {\n    appState: { fileUrl },\n  } = useContext(AppContext);\n\n  return (\n    <div className=\"schedule-toolbar\">\n      <div className=\"toolbar-left\">\n        <Searchbar />\n        <ColorSelector />\n      </div>\n      <div>{fileUrl ? `Imported URL: ${fileUrl}` : \"\"}</div>\n      <div className=\"toolbar-right\">\n        <SemesterSelector />\n        <AddSectionButton />\n      </div>\n    </div>\n  );\n};\n","import { TextField } from \"@material-ui/core\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport React from \"react\";\nimport \"./Searchbar.scss\";\n\nexport const Searchbar = () => {\n  return (\n    <Autocomplete\n      className=\"searchbar\"\n      getOptionLabel={(option) => {\n        return option.label;\n      }}\n      id=\"combo-box-demo\"\n      options={notSupported}\n      renderInput={(params) => {\n        return <TextField {...params} label=\"Search\" variant=\"outlined\" />;\n      }}\n    />\n  );\n};\n\nconst notSupported = [{ label: \"The searchbar is not supported yet.\" }];\n","import { IconButton, Typography } from \"@material-ui/core\";\nimport { ChevronLeft, ChevronRight } from \"@material-ui/icons\";\nimport React, { useContext } from \"react\";\nimport { enumArray, Term } from \"utilities\";\nimport { AppContext, ScheduleContext } from \"utilities/contexts\";\nimport \"./SemesterSelector.scss\";\n\nexport const SemesterSelector = () => {\n  const terms: Term[] = enumArray(Term);\n  const {\n    appState: { selectedTerm },\n    appDispatch,\n  } = useContext(AppContext);\n  const { setIsScheduleLoading } = useContext(ScheduleContext);\n\n  const handleOnClick = (index: number) => {\n    return async () => {\n      setIsScheduleLoading(true);\n      const newTerm = terms[index];\n      // This action takes so long it affectively makes this\n      //  synchronous function asynchronous.\n      await appDispatch({\n        payload: { selectedTerm: newTerm },\n        type: \"setSelectedTerm\",\n      });\n      setIsScheduleLoading(false);\n    };\n  };\n\n  return (\n    <div className=\"semester-selector\">\n      <IconButton\n        disabled={selectedTerm === terms[0]}\n        onClick={handleOnClick(terms.indexOf(selectedTerm) - 1)}\n      >\n        <ChevronLeft />\n      </IconButton>\n      <Typography variant=\"h6\">{selectedTerm}</Typography>\n      <IconButton\n        disabled={selectedTerm === terms[terms.length - 1]}\n        onClick={handleOnClick(terms.indexOf(selectedTerm) + 1)}\n      >\n        <ChevronRight />\n      </IconButton>\n    </div>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { App } from \"components\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as serviceWorker from \"serviceWorker\";\nimport \"styles/index.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export * from \"./appInterfaces\";\nexport * from \"./dataInterfaces\";\nexport * from \"./fieldArrayTypes\";\nexport * from \"./popover\";\n","import { cloneDeep, forEach } from \"lodash\";\nimport moment from \"moment\";\nimport { emptyMeeting } from \"utilities/constants\";\nimport { Course, Day, Meeting, Section, SemesterLength, Term } from \"utilities/interfaces\";\n\nexport interface CaseCallbackParams {\n  course: Course;\n  meetings: Meeting[];\n  section: Section;\n}\n\nexport const MIN_HALF_LENGTH = 35;\nexport const MAX_HALF_LENGTH = 80;\nconst SEPARATORS = [\",\", \";\", \"\\n\"];\n\n// Define regexes for parsing\n// const timeReg = RegExp(\"(?<![1-9])(1[0-9]|2[0-3]|[0-9]):([0-5][0-9])\");\n// const amReg = RegExp(\"[Aa][Mm]\");\n// const pmReg = RegExp(\"[Pp][Mm]\");\nconst fallReg = RegExp(\"[Ff]\");\nconst summerReg = RegExp(\"[Ss][Uu]|[Mm][Aa]\");\nconst springReg = RegExp(\"[Ss](?![Uu])\");\n// \"W\" represents interim in Pruim's system it seems\nconst interimReg = RegExp(\"[Ii]|[Ww]\");\nconst sunReg = RegExp(\"[Ss][Uu]|[Nn]\");\nconst monReg = RegExp(\"[Mm]\");\nconst tuesReg = RegExp(\"[Tt](?![Hh])\");\nconst wedReg = RegExp(\"[Ww]\");\nconst thursReg = RegExp(\"[Tt][Hh]|[Rr]\");\nconst friReg = RegExp(\"[Ff]\");\nconst satReg = RegExp(\"[Ss](?![Uu])\");\n\nconst createMeetings = (value: string, { meetings }: CaseCallbackParams): string[] => {\n  const valueParts = value.split(\"\\n\");\n  valueParts.forEach((_, i) => {\n    if (meetings.length <= i) {\n      // If there aren't enough meetings, create a new one\n      meetings.push(cloneDeep(emptyMeeting));\n    }\n  });\n  return valueParts;\n};\n\nconst assignWithMeetings = (\n  value: string,\n  params: CaseCallbackParams,\n  arrAssign: (value: string, i: number, arr: Meeting[]) => void,\n) => {\n  const valueParts = createMeetings(value, params);\n  const { meetings } = params;\n  valueParts.forEach((v, i) => {\n    arrAssign(v, i, meetings);\n  });\n};\n\nexport const startTimeCallback = (value: string, params: CaseCallbackParams) => {\n  assignWithMeetings(value, params, (startTime, i, meetings) => {\n    meetings[i].startTime = startTimeCase(startTime);\n  });\n};\n\nexport const locationCallback = (value: string, params: CaseCallbackParams) => {\n  assignWithMeetings(value, params, (location, i, meetings) => {\n    [meetings[i].location.building, meetings[i].location.roomNumber] = locationCase(location);\n  });\n};\n\nexport const termCallback = (value: string, { section }: CaseCallbackParams) => {\n  let separator = \",\";\n  if (\n    SEPARATORS.some((s) => {\n      separator = s;\n      return value.includes(s);\n    })\n  ) {\n    const terms = value.split(separator);\n    const termsArr: Term[] = [];\n    forEach(terms, (term) => {\n      termsArr.push(termCase(term));\n    });\n    section.term = termsArr;\n  } else {\n    section.term = value === \"\" ? [] : termCase(value);\n  }\n};\n\nexport const semesterLengthCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.semesterLength = semesterLengthCase(value);\n};\n\nexport const daysCallback = (value: string, params: CaseCallbackParams) => {\n  assignWithMeetings(value, params, (days, i, meetings) => {\n    meetings[i].days = daysCase(days);\n  });\n};\n\nexport const instructorCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.instructors = instructorCase(value);\n};\n\nexport const prefixCallback = (value: string, { course }: CaseCallbackParams) => {\n  course.prefixes = value === \"\" ? [] : prefixCase(value);\n};\n\nexport const nameCallback = (value: string, { course }: CaseCallbackParams) => {\n  course.name = value;\n};\n\nexport const numberCallback = (value: string, { course }: CaseCallbackParams) => {\n  course.number = value;\n};\n\nexport const letterCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.letter = value;\n};\n\nexport const globalMaxCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.globalMax = integerDefaultZeroCase(value);\n};\n\nexport const localMaxCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.localMax = integerDefaultZeroCase(value);\n};\n\nexport const anticipatedSizeCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.anticipatedSize = integerDefaultZeroCase(value);\n};\n\nexport const commentsCallback = (value: string, { section }: CaseCallbackParams) => {\n  if (value.trim() !== \"\") {\n    section.comments = value;\n  }\n};\n\nexport const yearCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.year = yearCase(value);\n};\n\nexport const studentHoursCallback = (value: string, { section }: CaseCallbackParams) => {\n  // Remove '$' is Excel prepended it to the student hours\n  section.studentHours = value.startsWith(\"$\") ? Number(value.substr(1)) : Number(value);\n};\n\nexport const facultyHoursCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.facultyHours = value.startsWith(\"$\") ? Number(value.substr(1)) : Number(value);\n};\n\nexport const durationCallback = (value: string, params: CaseCallbackParams) => {\n  assignWithMeetings(value, params, (duration, i, meetings) => {\n    meetings[i].duration = durationCase(duration);\n  });\n};\n\nexport const roomCapacityCallback = (value: string, params: CaseCallbackParams) => {\n  assignWithMeetings(value, params, (capacity, i, meetings) => {\n    meetings[i].location.roomCapacity =\n      value.trim() === \"\" ? undefined : integerDefaultZeroCase(capacity);\n  });\n};\n\nexport const departmentCallback = (value: string, { course }: CaseCallbackParams) => {\n  course.department = value;\n};\n\nexport const termStartCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.termStart = value;\n};\n\nexport const usedCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.used = integerDefaultZeroCase(value);\n};\n\nexport const day10UsedCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.day10Used = integerDefaultZeroCase(value);\n};\n\nexport const startDateCallback = (value: string, { section }: CaseCallbackParams) => {\n  if (value.trim() !== \"\") {\n    section.startDate = value;\n  }\n};\n\nexport const endDateCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.endDate = value;\n  section.semesterLength = endDateCase(value, section.startDate);\n};\n\nexport const statusCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.status = value;\n};\n\nexport const timestampCallback = (value: string, { section }: CaseCallbackParams) => {\n  if (value.trim() !== \"\") {\n    section.timestamp = value;\n  }\n};\n\nexport const instructionalMethodCallback = (value: string, { section }: CaseCallbackParams) => {\n  section.instructionalMethod = value;\n};\n\nexport const sectionCallback = (value: string, params: CaseCallbackParams) => {\n  if (value === \"--\" || value.trim() === \"\") {\n    params.section.isNonTeaching = true;\n  } else {\n    const sectionParts = value.split(\"-\");\n    prefixCallback(sectionParts[0], params);\n    numberCallback(sectionParts[1], params);\n    letterCallback(sectionParts[2], params);\n  }\n};\n\nexport const timeCallback = (value: string, params: CaseCallbackParams) => {\n  const [startTime] = value.split(\" \").join(\"\").split(\"-\");\n  startTimeCallback(startTime, params);\n  durationCallback(value, params);\n};\n\nexport const nonTeachingActivityCallback = (value: string, params: CaseCallbackParams) => {\n  params.section.isNonTeaching = true;\n  instructionalMethodCallback(value, params);\n};\n\nexport const startTimeCase = (value: string): string => {\n  const startMoment = moment(value, \"h:mm A\");\n  return startMoment.isValid() ? startMoment.format(\"h:mm A\") : \"\";\n};\n\nexport const locationCase = (value: string): string[] => {\n  if (value) {\n    const roomParts = value.trim().split(\" \");\n    if (roomParts.length === 1) {\n      // No room number given\n      return [roomParts[0], \"\"];\n    }\n    if (roomParts.length === 2) {\n      // Building and room number given\n      return roomParts;\n    }\n    // Too many room parts given, assume last part is room number and rest is building\n    return [roomParts.slice(0, -1).join(\" \"), roomParts.slice(-1)[0]];\n  }\n  return [];\n};\n\nexport const termCase = (value: string): Term => {\n  if (fallReg.test(value)) {\n    return Term.Fall;\n  }\n  if (summerReg.test(value)) {\n    return Term.Summer;\n  }\n  if (springReg.test(value)) {\n    return Term.Spring;\n  }\n  if (interimReg.test(value)) {\n    return Term.Interim;\n  }\n  // eslint-disable-next-line no-console\n  console.log(`Term of \"${value}\" is unreadable, defaulting to Fall`);\n  return Term.Fall;\n};\n\nexport const semesterLengthCase = (value: string): SemesterLength => {\n  const upperValue = value.toUpperCase();\n  const lowerValue = value.toLowerCase();\n  if (lowerValue === \"first\") {\n    return SemesterLength.HalfFirst;\n  }\n  if (lowerValue === \"second\") {\n    return SemesterLength.HalfSecond;\n  }\n  if (lowerValue === \"full\") {\n    return SemesterLength.Full;\n  }\n  if (upperValue === \"A\") {\n    return SemesterLength.IntensiveA;\n  }\n  if (upperValue === \"B\") {\n    return SemesterLength.IntensiveB;\n  }\n  if (upperValue === \"C\") {\n    return SemesterLength.IntensiveC;\n  }\n  if (upperValue === \"D\") {\n    return SemesterLength.IntensiveD;\n  }\n  // eslint-disable-next-line no-console\n  console.log(`Half of \"${value}\" is unreadable, defaulting to Full`);\n  return SemesterLength.Full;\n};\n\nexport const daysCase = (value: string) => {\n  const days: Day[] = [];\n  if (sunReg.test(value)) {\n    days.push(Day.Sunday);\n  }\n  if (monReg.test(value)) {\n    days.push(Day.Monday);\n  }\n  if (tuesReg.test(value)) {\n    days.push(Day.Tuesday);\n  }\n  if (wedReg.test(value)) {\n    days.push(Day.Wednesday);\n  }\n  if (thursReg.test(value)) {\n    days.push(Day.Thursday);\n  }\n  if (friReg.test(value)) {\n    days.push(Day.Friday);\n  }\n  if (satReg.test(value)) {\n    days.push(Day.Saturday);\n  }\n  return days;\n};\n\nexport const instructorCase = (value: string): string[] => {\n  const instructors = value.split(/[;,\\n]/);\n  return instructors.map((instructor) => {\n    return instructor.trim();\n  });\n};\n\nexport const endDateCase = (\n  value: string,\n  startSectionDate: string | undefined,\n): SemesterLength => {\n  const sectionStart = moment(startSectionDate, \"l\");\n  const sectionEnd = moment(value, \"l\");\n  const sectionLength = sectionEnd.diff(sectionStart, \"days\");\n  const startMonth = sectionStart.month();\n  const firstStartMonths = [0, 1, 7, 8]; // Jan, Feb, Aug, Sept\n  if (sectionLength > MAX_HALF_LENGTH || value.trim() === \"\") {\n    return SemesterLength.Full;\n  }\n  if (sectionLength > MIN_HALF_LENGTH && sectionLength <= MAX_HALF_LENGTH) {\n    return firstStartMonths.includes(startMonth)\n      ? SemesterLength.HalfFirst\n      : SemesterLength.HalfSecond;\n  }\n  // TODO: Figure out if intensive is A, B, C, or D\n  return SemesterLength.IntensiveA;\n};\n\nexport const prefixCase = (value: string): string[] => {\n  return value.replace(\" \", \"\").split(/[;,\\n]/);\n};\n\nexport const integerDefaultZeroCase = (value: string): number | undefined => {\n  return value.trim() === \"\" ? undefined : Number.isInteger(Number(value)) ? Number(value) : 0;\n};\n\nexport const durationCase = (value: string): number => {\n  if (Number.isInteger(Number(value))) {\n    return Number(value);\n  }\n  const [startTime, endTime] = value.split(\" \").join(\"\").split(\"-\");\n  const startTimeMoment = moment(startTime, \"h:mmA\");\n  const endTimeMoment = moment(endTime, \"h:mmA\");\n  return endTimeMoment.diff(startTimeMoment, \"minutes\");\n};\n\nexport const yearCase = (value: string): number | string | undefined => {\n  return value && Number.isInteger(Number(value)) ? Number(value) : value;\n};\n","import produce, { Draft } from \"immer\";\nimport { State, StateCreator } from \"zustand\";\n\n/**\n * immer is a helper function that is used as a middleware for\n *   zustand stores. This allows one to create the next immutable state\n *   by mutation the first one.\n *\n * Usage:\n *  const useStore = create(immer(set => { ... }));\n *\n * Note: immer isn't limited to zustand use.\n * Ref: https://github.com/pmndrs/zustand#middleware\n */\nexport const immer = <T extends State>(\n  config: StateCreator<T, (fn: (draft: Draft<T>) => void) => void>,\n): StateCreator<T> => {\n  return (set, get, api) => {\n    return config(\n      (fn) => {\n        return set(produce<T>(fn));\n      },\n      get,\n      api,\n    );\n  };\n};\n","import React, { ComponentProps, ElementType, FC, forwardRef, ReactNode } from \"react\";\nimport { getChildByName } from \"utilities\";\n\n/* Options props to pass when creating a component. */\ninterface ComponentOptions<T extends ElementType = \"div\"> {\n  Component?: T;\n  defaultProps?: Partial<ComponentProps<T>>;\n  displayName?: string;\n}\n\n/*\nThis function will create a \"pass-through\" component. It is used to create\n  sub-components that return its children so the parent component and arrange those children.\n  The parent affectively can employ \"middleware\" between the child component JSX and the JSX that is\n  rendered. This function was originally from from React-Bootstrap which has been modified under their\n  MIT license.\nRef: https://github.com/react-bootstrap/react-bootstrap/blob/072e7c5fb01b492735a9db2409909058a9976190/src/createWithBsPrefix.tsx#L16\n*/\nexport const createFC = <T extends ElementType = \"div\">(\n  prefix: string,\n  { displayName = prefix, Component, defaultProps }: ComponentOptions<T> = {},\n): FC<{}> => {\n  const subComponent = forwardRef(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ({ className, as: Tag = Component || \"div\", ...props }: any, ref) => {\n      return <Tag ref={ref} className={`${className}`} {...props} />;\n    },\n  );\n  subComponent.defaultProps = defaultProps;\n  subComponent.displayName = displayName;\n  return subComponent as FC<{}>;\n};\n\ntype Alternatives = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  alternatives?: any;\n};\n\n/*\nReturns an iterable from a \"runtypes\" union.\nRef: https://github.com/microsoft/TypeScript/issues/13542#issuecomment-282762530\n*/\nconst getUnionTypeIterable = <T extends Alternatives>(type: T): string[] => {\n  return type.alternatives.map((literal: { value: string }) => {\n    return literal.value;\n  });\n};\n\ntype Elements<T extends string> = { [key in T]?: JSX.Element };\n\n/* This gets the JSX.Elements from the children of a component and return them in an object\nRef: https://stackoverflow.com/questions/53813188/how-can-i-cast-custom-type-to-primitive-type\n*/\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const getElements = <T extends string>(children: ReactNode, type: any) => {\n  const elements: Elements<T> = {};\n  getUnionTypeIterable<T & Alternatives>(type).forEach((it: string) => {\n    // eslint-disable-next-line prefer-destructuring\n    elements[(it as unknown) as T] = getChildByName(children, it)[0];\n  });\n  return elements;\n};\n","import { cloneDeep, isEqual } from \"lodash\";\nimport papa from \"papaparse\";\nimport {\n  Course,\n  emptyCourse,\n  emptySection,\n  Meeting,\n  Schedule,\n  Section,\n  updateNonIdentifyingCourseInfo,\n  updateNonIdentifyingSectionInfo,\n} from \"utilities\";\nimport { getCourse, getSection } from \"utilities/services\";\nimport * as cf from \"./caseFunctions\";\n\ninterface ValidFields {\n  [key: string]: (value: string, data: cf.CaseCallbackParams) => void;\n}\n\nconst pruimSpreadsheetFields: ValidFields = {\n  anticipatedSize: cf.anticipatedSizeCallback,\n  comments: cf.commentsCallback,\n  days: cf.daysCallback,\n  duration: cf.durationCallback,\n  facultyHours: cf.facultyHoursCallback,\n  globalMax: cf.globalMaxCallback,\n  half: cf.semesterLengthCallback,\n  instructor: cf.instructorCallback,\n  instructors: cf.instructorCallback,\n  localMax: cf.localMaxCallback,\n  location: cf.locationCallback,\n  name: cf.nameCallback,\n  number: cf.numberCallback,\n  prefix: cf.prefixCallback,\n  prefixes: cf.prefixCallback,\n  roomCapacity: cf.roomCapacityCallback,\n  section: cf.letterCallback,\n  semesterLength: cf.semesterLengthCallback,\n  startTime: cf.startTimeCallback,\n  startTimeStr: cf.startTimeCallback,\n  studentHours: cf.studentHoursCallback,\n  term: cf.termCallback,\n  year: cf.yearCallback,\n};\n\nconst registrarSpreadsheetFields: ValidFields = {\n  AcademicYear: cf.yearCallback,\n  BuildingAndRoom: cf.locationCallback,\n  Comments: cf.commentsCallback,\n  CourseNum: cf.numberCallback,\n  Day10Used: cf.day10UsedCallback,\n  Department: cf.departmentCallback,\n  Faculty: cf.instructorCallback,\n  FacultyLoad: cf.facultyHoursCallback,\n  GlobalMax: cf.globalMaxCallback,\n  InstructionalMethod: cf.instructionalMethodCallback,\n  LastEditTimestamp: cf.timestampCallback,\n  LocalMax: cf.localMaxCallback,\n  MeetingDays: cf.daysCallback,\n  MeetingDurationMinutes: cf.durationCallback,\n  MeetingStart: cf.startTimeCallback,\n  MeetingTime: cf.timeCallback,\n  MinimumCredits: cf.studentHoursCallback,\n  RoomCapacity: cf.roomCapacityCallback,\n  SectionCode: cf.letterCallback,\n  SectionEndDate: cf.endDateCallback,\n  SectionStartDate: cf.startDateCallback,\n  SectionStatus: cf.statusCallback,\n  SemesterLength: cf.semesterLengthCallback,\n  ShortTitle: cf.nameCallback,\n  SubjectCode: cf.prefixCallback,\n  Term: cf.termCallback,\n  TermStart: cf.termStartCallback,\n  Used: cf.usedCallback,\n};\n\nconst templateSpreadsheetFields: ValidFields = {\n  Days: cf.daysCallback,\n  FacLoad: cf.facultyHoursCallback,\n  NonTeachingActivity: cf.nonTeachingActivityCallback,\n  Room: cf.locationCallback,\n  SectionName: cf.sectionCallback,\n  StuCred: cf.studentHoursCallback,\n  Terms: cf.termCallback,\n};\n\nconst callbacks: ValidFields = {\n  ...pruimSpreadsheetFields,\n  ...registrarSpreadsheetFields,\n  ...templateSpreadsheetFields,\n};\n\nexport const csvStringToSchedule = (csvString: string): Schedule => {\n  // Remove junk from Excel export to CSV\n  csvString = csvString.replace(\"ï»¿\", \"\");\n\n  // Remove title rows from template spreadsheet. Perhaps there is a better way to check if it is in the template format\n  if (csvString.startsWith(\"2\")) {\n    csvString = csvString.split(\"\\n\").slice(2).join(\"\\n\");\n  }\n\n  const objects: papa.ParseResult<never> = papa.parse(csvString, {\n    header: true,\n    skipEmptyLines: \"greedy\",\n  });\n\n  // Define variables for Schedule creation\n  const schedule: Schedule = {\n    courses: [],\n  };\n\n  // Get data and fields from the CSV\n  const { data, meta } = objects;\n  const { fields } = meta;\n\n  // Parse each row of the CSV as an object\n  data.forEach((object) => {\n    // Reset defaults\n    const section = cloneDeep(emptySection);\n    const meetings: Meeting[] = [];\n    const course: Course = cloneDeep(emptyCourse);\n\n    // Iterate through the fields of the CSV, and parse their values for this object\n    // TODO: Create a sense of priority for MeetingDurationMinutes over MeetingTime and SemesterLength over SemesterEndDate - SemesterStartDate\n    if (fields) {\n      fields.forEach((field) => {\n        const value = String(object[field]);\n        field = field.replace(/\\s/g, \"\").replace(\"(\", \"\").replace(\")\", \"\").replace(\"-\", \"\");\n        if (field in callbacks) {\n          callbacks[field as keyof ValidFields](value, { course, meetings, section });\n        }\n      });\n\n      // Insert the Section to the Schedule, either as a new Course or to an existing Course\n      section.meetings = meetings;\n      insertSectionCourse(schedule, section, course);\n    }\n  });\n  return schedule;\n};\n\n// Insert the Section to the Schedule, either as a new Course or to an existing Course\nexport const insertSectionCourse = (schedule: Schedule, section: Section, course: Course) => {\n  const { meetings } = section;\n\n  // Check if any meetings are empty, and should be removed\n  // TODO: What about TBA meetings where the location is specified but not the time\n  //       (currently allowing these causes the app to crash)\n  section.meetings = meetings.filter((meeting) => {\n    return meeting.days?.length > 0 && meeting.duration > 0;\n  });\n\n  // Check if there is already a course in the schedule with the same prefix and number\n  const existingCourse = getCourse(schedule, course.prefixes, course.number);\n\n  // If there is, first check if there is already a section for that course with the same letter, instructors, and term\n  if (existingCourse) {\n    const existingCourseIndex = schedule.courses.indexOf(existingCourse);\n    const existingSection = getSection(\n      schedule,\n      course.prefixes,\n      course.number,\n      section.letter,\n      section.term,\n      section.instructors,\n      section.instructionalMethod,\n    );\n\n    // Update Course fields which were changed\n    schedule.courses[existingCourseIndex] = updateNonIdentifyingCourseInfo(existingCourse, course);\n    if (course.name !== schedule.courses[existingCourseIndex].name) {\n      section.name = course.name;\n    }\n\n    // Update the section name if the received name is different than the course name (section name will override the course name)\n    if (course.name !== schedule.courses[existingCourseIndex].name) {\n      section.name = course.name;\n    }\n\n    // If there is, add the new meeting(s) to the existing course\n    if (existingSection) {\n      const existingSectionIndex = schedule.courses[existingCourseIndex].sections.indexOf(\n        existingSection,\n      );\n      const newMeetings = section.meetings;\n\n      // Update Section fields which were changed\n      schedule.courses[existingCourseIndex].sections[\n        existingSectionIndex\n      ] = updateNonIdentifyingSectionInfo(existingSection, section);\n\n      // Only add meetings which don't already exist\n      newMeetings.forEach((newMeeting) => {\n        let meetingExists = false;\n        schedule.courses[existingCourseIndex].sections[existingSectionIndex].meetings.forEach(\n          (oldMeeting) => {\n            // Short-circuit if duplicate is found\n            if (!meetingExists && isEqual(newMeeting, oldMeeting)) {\n              meetingExists = true;\n            }\n          },\n        );\n        if (!meetingExists) {\n          schedule.courses[existingCourseIndex].sections[\n            existingSectionIndex\n          ].meetings = schedule.courses[existingCourseIndex].sections[\n            existingSectionIndex\n          ].meetings.concat(newMeeting);\n        }\n      });\n    }\n    // Otherwise, add the new section to the existing course\n    else {\n      schedule.courses[existingCourseIndex].sections.push(section);\n    }\n  }\n  // Otherwise, add the new course to the schedule\n  else {\n    course.sections.push(section);\n    schedule.courses.push(course);\n  }\n  return schedule;\n};\n","export interface TeamMember {\n  bio: string;\n  name: string;\n  photo: string;\n  website: string;\n}\n\n/* Basic information about the project team members */\nexport const team: TeamMember[] = [\n  {\n    bio:\n      \"Computer Science Student at Calvin University. Jonathan is a hard worker, a faster runner, and has previous web development experience.\",\n    name: \"Jonathan Ellis\",\n    photo:\n      \"https://avatars3.githubusercontent.com/u/49655167?s=460&u=b81f525db7da58b19bc28588282b366cd8b748ab&v=4\",\n    website: \"https://github.com/Jonri2\",\n  },\n  {\n    bio:\n      \"Computer Science and Mathematics Student at Calvin University. Bryant is hoping to go into software development while keeping Mathematics as a lifelong hobby.\",\n    name: \"Bryant George\",\n    photo:\n      \"https://avatars1.githubusercontent.com/u/51130302?s=460&u=83737db9aeff2b377654a3e0a7cd3dc39f54f7ff&v=4\",\n    website: \"https://github.com/bryantgeorge\",\n  },\n  {\n    bio:\n      \"Computer Science Student at Calvin University. Charles plans to start his software career post-graduation with Tekton as an ecommerce developer.\",\n    name: \"Charles Kornoelje\",\n    photo:\n      \"https://avatars2.githubusercontent.com/u/33156025?s=460&u=fb61bdf55f17108f9687c334b4b4abc4b09c7259&v=4\",\n    website: \"https://github.com/charkour\",\n  },\n  {\n    bio:\n      \"Computer Science Professor and Department Chair at Calvin University. VanderLinden's research interests are in Natural Language Engineering and Human-Computer Interaction.\",\n    name: \"Professor Keith VanderLinden\",\n    photo:\n      \"https://avatars0.githubusercontent.com/u/4930536?s=460&u=216f27d175496fec82a87e0c1c1c1514f73997da&v=4\",\n    website: \"https://calvin.edu/directory/people/keith-vander-linden\",\n  },\n  {\n    bio:\n      \"Mathematics and Statistics Professor and Department Chair at Calvin University. Pruim's research interests are in Computational Statistics, Scientific Computing, and Statistics Education.\",\n    name: \"Professor Randall Pruim\",\n    photo: \"https://www.statistics.com/wp-content/uploads/2019/05/dr-randall-pruim.jpg\",\n    website: \"https://calvin.edu/directory/people/randall-pruim\",\n  },\n];\n","import { Children, ReactNode } from \"react\";\n\n/* Create an iterable from an enumeration */\nexport const enumArray = <T>(e: T) => {\n  return Object.keys(e).map((val) => {\n    return e[val as keyof typeof e];\n  });\n};\n\n/* a no-op fn used for default values */\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport const voidFn = () => {};\n\n/* Method of getting a child component by their display name.\n  Used in sub-components.\n*/\nexport const getChildByName = (children: ReactNode, displayName: string) => {\n  return Children.map(children as JSX.Element[], (child: JSX.Element) => {\n    return child?.type.displayName === displayName ? child : null;\n  });\n};\n","import { forEach } from \"lodash\";\nimport moment, { Moment } from \"moment\";\nimport { Day, Schedule, Section, Term } from \"utilities/interfaces\";\nimport { getLocationString } from \"utilities/services\";\n\nexport const scheduleToFullCSVString = (schedule: Schedule): string => {\n  const numericReg = RegExp(\"[0-9]\");\n  let csvStr =\n    \"Department,Term,TermStart,AcademicYear,SectionName,SubjectCode,CourseNum,SectionCode,CourseLevelCode,MinimumCredits,FacultyLoad,Used,Day10Used,LocalMax,GlobalMax,RoomCapacity,BuildingAndRoom,MeetingDays,MeetingTime,SectionStartDate,SectionEndDate,SemesterLength,Building,RoomNumber,MeetingStart,MeetingStartInternal,MeetingDurationMinutes,MeetingEnd,MeetingEndInternal,Monday,Tuesday,Wednesday,Thursday,Friday,ShortTitle,Faculty,SectionStatus,InstructionalMethod,Comments,LastEditTimestamp\\n\";\n  schedule.courses.forEach((course) => {\n    course.sections.forEach((section) => {\n      // Iterate through meetings to construct relevant strings\n      let startMoment;\n      let endMoment;\n      let meetingTimeStr = \"\";\n      let meetingStartStr = \"\";\n      let meetingStartInternalStr = \"\";\n      let meetingEndStr = \"\";\n      let meetingEndInternalStr = \"\";\n      let meetingDurationMinutesStr = \"\";\n      let buildingStr = \"\";\n      let roomNumberStr = \"\";\n      let buildingAndRoomStr = \"\";\n      let roomCapacityStr = \"\";\n      let daysStr = \"\";\n      let monStr = \"\";\n      let tuesStr = \"\";\n      let wedStr = \"\";\n      let thursStr = \"\";\n      let friStr = \"\";\n      section.meetings.forEach((meeting) => {\n        startMoment = moment(meeting.startTime, \"h:mm A\");\n        endMoment = startMoment.clone().add(meeting.duration, \"minutes\");\n        if (startMoment.isValid()) {\n          meetingTimeStr += getMeetingTimeStr(startMoment, endMoment);\n          meetingStartStr += `${startMoment.format(\"h:mm A\")}\\n`;\n          meetingStartInternalStr += `${startMoment.format(\"H:mm:ss\")}\\n`;\n          meetingEndStr += `${endMoment.format(\"h:mm A\")}\\n`;\n          meetingEndInternalStr += `${endMoment.format(\"H:mm:ss\")}\\n`;\n        } else {\n          meetingTimeStr += \"\\n\";\n          meetingStartStr += \"\\n\";\n          meetingStartInternalStr += \"\\n\";\n          meetingEndStr += \"\\n\";\n          meetingEndInternalStr += \"\\n\";\n        }\n        meetingDurationMinutesStr += `${meeting.duration}\\n`;\n        if (meeting.location && meeting.location.building) {\n          buildingStr += `${meeting.location.building}\\n`;\n          roomNumberStr += `${meeting.location.roomNumber}\\n`;\n          buildingAndRoomStr += meeting.location.roomNumber\n            ? `${getLocationString(meeting.location)}\\n`\n            : `${meeting.location.building}\\n`;\n        }\n        roomCapacityStr += `${meeting.location.roomCapacity ?? \"\"}\\n`;\n        daysStr += `${meeting.days.join(\"\")}\\n`;\n        monStr += `${meeting.days.includes(Day.Monday) ? \"M\" : \"\"}\\n`;\n        tuesStr += `${meeting.days.includes(Day.Tuesday) ? \"T\" : \"\"}\\n`;\n        wedStr += `${meeting.days.includes(Day.Wednesday) ? \"W\" : \"\"}\\n`;\n        thursStr += `${meeting.days.includes(Day.Thursday) ? \"TH\" : \"\"}\\n`;\n        friStr += `${meeting.days.includes(Day.Friday) ? \"F\" : \"\"}\\n`;\n      });\n      // Remove trailing newlines\n      meetingTimeStr = meetingTimeStr.slice(0, -1);\n      meetingStartStr = meetingStartStr.slice(0, -1);\n      meetingStartInternalStr = meetingStartInternalStr.slice(0, -1);\n      meetingEndStr = meetingEndStr.slice(0, -1);\n      meetingEndInternalStr = meetingEndInternalStr.slice(0, -1);\n      meetingDurationMinutesStr = meetingDurationMinutesStr.slice(0, -1);\n      buildingStr = buildingStr.slice(0, -1);\n      roomNumberStr = roomNumberStr.slice(0, -1);\n      buildingAndRoomStr = buildingAndRoomStr.slice(0, -1);\n      roomCapacityStr = roomCapacityStr.slice(0, -1);\n      daysStr = daysStr.slice(0, -1);\n      monStr = monStr.slice(0, -1);\n      tuesStr = tuesStr.slice(0, -1);\n      wedStr = wedStr.slice(0, -1);\n      thursStr = thursStr.slice(0, -1);\n      friStr = friStr.slice(0, -1);\n      // Create strings for fields that need to be constructed\n      const termStr = getTermsStr(section);\n      const sectionNameStr = `${course.prefixes.length ? course.prefixes[0] : \"\"}-${\n        course.number\n      }-${section.letter}`;\n      const courseLevelCodeStr = numericReg.test(course.number[0]) ? `${course.number[0]}00` : \"\";\n\n      // Construct a row in the output CSV\n      csvStr += `\"${course.department ?? \"\"}\",${termStr},${section.termStart ?? \"\"},${\n        section.year ?? \"\"\n      },\"${sectionNameStr}\",\"${course.prefixes.join(\"\\n\")}\",${course.number},${\n        section.letter\n      },${courseLevelCodeStr},${section.studentHours > -1 ? section.studentHours : \"\"},${\n        section.facultyHours > -1 ? section.facultyHours : \"\"\n      },${section.used ?? \"\"},${section.day10Used ?? \"\"},${section.localMax ?? \"\"},${\n        section.globalMax ?? \"\"\n      },\"${roomCapacityStr ?? \"\"}\",\"${buildingAndRoomStr}\",\"${daysStr}\",\"${meetingTimeStr}\",${\n        section.startDate ?? \"\"\n      },${section.endDate ?? \"\"},${\n        section.semesterLength ?? \"\"\n      },\"${buildingStr}\",\"${roomNumberStr}\",\"${meetingStartStr}\",\"${meetingStartInternalStr}\",\"${meetingDurationMinutesStr}\",\"${meetingEndStr}\",\"${meetingEndInternalStr}\",\"${monStr}\",\"${tuesStr}\",\"${wedStr}\",\"${thursStr}\",\"${friStr}\",\"${\n        section.name ?? course.name\n      }\",\"${section.instructors.join(\"\\n\")}\",\"${section.status ?? \"\"}\",\"${\n        section.instructionalMethod ?? \"\"\n      }\",\"${section.comments ?? \"\"}\",\"${section.timestamp ?? \"\"}\"\\n`;\n    });\n  });\n  return csvStr;\n};\n\nexport const getMeetingTimeStr = (startMoment: Moment, endMoment: Moment): string => {\n  return `${startMoment.format(\"h:mmA\")} - ${endMoment.format(\"h:mmA\")}\\n`;\n};\n\nexport const getTermsStr = (section: Section): string => {\n  if (Array.isArray(section.term)) {\n    if (section.term.length === 0) {\n      return \"\";\n    }\n    let termsStr = '\"';\n    forEach(section.term, (term) => {\n      termsStr += `${getTermStr(section.year, term)}, `;\n    });\n    return `${termsStr.slice(0, -2)}\"`;\n  }\n  return getTermStr(section.year, section.term);\n};\n\nconst getTermStr = (year: Section[\"year\"], term: Term): string => {\n  return year\n    ? `${\n        typeof year === \"number\"\n          ? term === Term.Fall\n            ? String(year).slice(-2)\n            : String(year + 1).slice(-2)\n          : term === Term.Fall\n          ? String(Number(year?.slice(-2)) - 1)\n          : year?.slice(-2)\n      }/${term}`\n    : term;\n};\n","import moment from \"moment\";\nimport { getLocationString, getMeetingTimeStr, getTermsStr } from \"utilities\";\nimport { Schedule } from \"utilities/interfaces\";\n\n// Exported alongside the full schedule\nexport const scheduleToNonTeachingCSVString = (schedule: Schedule): string => {\n  const csvHeader = \"Term(s),Non-Teaching Activity,Fac Load,Faculty\\n\";\n  let csvStr = csvHeader;\n  schedule.courses.forEach((course) => {\n    // Only produce output for courses that don't have a prefix and number (assume they are non-teaching loads)\n    if (!((course.prefixes.length && course.prefixes[0]) || course.number)) {\n      course.sections.forEach((section) => {\n        // Create strings for fields that need to be constructed\n        const termStr = getTermsStr(section);\n\n        // TODO: Should instructionalMethod be used for Non-Teaching Activity or should we add a new field?\n        // Construct a row in the output CSV\n        csvStr += `${termStr},${section.instructionalMethod},${section.facultyHours.toFixed(\n          2,\n        )},\"${section.instructors.join(\"\\n\")}\"\\n`;\n      });\n    }\n  });\n  // Only output if there are non-teaching loads\n  if (csvStr !== csvHeader) {\n    return csvStr;\n  }\n  return \"\";\n};\n\n// Deprecated, TODO: Remove this function?\n// Simplified version of scheduleToFullCSVString() from writeFullCSV.ts\nexport const scheduleToCSVString = (schedule: Schedule): string => {\n  let csvStr = \"Term,Section Name,Stu Cred,Fac Load,Room,Days,Meeting Time,Short Title,Faculty\\n\";\n  schedule.courses.forEach((course) => {\n    // Only produce output for courses with a prefix and number (else assume they are non-teaching loads)\n    if ((course.prefixes.length && course.prefixes[0]) || course.number) {\n      course.sections.forEach((section) => {\n        // Iterate through meetings to construct relevant strings\n        let startMoment;\n        let endMoment;\n        let meetingTimeStr = \"\";\n        let buildingAndRoomStr = \"\";\n        let daysStr = \"\";\n        section.meetings.forEach((meeting) => {\n          startMoment = moment(meeting.startTime, \"h:mm A\");\n          endMoment = startMoment.clone().add(meeting.duration, \"minutes\");\n          if (startMoment.isValid()) {\n            meetingTimeStr += getMeetingTimeStr(startMoment, endMoment);\n          } else {\n            meetingTimeStr += \"\\n\";\n          }\n          buildingAndRoomStr += meeting.location.roomNumber\n            ? `${getLocationString(meeting.location)}\\n`\n            : `${meeting.location.building}\\n`;\n          daysStr += `${meeting.days.join(\"\")}\\n`;\n        });\n        // Remove trailing newlines\n        meetingTimeStr = meetingTimeStr.slice(0, -1);\n        buildingAndRoomStr = buildingAndRoomStr.slice(0, -1);\n        daysStr = daysStr.slice(0, -1);\n        // Create strings for fields that need to be constructed\n        const termStr = getTermsStr(section);\n        const sectionNameStr = `${course.prefixes.length ? course.prefixes[0] : \"\"}-${\n          course.number\n        }-${section.letter}`;\n\n        // Construct a row in the output CSV\n        csvStr += `${termStr},\"${sectionNameStr}\",${section.studentHours.toFixed(\n          2,\n        )},${section.facultyHours.toFixed(\n          2,\n        )},\"${buildingAndRoomStr}\",\"${daysStr}\",\"${meetingTimeStr}\",\"${\n          section.name ?? course.name\n        }\",\"${section.instructors.join(\"\\n\")}\"\\n`;\n      });\n    }\n  });\n  return csvStr;\n};\n"],"sourceRoot":""}